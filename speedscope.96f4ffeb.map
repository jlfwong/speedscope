{"version":3,"sources":["../node_modules/preact/dist/preact.esm.js","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/symbol-observable/es/index.js","../node_modules/redux/es/redux.js","../node_modules/preact-redux/dist/preact-redux.esm.js","../src/lib/typed-redux.ts","../src/lib/math.ts","../src/store/flamechart-view-state.ts","../src/store/sandwich-view-state.ts","../src/lib/utils.ts","../src/store/profiles-state.ts","../src/store/actions.ts","../src/lib/hash-params.ts","../node_modules/css-in-js-utils/lib/isPrefixedValue.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/calc.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/crossFade.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/cursor.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/filter.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/flex.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/flexboxIE.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/flexboxOld.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/gradient.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/imageSet.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/position.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/sizing.js","../node_modules/hyphenate-style-name/index.js","../node_modules/css-in-js-utils/lib/hyphenateProperty.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/utils/capitalizeString.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/plugins/transition.js","../node_modules/string-hash/index.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/utils/prefixProperty.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/utils/prefixValue.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/utils/addNewValuesOnly.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/utils/isObject.js","../node_modules/aphrodite/node_modules/inline-style-prefixer/static/createPrefixer.js","../node_modules/asap/browser-raw.js","../node_modules/asap/browser-asap.js","../node_modules/aphrodite/es/index.js","../src/views/style.ts","../src/views/color-chit.tsx","../src/views/scrollable-list-view.tsx","../src/lib/lru-cache.ts","../node_modules/process/browser.js","../src/gl/graphics.ts","../src/gl/utils.ts","../src/gl/rectangle-batch-renderer.ts","../src/lib/color.ts","../src/gl/row-atlas.ts","../src/gl/texture-renderer.ts","../src/gl/overlay-rectangle-renderer.ts","../src/gl/flamechart-color-pass-renderer.ts","../src/gl/canvas-context.ts","../src/store/getters.ts","../src/views/profile-table-view.tsx","../src/store/index.ts","../src/lib/emscripten.ts","../src/lib/flamechart.ts","../src/gl/flamechart-renderer.ts","../src/views/flamechart-style.ts","../src/lib/text-utils.ts","../src/views/flamechart-minimap-view.tsx","../src/views/flamechart-detail-view.tsx","../src/views/flamechart-pan-zoom-view.tsx","../src/views/hovertip.tsx","../src/views/flamechart-view.tsx","../src/views/flamechart-view-container.tsx","../src/views/flamechart-wrapper.tsx","../src/views/inverted-caller-flamegraph-view.ts","../src/views/callee-flamegraph-view.ts","../src/views/sandwich-view.tsx","../src/lib/value-formatters.ts","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","../src/lib/profile.ts","../src/lib/file-format-spec.ts","0","../src/lib/file-format.ts","../src/views/application.tsx","../src/views/application-container.tsx","../src/speedscope.tsx"],"names":["VNode","options","stack","EMPTY_CHILDREN","h","nodeName","attributes","children","lastSimple","child","simple","i","arguments","length","push","pop","undefined","String","p","key","vnode","extend","obj","props","defer","Promise","resolve","then","bind","setTimeout","cloneElement","slice","call","IS_NON_DIMENSIONAL","items","enqueueRender","component","_dirty","debounceRendering","rerender","list","renderComponent","isSameNodeType","node","hydrating","splitText","_componentConstructor","isNamedNode","normalizedNodeName","toLowerCase","getNodeProps","defaultProps","createNode","isSvg","document","createElementNS","createElement","removeNode","parentNode","removeChild","setAccessor","name","old","value","style","cssText","test","innerHTML","__html","useCapture","replace","substring","addEventListener","eventProxy","removeEventListener","_listeners","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","className","setProperty","e","type","event","mounts","diffLevel","isSvgMode","flushMounts","c","afterMount","componentDidMount","diff","dom","context","mountAll","parent","componentRoot","ownerSVGElement","ret","idiff","appendChild","out","prevSvgMode","_component","nodeValue","createTextNode","replaceChild","vnodeName","buildComponentFromVNode","firstChild","fc","vchildren","a","nextSibling","dangerouslySetInnerHTML","innerDiffNode","isHydrating","originalChildren","j","f","vchild","childNodes","keyed","keyedLen","min","len","childrenLen","vlen","_child","__key","trim","insertBefore","recollectNodeTree","unmountOnly","ref","removeChildren","lastChild","next","previousSibling","diffAttributes","attrs","components","collectComponent","constructor","createComponent","Ctor","inst","prototype","render","Component","doRender","nextBase","splice","state","setComponentProps","opts","_disable","__ref","base","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","isChild","rendered","cbase","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","skip","shouldComponentUpdate","componentWillUpdate","getChildContext","childComponent","toUnmount","childProps","_parentComponent","baseParent","t","componentRef","unshift","componentDidUpdate","afterUpdate","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","unmountComponent","beforeUnmount","componentWillUnmount","inner","merge","callback","s","preact","symbolObservablePonyfill","root","result","Symbol","observable","self","window","global","module","Function","ActionTypes","Math","random","toString","split","join","_typeof","iterator","_extends","Object","assign","target","source","hasOwnProperty","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","Error","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","index","indexOf","dispatch","action","listeners","INIT","replaceReducer","nextReducer","REPLACE","$$observable","_ref","outerSubscribe","observer","TypeError","observeState","unsubscribe","warning","message","console","error","getUndefinedStateErrorMessage","actionType","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","keys","argumentName","match","unexpectedKeys","filter","forEach","assertReducerShape","combineReducers","finalReducers","finalReducerKeys","shapeAssertionError","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","apply","bindActionCreators","actionCreators","boundActionCreators","compose","_len","funcs","Array","arg","reduce","b","applyMiddleware","middlewares","_len2","args","_key2","store","_dispatch","middlewareAPI","chain","map","middleware","isCrushed","__DO_NOT_USE__ActionTypes","Children","proptype","isRequired","PropTypes","subscriptionShape","shape","func","storeShape","classCallCheck","instance","Constructor","inherits","subClass","superClass","create","setPrototypeOf","__proto__","objectWithoutProperties","possibleConstructorReturn","ReferenceError","didWarnAboutReceivingStore","warnAboutReceivingStore","createProvider","_Provider$childContex","storeKey","subscriptionKey","Provider","_Component","_this","only","nextProps","childContextTypes","REACT_STATICS","KNOWN_STATICS","defineProperty$1","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","concat","descriptor","hoistNonReactStatics_cjs","invariant","CLEARED","nullListeners","createListenerCollection","current","Subscription","parentSub","onStateChange","addNestedSub","trySubscribe","notifyNestedSubs","notify","Boolean","tryUnsubscribe","clear","hotReloadingVersion","dummyState","noop","makeSelectorStateful","sourceSelector","selector","connectAdvanced","selectorFactory","_contextTypes","_childContextTypes","_ref$getDisplayName","getDisplayName","_ref$methodName","methodName","_ref$renderCountProp","renderCountProp","_ref$shouldHandleStat","shouldHandleStateChanges","_ref$storeKey","_ref$withRef","withRef","connectOptions","version","contextTypes","WrappedComponent","JSON","stringify","wrappedComponentName","displayName","selectorFactoryOptions","Connect","renderCount","propsMode","setWrappedInstance","initSelector","initSubscription","subscription","run","forceUpdate","getWrappedInstance","wrappedInstance","notifyNestedSubsOnComponentDidUpdate","setState","addExtraProps","withExtras","_this2","oldListeners","get","hasOwn","is","x","y","shallowEqual","objA","objB","keysA","keysB","freeGlobal","freeSelf","_Symbol","objectProto$1","hasOwnProperty$1","nativeObjectToString","symToStringTag$1","toStringTag","getRawTag","isOwn","tag","unmasked","objectProto$2","nativeObjectToString$1","objectToString","nullTag","undefinedTag","symToStringTag","baseGetTag","overArg","transform","getPrototype","isObjectLike","objectTag","funcProto","objectProto","funcToString","objectCtorString","verifyPlainObject","wrapMapToPropsConstant","getConstant","constant","constantSelector","dependsOnOwnProps","getDependsOnOwnProps","mapToProps","wrapMapToPropsFunc","proxy","stateOrDispatch","ownProps","whenMapDispatchToPropsIsFunction","mapDispatchToProps","whenMapDispatchToPropsIsMissing","whenMapDispatchToPropsIsObject","defaultMapDispatchToPropsFactories","whenMapStateToPropsIsFunction","mapStateToProps","whenMapStateToPropsIsMissing","defaultMapStateToPropsFactories","defaultMergeProps","stateProps","dispatchProps","wrapMergePropsFunc","mergeProps","pure","areMergedPropsEqual","hasRunOnce","mergedProps","nextMergedProps","whenMergePropsIsFunction","whenMergePropsIsOmitted","defaultMergePropsFactories","verify","verifySubselectors","impureFinalPropsSelectorFactory","pureFinalPropsSelectorFactory","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","hasRunAtLeastOnce","handleSubsequentCalls","nextOwnProps","propsChanged","nextStateProps","statePropsChanged","stateChanged","firstState","firstOwnProps","finalPropsSelectorFactory","initMapStateToProps","initMapDispatchToProps","initMergeProps","factories","strictEqual","createConnect","_ref$connectHOC","connectHOC","_ref$mapStateToPropsF","mapStateToPropsFactories","_ref$mapDispatchToPro","mapDispatchToPropsFactories","_ref$mergePropsFactor","mergePropsFactories","_ref$selectorFactory","_ref2$pure","_ref2$areStatesEqual","_ref2$areOwnPropsEqua","_ref2$areStatePropsEq","_ref2$areMergedPropsE","extraOptions","connect","flushToStyleTag","w","m","ms","wm","wms","wmms","staticPrefixData","calc","crossFade","cursor","flex","flexboxIE","flexboxOld","gradient","imageSet","position","sizing","transition","_createClass","defineProperties","enumerable","configurable","writable","protoProps","staticProps","_classCallCheck","MAP_EXISTS","Map","OrderedElements","elements","keyOrder","set","shouldReorder","nested","isArray","_nested","has","addStyleType","styleType","UPPERCASE_RE","UPPERCASE_RE_TO_KEBAB","kebabifyStyleName","string","isUnitlessNumber","prefixKey","prefix","charAt","toUpperCase","prefixes","prop","stringifyValue","stringifyAndImportantifyValue","importantify","hashString","hashObject","object","_toConsumableArray","arr","arr2","from","prefixAll","defaultSelectorHandlers","pseudoSelectors","baseSelector","generateSubtreeStyles","mediaQueries","generated","generateCSS","styleTypes","selectorHandlers","stringHandlers","useImportant","merged","plainDeclarations","generatedStyles","val","some","handler","newSelector","warn","generatedRuleset","generateCSSRuleset","runStringHandlers","declarations","stringHandlerKeys","transformRule","transformValue","arrayToObjectKeysReducer","acc","originalElements","prefixedElements","elementNames","originalStyle","originalIndex","rules","_typeof$1","_toConsumableArray$1","styleTag","injectStyleTag","cssRules","querySelector","head","getElementsByTagName","sheet","styleSheet","insertRule","numRules","rule","innerText","fontFamily","src","animationName","v","finalVal","valVal","valKey","alreadyInjected","injectionBuffer","isBuffering","injectGeneratedCSSOnce","generatedCSS","_injectionBuffer","injectStyleOnce","definitions","reset","getBufferedStyles","startBuffering","flushToArray","flushToString","getRenderedClassNames","addRenderedClassNames","classNames","processStyleDefinitions","styleDefinitions","classNameBits","definitionBits","_name","_definition","injectAndGetClassName","unminifiedHashFn","str","initialHashFn","hashFn","StyleSheet","sheetDefinition","mappedSheetDefinition","stringVal","rehydrate","renderedClassNames","StyleSheetServer","renderStatic","renderFunc","html","cssContent","StyleSheetTestUtils","makeExports","extensions","extensionSelectorHandlers","extension","selectorHandler","minify","shouldMinify","css","Aphrodite","StyleSheet$1","StyleSheetServer$1","StyleSheetTestUtils$1","cachedSetTimeout","cachedClearTimeout","process","exports","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","Item","array","nextTick","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","bundleURL","getBundleURLCached","getBundleURL","err","matches","getBaseURL","url","require","loadBundlesLazy","bundles","id","code","LazyPromise","reject","loadBundles","all","loadBundle","bundleLoaders","registerBundleLoader","loader","load","register","bundle","lastIndexOf","bundleLoader","resolved","executor","promise","onSuccess","onError","catch","description","repository","main","bin","speedscope","scripts","deploy","prepack","prettier","lint","jest","coverage","serve","files","browserslist","author","license","devDependencies","@types/jest","@types/jszip","@types/node","@types/pako","aphrodite","coveralls","eslint","eslint-plugin-prettier","jsverify","jszip","pako","parcel-bundler","preact-redux","quicktype","redux","ts-jest","typescript","typescript-eslint-parser","uglify-es","^.+\\.tsx?$","testRegex","collectCoverageFrom","moduleFileExtensions","dependencies","opn"],"mappings":"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","file":"speedscope.96f4ffeb.map","sourceRoot":"../../assets","sourcesContent":["/** Virtual DOM Node */\nfunction VNode() {}\n\n/** Global options\n *\t@public\n *\t@namespace options {Object}\n */\nvar options = {\n\n\t/** If `true`, `prop` changes trigger synchronous component updates.\n  *\t@name syncComponentUpdates\n  *\t@type Boolean\n  *\t@default true\n  */\n\t//syncComponentUpdates: true,\n\n\t/** Processes all created VNodes.\n  *\t@param {VNode} vnode\tA newly-created VNode to normalize/process\n  */\n\t//vnode(vnode) { }\n\n\t/** Hook invoked after a component is mounted. */\n\t// afterMount(component) { }\n\n\t/** Hook invoked after the DOM is updated with a component's latest render. */\n\t// afterUpdate(component) { }\n\n\t/** Hook invoked immediately before a component is unmounted. */\n\t// beforeUnmount(component) { }\n};\n\nvar stack = [];\n\nvar EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a lightweight representation\n * of the structure of a DOM tree. This structure can be realized by recursively comparing it against\n * the current _actual_ DOM structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string} nodeName\tAn element name. Ex: `div`, `a`, `span`, etc.\n * @param {Object} attributes\tAny attributes/props to set on the created element.\n * @param rest\t\t\tAdditional arguments are taken to be children to append. Can be infinitely nested Arrays.\n *\n * @public\n */\nfunction h(nodeName, attributes) {\n\tvar children = EMPTY_CHILDREN,\n\t    lastSimple,\n\t    child,\n\t    simple,\n\t    i;\n\tfor (i = arguments.length; i-- > 2;) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children != null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\tfor (i = child.length; i--;) {\n\t\t\t\tstack.push(child[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\tif (simple = typeof nodeName !== 'function') {\n\t\t\t\tif (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t} else {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tvar p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes == null ? undefined : attributes;\n\tp.key = attributes == null ? undefined : attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode !== undefined) options.vnode(p);\n\n\treturn p;\n}\n\n/**\n *  Copy all properties from `props` onto `obj`.\n *  @param {Object} obj\t\tObject onto which properties should be copied.\n *  @param {Object} props\tObject from which to copy properties.\n *  @returns obj\n *  @private\n */\nfunction extend(obj, props) {\n  for (var i in props) {\n    obj[i] = props[i];\n  }return obj;\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n *\n * @param {Function} callback\n */\nvar defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {VNode} vnode\t\tThe virutal DOM element to clone\n * @param {Object} props\tAttributes/props to add when cloning\n * @param {VNode} rest\t\tAny additional arguments will be used as replacement children.\n */\nfunction cloneElement(vnode, props) {\n  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n}\n\n// DOM properties that should NOT have \"px\" added when numeric\nvar IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n/** Managed queue of dirty components to be re-rendered */\n\nvar items = [];\n\nfunction enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component) == 1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\nfunction rerender() {\n\tvar p,\n\t    list = items;\n\titems = [];\n\twhile (p = list.pop()) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n\n/**\n * Check if two nodes are equivalent.\n *\n * @param {Node} node\t\t\tDOM Node to compare\n * @param {VNode} vnode\t\t\tVirtual DOM node to compare\n * @param {boolean} [hyrdating=false]\tIf true, ignores component constructors when comparing.\n * @private\n */\nfunction isSameNodeType(node, vnode, hydrating) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return node.splitText !== undefined;\n  }\n  if (typeof vnode.nodeName === 'string') {\n    return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n  }\n  return hydrating || node._componentConstructor === vnode.nodeName;\n}\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n *\n * @param {Element} node\tA DOM Element to inspect the name of.\n * @param {String} nodeName\tUnnormalized name to compare against.\n */\nfunction isNamedNode(node, nodeName) {\n  return node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n}\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n *\n * @param {VNode} vnode\n * @returns {Object} props\n */\nfunction getNodeProps(vnode) {\n  var props = extend({}, vnode.attributes);\n  props.children = vnode.children;\n\n  var defaultProps = vnode.nodeName.defaultProps;\n  if (defaultProps !== undefined) {\n    for (var i in defaultProps) {\n      if (props[i] === undefined) {\n        props[i] = defaultProps[i];\n      }\n    }\n  }\n\n  return props;\n}\n\n/** Create an element with the given nodeName.\n *\t@param {String} nodeName\n *\t@param {Boolean} [isSvg=false]\tIf `true`, creates an element within the SVG namespace.\n *\t@returns {Element} node\n */\nfunction createNode(nodeName, isSvg) {\n\tvar node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n/** Remove a child node from its parent if attached.\n *\t@param {Element} node\t\tThe node to remove\n */\nfunction removeNode(node) {\n\tvar parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/** Set a named attribute on the given Node, with special behavior for some names and event handlers.\n *\tIf `value` is `null`, the attribute/handler will be removed.\n *\t@param {Element} node\tAn element to mutate\n *\t@param {string} name\tThe name/key to set, such as an event or attribute name\n *\t@param {any} old\tThe last value that was set for this name/node pair\n *\t@param {any} value\tAn attribute value, such as a function to be used as an event handler\n *\t@param {Boolean} isSvg\tAre we currently diffing inside an svg?\n *\t@private\n */\nfunction setAccessor(node, name, old, value, isSvg) {\n\tif (name === 'className') name = 'class';\n\n\tif (name === 'key') {\n\t\t// ignore\n\t} else if (name === 'ref') {\n\t\tif (old) old(null);\n\t\tif (value) value(node);\n\t} else if (name === 'class' && !isSvg) {\n\t\tnode.className = value || '';\n\t} else if (name === 'style') {\n\t\tif (!value || typeof value === 'string' || typeof old === 'string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value === 'object') {\n\t\t\tif (typeof old !== 'string') {\n\t\t\t\tfor (var i in old) {\n\t\t\t\t\tif (!(i in value)) node.style[i] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in value) {\n\t\t\t\tnode.style[i] = typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false ? value[i] + 'px' : value[i];\n\t\t\t}\n\t\t}\n\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t} else if (name[0] == 'o' && name[1] == 'n') {\n\t\tvar useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t} else {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n\t\tsetProperty(node, name, value == null ? '' : value);\n\t\tif (value == null || value === false) node.removeAttribute(name);\n\t} else {\n\t\tvar ns = isSvg && name !== (name = name.replace(/^xlink\\:?/, ''));\n\t\tif (value == null || value === false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);\n\t\t} else if (typeof value !== 'function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/** Attempt to set a DOM property to the given value.\n *\tIE & FF throw for certain property-value combinations.\n */\nfunction setProperty(node, name, value) {\n\ttry {\n\t\tnode[name] = value;\n\t} catch (e) {}\n}\n\n/** Proxy an event to hooked event handlers\n *\t@private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n\n/** Queue of components that have been mounted and are awaiting componentDidMount */\nvar mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nvar diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nvar isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nvar hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nfunction flushMounts() {\n\tvar c;\n\twhile (c = mounts.pop()) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\n/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n *\t@param {Element} [dom=null]\t\tA DOM node to mutate into the shape of the `vnode`\n *\t@param {VNode} vnode\t\t\tA VNode (with descendants forming a tree) representing the desired DOM structure\n *\t@returns {Element} dom\t\t\tThe created/mutated element\n *\t@private\n */\nfunction diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent != null && parent.ownerSVGElement !== undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom != null && !('__preactattr_' in dom);\n\t}\n\n\tvar ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode !== parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (! --diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tvar out = dom,\n\t    prevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode == null || typeof vnode === 'boolean') vnode = '';\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue != vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t} else {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout['__preactattr_'] = true;\n\n\t\treturn out;\n\t}\n\n\t// If the VNode represents a Component, perform a component diff:\n\tvar vnodeName = vnode.nodeName;\n\tif (typeof vnodeName === 'function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) {\n\t\t\t\tout.appendChild(dom.firstChild);\n\t\t\t} // if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\tvar fc = out.firstChild,\n\t    props = out['__preactattr_'],\n\t    vchildren = vnode.children;\n\n\tif (props == null) {\n\t\tprops = out['__preactattr_'] = {};\n\t\tfor (var a = out.attributes, i = a.length; i--;) {\n\t\t\tprops[a[i].name] = a[i].value;\n\t\t}\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {\n\t\tif (fc.nodeValue != vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc != null) {\n\t\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);\n\t\t}\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props);\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n *\t@param {Element} dom\t\t\tElement whose children should be compared & mutated\n *\t@param {Array} vchildren\t\tArray of VNodes to compare to `dom.childNodes`\n *\t@param {Object} context\t\t\tImplicitly descendant context object (from most recent `getChildContext()`)\n *\t@param {Boolean} mountAll\n *\t@param {Boolean} isHydrating\tIf `true`, consumes externally created elements similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tvar originalChildren = dom.childNodes,\n\t    children = [],\n\t    keyed = {},\n\t    keyedLen = 0,\n\t    min = 0,\n\t    len = originalChildren.length,\n\t    childrenLen = 0,\n\t    vlen = vchildren ? vchildren.length : 0,\n\t    j,\n\t    c,\n\t    f,\n\t    vchild,\n\t    child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len !== 0) {\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar _child = originalChildren[i],\n\t\t\t    props = _child['__preactattr_'],\n\t\t\t    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;\n\t\t\tif (key != null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = _child;\n\t\t\t} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = _child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen !== 0) {\n\t\tfor (var i = 0; i < vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tvar key = vchild.key;\n\t\t\tif (key != null) {\n\t\t\t\tif (keyedLen && keyed[key] !== undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (!child && min < childrenLen) {\n\t\t\t\t\tfor (j = min; j < childrenLen; j++) {\n\t\t\t\t\t\tif (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\t\tif (j === childrenLen - 1) childrenLen--;\n\t\t\t\t\t\t\tif (j === min) min++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child !== dom && child !== f) {\n\t\t\t\tif (f == null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t} else if (child === f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t} else {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (var i in keyed) {\n\t\t\tif (keyed[i] !== undefined) recollectNodeTree(keyed[i], false);\n\t\t}\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min <= childrenLen) {\n\t\tif ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);\n\t}\n}\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *\t@param {Node} node\t\t\t\t\t\tDOM node to start unmount/removal from\n *\t@param {Boolean} [unmountOnly=false]\tIf `true`, only triggers unmount lifecycle, skips removal\n */\nfunction recollectNodeTree(node, unmountOnly) {\n\tvar component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t} else {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node['__preactattr_'] != null && node['__preactattr_'].ref) node['__preactattr_'].ref(null);\n\n\t\tif (unmountOnly === false || node['__preactattr_'] == null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n/** Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nfunction removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tvar next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n/** Apply differences in attributes from a VNode to the given DOM Element.\n *\t@param {Element} dom\t\tElement with attributes to diff `attrs` against\n *\t@param {Object} attrs\t\tThe desired end-state key-value attribute pairs\n *\t@param {Object} old\t\t\tCurrent/previous attributes (from previous VNode or element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n\tvar name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name] != null) && old[name] != null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n\n/** Retains a pool of Components for re-use, keyed on component name.\n *\tNote: since component names are not unique or even necessarily available, these are primarily a form of sharding.\n *\t@private\n */\nvar components = {};\n\n/** Reclaim a component for later re-use by the recycler. */\nfunction collectComponent(component) {\n\tvar name = component.constructor.name;\n\t(components[name] || (components[name] = [])).push(component);\n}\n\n/** Create a component. Normalizes differences between PFC's and classful Components. */\nfunction createComponent(Ctor, props, context) {\n\tvar list = components[Ctor.name],\n\t    inst;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t} else {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\tif (list) {\n\t\tfor (var i = list.length; i--;) {\n\t\t\tif (list[i].constructor === Ctor) {\n\t\t\t\tinst.nextBase = list[i].nextBase;\n\t\t\t\tlist.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inst;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n\n/** Set a component's `props` (generally derived from JSX attributes).\n *\t@param {Object} props\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.renderSync=false]\tIf `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.\n *\t@param {boolean} [opts.render=true]\t\t\tIf `false`, no render will be triggered.\n */\nfunction setComponentProps(component, props, opts, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tif (component.__ref = props.ref) delete props.ref;\n\tif (component.__key = props.key) delete props.key;\n\n\tif (!component.base || mountAll) {\n\t\tif (component.componentWillMount) component.componentWillMount();\n\t} else if (component.componentWillReceiveProps) {\n\t\tcomponent.componentWillReceiveProps(props, context);\n\t}\n\n\tif (context && context !== component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (opts !== 0) {\n\t\tif (opts === 1 || options.syncComponentUpdates !== false || !component.base) {\n\t\t\trenderComponent(component, 1, mountAll);\n\t\t} else {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tif (component.__ref) component.__ref(component);\n}\n\n/** Render a Component, triggering necessary lifecycle events and taking High-Order Components into account.\n *\t@param {Component} component\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.build=false]\t\tIf `true`, component will build and store a DOM node if not already associated with one.\n *\t@private\n */\nfunction renderComponent(component, opts, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tvar props = component.props,\n\t    state = component.state,\n\t    context = component.context,\n\t    previousProps = component.prevProps || props,\n\t    previousState = component.prevState || state,\n\t    previousContext = component.prevContext || context,\n\t    isUpdate = component.base,\n\t    nextBase = component.nextBase,\n\t    initialBase = isUpdate || nextBase,\n\t    initialChildComponent = component._component,\n\t    skip = false,\n\t    rendered,\n\t    inst,\n\t    cbase;\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (opts !== 2 && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t} else if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\t// context to pass to the child, can be updated via (grand-)parent component\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tvar childComponent = rendered && rendered.nodeName,\n\t\t    toUnmount,\n\t\t    base;\n\n\t\tif (typeof childComponent === 'function') {\n\t\t\t// set up high order component link\n\n\t\t\tvar childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor === childComponent && childProps.key == inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, 1, context, false);\n\t\t\t} else {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, 0, context, false);\n\t\t\t\trenderComponent(inst, 1, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t} else {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || opts === 1) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base !== initialBase && inst !== initialChildComponent) {\n\t\t\tvar baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base !== baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tvar componentRef = component,\n\t\t\t    t = component;\n\t\t\twhile (t = t._parentComponent) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.unshift(component);\n\t} else if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, previousContext);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\tif (component._renderCallbacks != null) {\n\t\twhile (component._renderCallbacks.length) {\n\t\t\tcomponent._renderCallbacks.pop().call(component);\n\t\t}\n\t}\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n/** Apply the Component referenced by a VNode to the DOM.\n *\t@param {Element} dom\tThe DOM node to mutate\n *\t@param {VNode} vnode\tA Component-referencing VNode\n *\t@returns {Element} dom\tThe created/mutated element\n *\t@private\n */\nfunction buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tvar c = dom && dom._component,\n\t    originalComponent = c,\n\t    oldDom = dom,\n\t    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n\t    isOwner = isDirectOwner,\n\t    props = getNodeProps(vnode);\n\twhile (c && !isOwner && (c = c._parentComponent)) {\n\t\tisOwner = c.constructor === vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, 3, context, mountAll);\n\t\tdom = c.base;\n\t} else {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, 1, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom !== oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/** Remove a component from the DOM and recycle it.\n *\t@param {Component} component\tThe Component instance to unmount\n *\t@private\n */\nfunction unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tvar base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tvar inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t} else if (base) {\n\t\tif (base['__preactattr_'] && base['__preactattr_'].ref) base['__preactattr_'].ref(null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\tcollectComponent(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tif (component.__ref) component.__ref(null);\n}\n\n/** Base Component class.\n *\tProvides `setState()` and `forceUpdate()`, which trigger rendering.\n *\t@public\n *\n *\t@example\n *\tclass MyFoo extends Component {\n *\t\trender(props, state) {\n *\t\t\treturn <div />;\n *\t\t}\n *\t}\n */\nfunction Component(props, context) {\n\tthis._dirty = true;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.context = context;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.props = props;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.state = this.state || {};\n}\n\nextend(Component.prototype, {\n\n\t/** Returns a `boolean` indicating if the component should re-render when receiving the given `props` and `state`.\n  *\t@param {object} nextProps\n  *\t@param {object} nextState\n  *\t@param {object} nextContext\n  *\t@returns {Boolean} should the component re-render\n  *\t@name shouldComponentUpdate\n  *\t@function\n  */\n\n\t/** Update component state by copying properties from `state` to `this.state`.\n  *\t@param {object} state\t\tA hash of state properties to update with new values\n  *\t@param {function} callback\tA function to be called once component state is updated\n  */\n\tsetState: function setState(state, callback) {\n\t\tvar s = this.state;\n\t\tif (!this.prevState) this.prevState = extend({}, s);\n\t\textend(s, typeof state === 'function' ? state(s, this.props) : state);\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\tenqueueRender(this);\n\t},\n\n\n\t/** Immediately perform a synchronous re-render of the component.\n  *\t@param {function} callback\t\tA function to be called after component is re-rendered.\n  *\t@private\n  */\n\tforceUpdate: function forceUpdate(callback) {\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\trenderComponent(this, 2);\n\t},\n\n\n\t/** Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n  *\tVirtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n  *\t@param {object} props\t\tProps (eg: JSX attributes) received from parent element/component\n  *\t@param {object} state\t\tThe component's current state\n  *\t@param {object} context\t\tContext object (if a parent component has provided context)\n  *\t@returns VNode\n  */\n\trender: function render() {}\n});\n\n/** Render JSX into a `parent` Element.\n *\t@param {VNode} vnode\t\tA (JSX) VNode to render\n *\t@param {Element} parent\t\tDOM element to render into\n *\t@param {Element} [merge]\tAttempt to re-use an existing DOM tree rooted at `merge`\n *\t@public\n *\n *\t@example\n *\t// render a div into <body>:\n *\trender(<div id=\"hello\">hello!</div>, document.body);\n *\n *\t@example\n *\t// render a \"Thing\" component into #foo:\n *\tconst Thing = ({ name }) => <span>{ name }</span>;\n *\trender(<Thing name=\"one\" />, document.querySelector('#foo'));\n */\nfunction render(vnode, parent, merge) {\n  return diff(merge, vnode, {}, false, parent, false);\n}\n\nvar preact = {\n\th: h,\n\tcreateElement: h,\n\tcloneElement: cloneElement,\n\tComponent: Component,\n\trender: render,\n\trerender: rerender,\n\toptions: options\n};\n\nexport { h, h as createElement, cloneElement, Component, render, rerender, options };\nexport default preact;\n//# sourceMappingURL=preact.esm.js.map\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = {\n  INIT: '@@redux/INIT' + Math.random().toString(36).substring(7).split('').join('.'),\n  REPLACE: '@@redux/REPLACE' + Math.random().toString(36).substring(7).split('').join('.')\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || obj === null) return false;\n\n  var proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.REPLACE });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if ((typeof observer === 'undefined' ? 'undefined' : _typeof(observer)) !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && 'action \"' + String(actionType) + '\"' || 'an action';\n\n  return 'Given ' + actionDescription + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state. ' + 'If you want this reducer to hold no value, you can return null instead of undefined.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined. If you don\\'t want to set a value for this reducer, ' + 'you can use null instead of undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined, but can be null.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var unexpectedKeyCache = void 0;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError = void 0;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if ((typeof actionCreators === 'undefined' ? 'undefined' : _typeof(actionCreators)) !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators === 'undefined' ? 'undefined' : _typeof(actionCreators)) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var store = createStore.apply(undefined, args);\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(undefined, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning(\"You are currently using minified code outside of NODE_ENV === 'production'. \" + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose, ActionTypes as __DO_NOT_USE__ActionTypes };\n","import { Component, h } from 'preact';\nimport { bindActionCreators } from 'redux';\n\nvar Children = {\n\tonly: function only(children) {\n\t\treturn children && children[0] || null;\n\t}\n};\n\nfunction proptype() {}\nproptype.isRequired = proptype;\n\nvar PropTypes = {\n\telement: proptype,\n\tfunc: proptype,\n\tshape: function shape() {\n\t\treturn proptype;\n\t},\n\tinstanceOf: function instanceOf() {\n\t\treturn proptype;\n\t}\n};\n\nvar subscriptionShape = PropTypes.shape({\n  trySubscribe: PropTypes.func.isRequired,\n  tryUnsubscribe: PropTypes.func.isRequired,\n  notifyNestedSubs: PropTypes.func.isRequired,\n  isSubscribed: PropTypes.func.isRequired\n});\n\nvar storeShape = PropTypes.shape({\n  subscribe: PropTypes.func.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  getState: PropTypes.func.isRequired\n});\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar didWarnAboutReceivingStore = false;\nfunction warnAboutReceivingStore() {\n  if (didWarnAboutReceivingStore) {\n    return;\n  }\n  didWarnAboutReceivingStore = true;\n\n  warning('<Provider> does not support changing `store` on the fly. ' + 'It is most likely that you see this error because you updated to ' + 'Redux 2.x and React Redux 2.x which no longer hot reload reducers ' + 'automatically. See https://github.com/reactjs/react-redux/releases/' + 'tag/v2.0.0 for the migration instructions.');\n}\n\nfunction createProvider() {\n  var _Provider$childContex;\n\n  var storeKey = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'store';\n  var subKey = arguments[1];\n\n  var subscriptionKey = subKey || storeKey + 'Subscription';\n\n  var Provider = function (_Component) {\n    inherits(Provider, _Component);\n\n    Provider.prototype.getChildContext = function getChildContext() {\n      var _ref;\n\n      return _ref = {}, _ref[storeKey] = this[storeKey], _ref[subscriptionKey] = null, _ref;\n    };\n\n    function Provider(props, context) {\n      classCallCheck(this, Provider);\n\n      var _this = possibleConstructorReturn(this, _Component.call(this, props, context));\n\n      _this[storeKey] = props.store;\n      return _this;\n    }\n\n    Provider.prototype.render = function render() {\n      return Children.only(this.props.children);\n    };\n\n    return Provider;\n  }(Component);\n\n  {\n    Provider.prototype.componentWillReceiveProps = function (nextProps) {\n      if (this[storeKey] !== nextProps.store) {\n        warnAboutReceivingStore();\n      }\n    };\n  }\n\n  Provider.childContextTypes = (_Provider$childContex = {}, _Provider$childContex[storeKey] = storeShape.isRequired, _Provider$childContex[subscriptionKey] = subscriptionShape, _Provider$childContex);\n\n  return Provider;\n}\n\nvar Provider = createProvider();\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar defineProperty$1 = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') {\n        // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try {\n                    // Avoid failures from read-only properties\n                    defineProperty$1(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nvar hoistNonReactStatics_cjs = hoistNonReactStatics;\n\nvar invariant = function () {};\n\n// encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nvar CLEARED = null;\nvar nullListeners = {\n  notify: function notify() {}\n};\n\nfunction createListenerCollection() {\n  // the current/next pattern is copied from redux's createStore code.\n  // TODO: refactor+expose that code to be reusable here?\n  var current = [];\n  var next = [];\n\n  return {\n    clear: function clear() {\n      next = CLEARED;\n      current = CLEARED;\n    },\n    notify: function notify() {\n      var listeners = current = next;\n      for (var i = 0; i < listeners.length; i++) {\n        listeners[i]();\n      }\n    },\n    get: function get$$1() {\n      return next;\n    },\n    subscribe: function subscribe(listener) {\n      var isSubscribed = true;\n      if (next === current) next = current.slice();\n      next.push(listener);\n\n      return function unsubscribe() {\n        if (!isSubscribed || current === CLEARED) return;\n        isSubscribed = false;\n\n        if (next === current) next = current.slice();\n        next.splice(next.indexOf(listener), 1);\n      };\n    }\n  };\n}\n\nvar Subscription = function () {\n  function Subscription(store, parentSub, onStateChange) {\n    classCallCheck(this, Subscription);\n\n    this.store = store;\n    this.parentSub = parentSub;\n    this.onStateChange = onStateChange;\n    this.unsubscribe = null;\n    this.listeners = nullListeners;\n  }\n\n  Subscription.prototype.addNestedSub = function addNestedSub(listener) {\n    this.trySubscribe();\n    return this.listeners.subscribe(listener);\n  };\n\n  Subscription.prototype.notifyNestedSubs = function notifyNestedSubs() {\n    this.listeners.notify();\n  };\n\n  Subscription.prototype.isSubscribed = function isSubscribed() {\n    return Boolean(this.unsubscribe);\n  };\n\n  Subscription.prototype.trySubscribe = function trySubscribe() {\n    if (!this.unsubscribe) {\n      this.unsubscribe = this.parentSub ? this.parentSub.addNestedSub(this.onStateChange) : this.store.subscribe(this.onStateChange);\n\n      this.listeners = createListenerCollection();\n    }\n  };\n\n  Subscription.prototype.tryUnsubscribe = function tryUnsubscribe() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n      this.unsubscribe = null;\n      this.listeners.clear();\n      this.listeners = nullListeners;\n    }\n  };\n\n  return Subscription;\n}();\n\nvar hotReloadingVersion = 0;\nvar dummyState = {};\nfunction noop() {}\nfunction makeSelectorStateful(sourceSelector, store) {\n  // wrap the selector in an object that tracks its results between runs.\n  var selector = {\n    run: function runComponentSelector(props) {\n      try {\n        var nextProps = sourceSelector(store.getState(), props);\n        if (nextProps !== selector.props || selector.error) {\n          selector.shouldComponentUpdate = true;\n          selector.props = nextProps;\n          selector.error = null;\n        }\n      } catch (error) {\n        selector.shouldComponentUpdate = true;\n        selector.error = error;\n      }\n    }\n  };\n\n  return selector;\n}\n\nfunction connectAdvanced(\n/*\n  selectorFactory is a func that is responsible for returning the selector function used to\n  compute new props from state, props, and dispatch. For example:\n     export default connectAdvanced((dispatch, options) => (state, props) => ({\n      thing: state.things[props.thingId],\n      saveThing: fields => dispatch(actionCreators.saveThing(props.thingId, fields)),\n    }))(YourComponent)\n   Access to dispatch is provided to the factory so selectorFactories can bind actionCreators\n  outside of their selector as an optimization. Options passed to connectAdvanced are passed to\n  the selectorFactory, along with displayName and WrappedComponent, as the second argument.\n   Note that selectorFactory is responsible for all caching/memoization of inbound and outbound\n  props. Do not use connectAdvanced directly without memoizing results between calls to your\n  selector, otherwise the Connect component will re-render on every state or props change.\n*/\nselectorFactory) {\n  var _contextTypes, _childContextTypes;\n\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref$getDisplayName = _ref.getDisplayName,\n      getDisplayName = _ref$getDisplayName === undefined ? function (name) {\n    return 'ConnectAdvanced(' + name + ')';\n  } : _ref$getDisplayName,\n      _ref$methodName = _ref.methodName,\n      methodName = _ref$methodName === undefined ? 'connectAdvanced' : _ref$methodName,\n      _ref$renderCountProp = _ref.renderCountProp,\n      renderCountProp = _ref$renderCountProp === undefined ? undefined : _ref$renderCountProp,\n      _ref$shouldHandleStat = _ref.shouldHandleStateChanges,\n      shouldHandleStateChanges = _ref$shouldHandleStat === undefined ? true : _ref$shouldHandleStat,\n      _ref$storeKey = _ref.storeKey,\n      storeKey = _ref$storeKey === undefined ? 'store' : _ref$storeKey,\n      _ref$withRef = _ref.withRef,\n      withRef = _ref$withRef === undefined ? false : _ref$withRef,\n      connectOptions = objectWithoutProperties(_ref, ['getDisplayName', 'methodName', 'renderCountProp', 'shouldHandleStateChanges', 'storeKey', 'withRef']);\n\n  var subscriptionKey = storeKey + 'Subscription';\n  var version = hotReloadingVersion++;\n\n  var contextTypes = (_contextTypes = {}, _contextTypes[storeKey] = storeShape, _contextTypes[subscriptionKey] = subscriptionShape, _contextTypes);\n  var childContextTypes = (_childContextTypes = {}, _childContextTypes[subscriptionKey] = subscriptionShape, _childContextTypes);\n\n  return function wrapWithConnect(WrappedComponent) {\n    invariant(typeof WrappedComponent == 'function', 'You must pass a component to the function returned by ' + (methodName + '. Instead received ' + JSON.stringify(WrappedComponent)));\n\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n\n    var displayName = getDisplayName(wrappedComponentName);\n\n    var selectorFactoryOptions = _extends({}, connectOptions, {\n      getDisplayName: getDisplayName,\n      methodName: methodName,\n      renderCountProp: renderCountProp,\n      shouldHandleStateChanges: shouldHandleStateChanges,\n      storeKey: storeKey,\n      withRef: withRef,\n      displayName: displayName,\n      wrappedComponentName: wrappedComponentName,\n      WrappedComponent: WrappedComponent\n    });\n\n    var Connect = function (_Component) {\n      inherits(Connect, _Component);\n\n      function Connect(props, context) {\n        classCallCheck(this, Connect);\n\n        var _this = possibleConstructorReturn(this, _Component.call(this, props, context));\n\n        _this.version = version;\n        _this.state = {};\n        _this.renderCount = 0;\n        _this.store = props[storeKey] || context[storeKey];\n        _this.propsMode = Boolean(props[storeKey]);\n        _this.setWrappedInstance = _this.setWrappedInstance.bind(_this);\n\n        invariant(_this.store, 'Could not find \"' + storeKey + '\" in either the context or props of ' + ('\"' + displayName + '\". Either wrap the root component in a <Provider>, ') + ('or explicitly pass \"' + storeKey + '\" as a prop to \"' + displayName + '\".'));\n\n        _this.initSelector();\n        _this.initSubscription();\n        return _this;\n      }\n\n      Connect.prototype.getChildContext = function getChildContext() {\n        var _ref2;\n\n        // If this component received store from props, its subscription should be transparent\n        // to any descendants receiving store+subscription from context; it passes along\n        // subscription passed to it. Otherwise, it shadows the parent subscription, which allows\n        // Connect to control ordering of notifications to flow top-down.\n        var subscription = this.propsMode ? null : this.subscription;\n        return _ref2 = {}, _ref2[subscriptionKey] = subscription || this.context[subscriptionKey], _ref2;\n      };\n\n      Connect.prototype.componentDidMount = function componentDidMount() {\n        if (!shouldHandleStateChanges) return;\n\n        // componentWillMount fires during server side rendering, but componentDidMount and\n        // componentWillUnmount do not. Because of this, trySubscribe happens during ...didMount.\n        // Otherwise, unsubscription would never take place during SSR, causing a memory leak.\n        // To handle the case where a child component may have triggered a state change by\n        // dispatching an action in its componentWillMount, we have to re-run the select and maybe\n        // re-render.\n        this.subscription.trySubscribe();\n        this.selector.run(this.props);\n        if (this.selector.shouldComponentUpdate) this.forceUpdate();\n      };\n\n      Connect.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n        this.selector.run(nextProps);\n      };\n\n      Connect.prototype.shouldComponentUpdate = function shouldComponentUpdate() {\n        return this.selector.shouldComponentUpdate;\n      };\n\n      Connect.prototype.componentWillUnmount = function componentWillUnmount() {\n        if (this.subscription) this.subscription.tryUnsubscribe();\n        this.subscription = null;\n        this.notifyNestedSubs = noop;\n        this.store = null;\n        this.selector.run = noop;\n        this.selector.shouldComponentUpdate = false;\n      };\n\n      Connect.prototype.getWrappedInstance = function getWrappedInstance() {\n        invariant(withRef, 'To access the wrapped instance, you need to specify ' + ('{ withRef: true } in the options argument of the ' + methodName + '() call.'));\n        return this.wrappedInstance;\n      };\n\n      Connect.prototype.setWrappedInstance = function setWrappedInstance(ref) {\n        this.wrappedInstance = ref;\n      };\n\n      Connect.prototype.initSelector = function initSelector() {\n        var sourceSelector = selectorFactory(this.store.dispatch, selectorFactoryOptions);\n        this.selector = makeSelectorStateful(sourceSelector, this.store);\n        this.selector.run(this.props);\n      };\n\n      Connect.prototype.initSubscription = function initSubscription() {\n        if (!shouldHandleStateChanges) return;\n\n        // parentSub's source should match where store came from: props vs. context. A component\n        // connected to the store via props shouldn't use subscription from context, or vice versa.\n        var parentSub = (this.propsMode ? this.props : this.context)[subscriptionKey];\n        this.subscription = new Subscription(this.store, parentSub, this.onStateChange.bind(this));\n\n        // `notifyNestedSubs` is duplicated to handle the case where the component is  unmounted in\n        // the middle of the notification loop, where `this.subscription` will then be null. An\n        // extra null check every change can be avoided by copying the method onto `this` and then\n        // replacing it with a no-op on unmount. This can probably be avoided if Subscription's\n        // listeners logic is changed to not call listeners that have been unsubscribed in the\n        // middle of the notification loop.\n        this.notifyNestedSubs = this.subscription.notifyNestedSubs.bind(this.subscription);\n      };\n\n      Connect.prototype.onStateChange = function onStateChange() {\n        this.selector.run(this.props);\n\n        if (!this.selector.shouldComponentUpdate) {\n          this.notifyNestedSubs();\n        } else {\n          this.componentDidUpdate = this.notifyNestedSubsOnComponentDidUpdate;\n          this.setState(dummyState);\n        }\n      };\n\n      Connect.prototype.notifyNestedSubsOnComponentDidUpdate = function notifyNestedSubsOnComponentDidUpdate() {\n        // `componentDidUpdate` is conditionally implemented when `onStateChange` determines it\n        // needs to notify nested subs. Once called, it unimplements itself until further state\n        // changes occur. Doing it this way vs having a permanent `componentDidUpdate` that does\n        // a boolean check every time avoids an extra method call most of the time, resulting\n        // in some perf boost.\n        this.componentDidUpdate = undefined;\n        this.notifyNestedSubs();\n      };\n\n      Connect.prototype.isSubscribed = function isSubscribed() {\n        return Boolean(this.subscription) && this.subscription.isSubscribed();\n      };\n\n      Connect.prototype.addExtraProps = function addExtraProps(props) {\n        if (!withRef && !renderCountProp && !(this.propsMode && this.subscription)) return props;\n        // make a shallow copy so that fields added don't leak to the original selector.\n        // this is especially important for 'ref' since that's a reference back to the component\n        // instance. a singleton memoized selector would then be holding a reference to the\n        // instance, preventing the instance from being garbage collected, and that would be bad\n        var withExtras = _extends({}, props);\n        if (withRef) withExtras.ref = this.setWrappedInstance;\n        if (renderCountProp) withExtras[renderCountProp] = this.renderCount++;\n        if (this.propsMode && this.subscription) withExtras[subscriptionKey] = this.subscription;\n        return withExtras;\n      };\n\n      Connect.prototype.render = function render() {\n        var selector = this.selector;\n        selector.shouldComponentUpdate = false;\n\n        if (selector.error) {\n          throw selector.error;\n        } else {\n          return h(WrappedComponent, this.addExtraProps(selector.props));\n        }\n      };\n\n      return Connect;\n    }(Component);\n\n    Connect.WrappedComponent = WrappedComponent;\n    Connect.displayName = displayName;\n    Connect.childContextTypes = childContextTypes;\n    Connect.contextTypes = contextTypes;\n\n\n    {\n      Connect.prototype.componentWillUpdate = function componentWillUpdate() {\n        var _this2 = this;\n\n        // We are hot reloading!\n        if (this.version !== version) {\n          this.version = version;\n          this.initSelector();\n\n          // If any connected descendants don't hot reload (and resubscribe in the process), their\n          // listeners will be lost when we unsubscribe. Unfortunately, by copying over all\n          // listeners, this does mean that the old versions of connected descendants will still be\n          // notified of state changes; however, their onStateChange function is a no-op so this\n          // isn't a huge deal.\n          var oldListeners = [];\n\n          if (this.subscription) {\n            oldListeners = this.subscription.listeners.get();\n            this.subscription.tryUnsubscribe();\n          }\n          this.initSubscription();\n          if (shouldHandleStateChanges) {\n            this.subscription.trySubscribe();\n            oldListeners.forEach(function (listener) {\n              return _this2.subscription.listeners.subscribe(listener);\n            });\n          }\n        }\n      };\n    }\n\n    return hoistNonReactStatics_cjs(Connect, WrappedComponent);\n  };\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\n\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) return true;\n\n  if ((typeof objA === 'undefined' ? 'undefined' : _typeof(objA)) !== 'object' || objA === null || (typeof objB === 'undefined' ? 'undefined' : _typeof(objB)) !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) return false;\n\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = (typeof global === 'undefined' ? 'undefined' : _typeof(global)) == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = (typeof self === 'undefined' ? 'undefined' : _typeof(self)) == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Built-in value references. */\nvar _Symbol = root.Symbol;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$1.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto$1.toString;\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty$1.call(value, symToStringTag$1),\n      tag = value[symToStringTag$1];\n\n  try {\n    value[symToStringTag$1] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag$1] = tag;\n    } else {\n      delete value[symToStringTag$1];\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$2 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$2.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]';\nvar undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n    if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n    }\n    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function (arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) == 'object';\n}\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype;\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;\n}\n\nfunction verifyPlainObject(value, displayName, methodName) {\n  if (!isPlainObject(value)) {\n    warning(methodName + '() in ' + displayName + ' must return a plain object. Instead received ' + value + '.');\n  }\n}\n\nfunction wrapMapToPropsConstant(getConstant) {\n  return function initConstantSelector(dispatch, options) {\n    var constant = getConstant(dispatch, options);\n\n    function constantSelector() {\n      return constant;\n    }\n    constantSelector.dependsOnOwnProps = false;\n    return constantSelector;\n  };\n}\n\n// dependsOnOwnProps is used by createMapToPropsProxy to determine whether to pass props as args\n// to the mapToProps function being wrapped. It is also used by makePurePropsSelector to determine\n// whether mapToProps needs to be invoked when props have changed.\n// \n// A length of one signals that mapToProps does not depend on props from the parent component.\n// A length of zero is assumed to mean mapToProps is getting args via arguments or ...args and\n// therefore not reporting its length accurately..\nfunction getDependsOnOwnProps(mapToProps) {\n  return mapToProps.dependsOnOwnProps !== null && mapToProps.dependsOnOwnProps !== undefined ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;\n}\n\n// Used by whenMapStateToPropsIsFunction and whenMapDispatchToPropsIsFunction,\n// this function wraps mapToProps in a proxy function which does several things:\n// \n//  * Detects whether the mapToProps function being called depends on props, which\n//    is used by selectorFactory to decide if it should reinvoke on props changes.\n//    \n//  * On first call, handles mapToProps if returns another function, and treats that\n//    new function as the true mapToProps for subsequent calls.\n//    \n//  * On first call, verifies the first result is a plain object, in order to warn\n//    the developer that their mapToProps function is not returning a valid result.\n//    \nfunction wrapMapToPropsFunc(mapToProps, methodName) {\n  return function initProxySelector(dispatch, _ref) {\n    var displayName = _ref.displayName;\n\n    var proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {\n      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch);\n    };\n\n    // allow detectFactoryAndVerify to get ownProps\n    proxy.dependsOnOwnProps = true;\n\n    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {\n      proxy.mapToProps = mapToProps;\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);\n      var props = proxy(stateOrDispatch, ownProps);\n\n      if (typeof props === 'function') {\n        proxy.mapToProps = props;\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);\n        props = proxy(stateOrDispatch, ownProps);\n      }\n\n      verifyPlainObject(props, displayName, methodName);\n\n      return props;\n    };\n\n    return proxy;\n  };\n}\n\nfunction whenMapDispatchToPropsIsFunction(mapDispatchToProps) {\n  return typeof mapDispatchToProps === 'function' ? wrapMapToPropsFunc(mapDispatchToProps, 'mapDispatchToProps') : undefined;\n}\n\nfunction whenMapDispatchToPropsIsMissing(mapDispatchToProps) {\n  return !mapDispatchToProps ? wrapMapToPropsConstant(function (dispatch) {\n    return { dispatch: dispatch };\n  }) : undefined;\n}\n\nfunction whenMapDispatchToPropsIsObject(mapDispatchToProps) {\n  return mapDispatchToProps && (typeof mapDispatchToProps === 'undefined' ? 'undefined' : _typeof(mapDispatchToProps)) === 'object' ? wrapMapToPropsConstant(function (dispatch) {\n    return bindActionCreators(mapDispatchToProps, dispatch);\n  }) : undefined;\n}\n\nvar defaultMapDispatchToPropsFactories = [whenMapDispatchToPropsIsFunction, whenMapDispatchToPropsIsMissing, whenMapDispatchToPropsIsObject];\n\nfunction whenMapStateToPropsIsFunction(mapStateToProps) {\n  return typeof mapStateToProps === 'function' ? wrapMapToPropsFunc(mapStateToProps, 'mapStateToProps') : undefined;\n}\n\nfunction whenMapStateToPropsIsMissing(mapStateToProps) {\n  return !mapStateToProps ? wrapMapToPropsConstant(function () {\n    return {};\n  }) : undefined;\n}\n\nvar defaultMapStateToPropsFactories = [whenMapStateToPropsIsFunction, whenMapStateToPropsIsMissing];\n\nfunction defaultMergeProps(stateProps, dispatchProps, ownProps) {\n  return _extends({}, ownProps, stateProps, dispatchProps);\n}\n\nfunction wrapMergePropsFunc(mergeProps) {\n  return function initMergePropsProxy(dispatch, _ref) {\n    var displayName = _ref.displayName,\n        pure = _ref.pure,\n        areMergedPropsEqual = _ref.areMergedPropsEqual;\n\n    var hasRunOnce = false;\n    var mergedProps = void 0;\n\n    return function mergePropsProxy(stateProps, dispatchProps, ownProps) {\n      var nextMergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n\n      if (hasRunOnce) {\n        if (!pure || !areMergedPropsEqual(nextMergedProps, mergedProps)) mergedProps = nextMergedProps;\n      } else {\n        hasRunOnce = true;\n        mergedProps = nextMergedProps;\n\n        verifyPlainObject(mergedProps, displayName, 'mergeProps');\n      }\n\n      return mergedProps;\n    };\n  };\n}\n\nfunction whenMergePropsIsFunction(mergeProps) {\n  return typeof mergeProps === 'function' ? wrapMergePropsFunc(mergeProps) : undefined;\n}\n\nfunction whenMergePropsIsOmitted(mergeProps) {\n  return !mergeProps ? function () {\n    return defaultMergeProps;\n  } : undefined;\n}\n\nvar defaultMergePropsFactories = [whenMergePropsIsFunction, whenMergePropsIsOmitted];\n\nfunction verify(selector, methodName, displayName) {\n  if (!selector) {\n    throw new Error('Unexpected value for ' + methodName + ' in ' + displayName + '.');\n  } else if (methodName === 'mapStateToProps' || methodName === 'mapDispatchToProps') {\n    if (!selector.hasOwnProperty('dependsOnOwnProps')) {\n      warning('The selector for ' + methodName + ' of ' + displayName + ' did not specify a value for dependsOnOwnProps.');\n    }\n  }\n}\n\nfunction verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps, displayName) {\n  verify(mapStateToProps, 'mapStateToProps', displayName);\n  verify(mapDispatchToProps, 'mapDispatchToProps', displayName);\n  verify(mergeProps, 'mergeProps', displayName);\n}\n\nfunction impureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch) {\n  return function impureFinalPropsSelector(state, ownProps) {\n    return mergeProps(mapStateToProps(state, ownProps), mapDispatchToProps(dispatch, ownProps), ownProps);\n  };\n}\n\nfunction pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, _ref) {\n  var areStatesEqual = _ref.areStatesEqual,\n      areOwnPropsEqual = _ref.areOwnPropsEqual,\n      areStatePropsEqual = _ref.areStatePropsEqual;\n\n  var hasRunAtLeastOnce = false;\n  var state = void 0;\n  var ownProps = void 0;\n  var stateProps = void 0;\n  var dispatchProps = void 0;\n  var mergedProps = void 0;\n\n  function handleFirstCall(firstState, firstOwnProps) {\n    state = firstState;\n    ownProps = firstOwnProps;\n    stateProps = mapStateToProps(state, ownProps);\n    dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    hasRunAtLeastOnce = true;\n    return mergedProps;\n  }\n\n  function handleNewPropsAndNewState() {\n    stateProps = mapStateToProps(state, ownProps);\n\n    if (mapDispatchToProps.dependsOnOwnProps) dispatchProps = mapDispatchToProps(dispatch, ownProps);\n\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n\n  function handleNewProps() {\n    if (mapStateToProps.dependsOnOwnProps) stateProps = mapStateToProps(state, ownProps);\n\n    if (mapDispatchToProps.dependsOnOwnProps) dispatchProps = mapDispatchToProps(dispatch, ownProps);\n\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n\n  function handleNewState() {\n    var nextStateProps = mapStateToProps(state, ownProps);\n    var statePropsChanged = !areStatePropsEqual(nextStateProps, stateProps);\n    stateProps = nextStateProps;\n\n    if (statePropsChanged) mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n\n    return mergedProps;\n  }\n\n  function handleSubsequentCalls(nextState, nextOwnProps) {\n    var propsChanged = !areOwnPropsEqual(nextOwnProps, ownProps);\n    var stateChanged = !areStatesEqual(nextState, state);\n    state = nextState;\n    ownProps = nextOwnProps;\n\n    if (propsChanged && stateChanged) return handleNewPropsAndNewState();\n    if (propsChanged) return handleNewProps();\n    if (stateChanged) return handleNewState();\n    return mergedProps;\n  }\n\n  return function pureFinalPropsSelector(nextState, nextOwnProps) {\n    return hasRunAtLeastOnce ? handleSubsequentCalls(nextState, nextOwnProps) : handleFirstCall(nextState, nextOwnProps);\n  };\n}\n\n// TODO: Add more comments\n\n// If pure is true, the selector returned by selectorFactory will memoize its results,\n// allowing connectAdvanced's shouldComponentUpdate to return false if final\n// props have not changed. If false, the selector will always return a new\n// object and shouldComponentUpdate will always return true.\n\nfunction finalPropsSelectorFactory(dispatch, _ref2) {\n  var initMapStateToProps = _ref2.initMapStateToProps,\n      initMapDispatchToProps = _ref2.initMapDispatchToProps,\n      initMergeProps = _ref2.initMergeProps,\n      options = objectWithoutProperties(_ref2, ['initMapStateToProps', 'initMapDispatchToProps', 'initMergeProps']);\n\n  var mapStateToProps = initMapStateToProps(dispatch, options);\n  var mapDispatchToProps = initMapDispatchToProps(dispatch, options);\n  var mergeProps = initMergeProps(dispatch, options);\n\n  {\n    verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps, options.displayName);\n  }\n\n  var selectorFactory = options.pure ? pureFinalPropsSelectorFactory : impureFinalPropsSelectorFactory;\n\n  return selectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, options);\n}\n\n/*\n  connect is a facade over connectAdvanced. It turns its args into a compatible\n  selectorFactory, which has the signature:\n\n    (dispatch, options) => (nextState, nextOwnProps) => nextFinalProps\n  \n  connect passes its args to connectAdvanced as options, which will in turn pass them to\n  selectorFactory each time a Connect component instance is instantiated or hot reloaded.\n\n  selectorFactory returns a final props selector from its mapStateToProps,\n  mapStateToPropsFactories, mapDispatchToProps, mapDispatchToPropsFactories, mergeProps,\n  mergePropsFactories, and pure args.\n\n  The resulting final props selector is called by the Connect component instance whenever\n  it receives new props or store state.\n */\n\nfunction match(arg, factories, name) {\n  for (var i = factories.length - 1; i >= 0; i--) {\n    var result = factories[i](arg);\n    if (result) return result;\n  }\n\n  return function (dispatch, options) {\n    throw new Error('Invalid value of type ' + (typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) + ' for ' + name + ' argument when connecting component ' + options.wrappedComponentName + '.');\n  };\n}\n\nfunction strictEqual(a, b) {\n  return a === b;\n}\n\n// createConnect with default args builds the 'official' connect behavior. Calling it with\n// different options opens up some testing and extensibility scenarios\nfunction createConnect() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$connectHOC = _ref.connectHOC,\n      connectHOC = _ref$connectHOC === undefined ? connectAdvanced : _ref$connectHOC,\n      _ref$mapStateToPropsF = _ref.mapStateToPropsFactories,\n      mapStateToPropsFactories = _ref$mapStateToPropsF === undefined ? defaultMapStateToPropsFactories : _ref$mapStateToPropsF,\n      _ref$mapDispatchToPro = _ref.mapDispatchToPropsFactories,\n      mapDispatchToPropsFactories = _ref$mapDispatchToPro === undefined ? defaultMapDispatchToPropsFactories : _ref$mapDispatchToPro,\n      _ref$mergePropsFactor = _ref.mergePropsFactories,\n      mergePropsFactories = _ref$mergePropsFactor === undefined ? defaultMergePropsFactories : _ref$mergePropsFactor,\n      _ref$selectorFactory = _ref.selectorFactory,\n      selectorFactory = _ref$selectorFactory === undefined ? finalPropsSelectorFactory : _ref$selectorFactory;\n\n  return function connect(mapStateToProps, mapDispatchToProps, mergeProps) {\n    var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    var _ref2$pure = _ref2.pure,\n        pure = _ref2$pure === undefined ? true : _ref2$pure,\n        _ref2$areStatesEqual = _ref2.areStatesEqual,\n        areStatesEqual = _ref2$areStatesEqual === undefined ? strictEqual : _ref2$areStatesEqual,\n        _ref2$areOwnPropsEqua = _ref2.areOwnPropsEqual,\n        areOwnPropsEqual = _ref2$areOwnPropsEqua === undefined ? shallowEqual : _ref2$areOwnPropsEqua,\n        _ref2$areStatePropsEq = _ref2.areStatePropsEqual,\n        areStatePropsEqual = _ref2$areStatePropsEq === undefined ? shallowEqual : _ref2$areStatePropsEq,\n        _ref2$areMergedPropsE = _ref2.areMergedPropsEqual,\n        areMergedPropsEqual = _ref2$areMergedPropsE === undefined ? shallowEqual : _ref2$areMergedPropsE,\n        extraOptions = objectWithoutProperties(_ref2, ['pure', 'areStatesEqual', 'areOwnPropsEqual', 'areStatePropsEqual', 'areMergedPropsEqual']);\n\n    var initMapStateToProps = match(mapStateToProps, mapStateToPropsFactories, 'mapStateToProps');\n    var initMapDispatchToProps = match(mapDispatchToProps, mapDispatchToPropsFactories, 'mapDispatchToProps');\n    var initMergeProps = match(mergeProps, mergePropsFactories, 'mergeProps');\n\n    return connectHOC(selectorFactory, _extends({\n      // used in error messages\n      methodName: 'connect',\n\n      // used to compute Connect's displayName from the wrapped component's displayName.\n      getDisplayName: function getDisplayName(name) {\n        return 'Connect(' + name + ')';\n      },\n\n      // if mapStateToProps is falsy, the Connect component doesn't subscribe to store state changes\n      shouldHandleStateChanges: Boolean(mapStateToProps),\n\n      // passed through to selectorFactory\n      initMapStateToProps: initMapStateToProps,\n      initMapDispatchToProps: initMapDispatchToProps,\n      initMergeProps: initMergeProps,\n      pure: pure,\n      areStatesEqual: areStatesEqual,\n      areOwnPropsEqual: areOwnPropsEqual,\n      areStatePropsEqual: areStatePropsEqual,\n      areMergedPropsEqual: areMergedPropsEqual\n\n    }, extraOptions));\n  };\n}\n\nvar connect = createConnect();\n\nvar index = { Provider: Provider, connect: connect, connectAdvanced: connectAdvanced };\n\nexport { Provider, connect, connectAdvanced };export default index;\n//# sourceMappingURL=preact-redux.esm.js.map\n","import {connect} from 'preact-redux'\nimport * as redux from 'redux'\nimport {ComponentConstructor, Component} from 'preact'\n\nexport interface Action<TPayload> extends redux.Action<string> {\n  payload: TPayload\n}\n\nexport interface ActionCreator<TPayload> {\n  // Returns an action with a non-empty payload\n  (payload: TPayload): Action<TPayload>\n\n  // Returns an action with an empty payload ({})\n  (): Action<TPayload>\n\n  matches(action: Action<any>): action is Action<TPayload>\n}\n\nconst usedActionTypes = new Set<string>()\n\nexport function actionCreator(type: string): ActionCreator<void>\nexport function actionCreator<TPayload>(type: string): ActionCreator<TPayload>\nexport function actionCreator(type: string) {\n  if (usedActionTypes.has(type)) {\n    throw new Error(`Cannot re-use action type name: ${type}`)\n  }\n\n  const creator: any = (payload = {}) => {\n    return {type, payload}\n  }\n\n  creator.matches = (action: Action<any>) => {\n    return action.type === type\n  }\n\n  return creator\n}\n\nexport type Reducer<T> = (state: T | undefined, action: Action<any>) => T\nexport type ReducerWithActionType<T, A> = (state: T | undefined, action: Action<A>) => T\n\nexport function setter<T>(\n  setterAction: ActionCreator<T>,\n  defaultVal: T,\n): (state: T | undefined, action: Action<any>) => T {\n  return (state = defaultVal, action) => {\n    if (setterAction.matches(action)) {\n      return action.payload\n    }\n    return state\n  }\n}\n\nexport type Dispatch = redux.Dispatch<Action<any>>\n\n// We make this into a single function invocation instead of the connect(map, map)(Component)\n// syntax to make better use of type inference.\n//\n// NOTE: To avoid this returning objects which do not compare shallow equal, it's the\n// responsibility of the caller to ensure that the props returned by map compare shallow\n// equal. This most importantly mean memoizing functions which wrap dispatch to avoid\n// all callback props from being regenerated on every call.\nexport function createContainer<OwnProps, State, ComponentProps, ComponentType>(\n  component: {\n    new (props: ComponentProps): ComponentType\n  },\n  map: (state: State, dispatch: Dispatch, ownProps: OwnProps) => ComponentProps,\n): ComponentConstructor<OwnProps, {}> {\n  const mapStateToProps = (state: State) => state\n  const mapDispatchToProps = (dispatch: Dispatch) => ({dispatch})\n  const mergeProps = (\n    stateProps: State,\n    dispatchProps: {dispatch: Dispatch},\n    ownProps: OwnProps,\n  ) => {\n    return map(stateProps, dispatchProps.dispatch, ownProps)\n  }\n  return connect(mapStateToProps, mapDispatchToProps, mergeProps)(component)\n}\n\nexport type VoidState = {\n  __dummyField: void\n}\n\nexport abstract class StatelessComponent<P> extends Component<P, VoidState> {}\n\nexport function bindActionCreator<T>(\n  dispatch: Dispatch,\n  actionCreator: (payload: T) => Action<T>,\n): (t: T) => void {\n  return (t: T) => {\n    dispatch(actionCreator(t))\n  }\n}\n","export function clamp(x: number, minVal: number, maxVal: number) {\n  if (x < minVal) return minVal\n  if (x > maxVal) return maxVal\n  return x\n}\n\nexport class Vec2 {\n  constructor(readonly x: number, readonly y: number) {}\n  withX(x: number) {\n    return new Vec2(x, this.y)\n  }\n  withY(y: number) {\n    return new Vec2(this.x, y)\n  }\n\n  plus(other: Vec2) {\n    return new Vec2(this.x + other.x, this.y + other.y)\n  }\n  minus(other: Vec2) {\n    return new Vec2(this.x - other.x, this.y - other.y)\n  }\n  times(scalar: number) {\n    return new Vec2(this.x * scalar, this.y * scalar)\n  }\n  timesPointwise(other: Vec2) {\n    return new Vec2(this.x * other.x, this.y * other.y)\n  }\n  dividedByPointwise(other: Vec2) {\n    return new Vec2(this.x / other.x, this.y / other.y)\n  }\n  dot(other: Vec2) {\n    return this.x * other.x + this.y * other.y\n  }\n  equals(other: Vec2) {\n    return this.x === other.x && this.y === other.y\n  }\n  approxEquals(other: Vec2, epsilon = 1e-9) {\n    return Math.abs(this.x - other.x) < epsilon && Math.abs(this.y - other.y) < epsilon\n  }\n\n  length2() {\n    return this.dot(this)\n  }\n  length() {\n    return Math.sqrt(this.length2())\n  }\n  abs() {\n    return new Vec2(Math.abs(this.x), Math.abs(this.y))\n  }\n\n  static min(a: Vec2, b: Vec2) {\n    return new Vec2(Math.min(a.x, b.x), Math.min(a.y, b.y))\n  }\n\n  static max(a: Vec2, b: Vec2) {\n    return new Vec2(Math.max(a.x, b.x), Math.max(a.y, b.y))\n  }\n\n  static clamp(v: Vec2, min: Vec2, max: Vec2) {\n    return new Vec2(clamp(v.x, min.x, max.x), clamp(v.y, min.y, max.y))\n  }\n\n  static zero = new Vec2(0, 0)\n  static unit = new Vec2(1, 1)\n\n  flatten(): [number, number] {\n    return [this.x, this.y]\n  }\n}\n\nexport class AffineTransform {\n  constructor(\n    readonly m00 = 1,\n    readonly m01 = 0,\n    readonly m02 = 0,\n    readonly m10 = 0,\n    readonly m11 = 1,\n    readonly m12 = 0,\n  ) {}\n\n  withScale(s: Vec2) {\n    let {m00, m01, m02, m10, m11, m12} = this\n    m00 = s.x\n    m11 = s.y\n    return new AffineTransform(m00, m01, m02, m10, m11, m12)\n  }\n  static withScale(s: Vec2) {\n    return new AffineTransform().withScale(s)\n  }\n  scaledBy(s: Vec2) {\n    return AffineTransform.withScale(s).times(this)\n  }\n  getScale() {\n    return new Vec2(this.m00, this.m11)\n  }\n\n  withTranslation(t: Vec2) {\n    let {m00, m01, m02, m10, m11, m12} = this\n    m02 = t.x\n    m12 = t.y\n    return new AffineTransform(m00, m01, m02, m10, m11, m12)\n  }\n  static withTranslation(t: Vec2) {\n    return new AffineTransform().withTranslation(t)\n  }\n  getTranslation() {\n    return new Vec2(this.m02, this.m12)\n  }\n  translatedBy(t: Vec2) {\n    return AffineTransform.withTranslation(t).times(this)\n  }\n\n  static betweenRects(from: Rect, to: Rect) {\n    return AffineTransform.withTranslation(from.origin.times(-1))\n      .scaledBy(new Vec2(to.size.x / from.size.x, to.size.y / from.size.y))\n      .translatedBy(to.origin)\n  }\n\n  times(other: AffineTransform) {\n    const m00 = this.m00 * other.m00 + this.m01 * other.m10\n    const m01 = this.m00 * other.m01 + this.m01 * other.m11\n    const m02 = this.m00 * other.m02 + this.m01 * other.m12 + this.m02\n\n    const m10 = this.m10 * other.m00 + this.m11 * other.m10\n    const m11 = this.m10 * other.m01 + this.m11 * other.m11\n    const m12 = this.m10 * other.m02 + this.m11 * other.m12 + this.m12\n    return new AffineTransform(m00, m01, m02, m10, m11, m12)\n  }\n\n  equals(other: AffineTransform) {\n    return (\n      this.m00 == other.m00 &&\n      this.m01 == other.m01 &&\n      this.m02 == other.m02 &&\n      this.m10 == other.m10 &&\n      this.m11 == other.m11 &&\n      this.m12 == other.m12\n    )\n  }\n\n  approxEquals(other: AffineTransform, epsilon = 1e-9) {\n    return (\n      Math.abs(this.m00 - other.m00) < epsilon &&\n      Math.abs(this.m01 - other.m01) < epsilon &&\n      Math.abs(this.m02 - other.m02) < epsilon &&\n      Math.abs(this.m10 - other.m10) < epsilon &&\n      Math.abs(this.m11 - other.m11) < epsilon &&\n      Math.abs(this.m12 - other.m12) < epsilon\n    )\n  }\n\n  timesScalar(s: number) {\n    const {m00, m01, m02, m10, m11, m12} = this\n    return new AffineTransform(s * m00, s * m01, s * m02, s * m10, s * m11, s * m12)\n  }\n\n  det() {\n    const {m00, m01, m02, m10, m11, m12} = this\n    const m20 = 0\n    const m21 = 0\n    const m22 = 1\n\n    return (\n      m00 * (m11 * m22 - m12 * m21) - m01 * (m10 * m22 - m12 * m20) + m02 * (m10 * m21 - m11 * m20)\n    )\n  }\n\n  adj() {\n    const {m00, m01, m02, m10, m11, m12} = this\n    const m20 = 0\n    const m21 = 0\n    const m22 = 1\n\n    // Adjugate matrix (a) is the transpose of the\n    // cofactor matrix (c).\n    //\n    // 00 01 02\n    // 10 11 12\n    // 20 21 22\n\n    const a00 = /* c00 = */ +(m11 * m22 - m12 * m21)\n    const a01 = /* c10 = */ -(m01 * m22 - m02 * m21)\n    const a02 = /* c20 = */ +(m01 * m12 - m02 * m11)\n    const a10 = /* c01 = */ -(m10 * m22 - m12 * m20)\n    const a11 = /* c11 = */ +(m00 * m22 - m02 * m20)\n    const a12 = /* c21 = */ -(m00 * m12 - m02 * m10)\n\n    return new AffineTransform(a00, a01, a02, a10, a11, a12)\n  }\n\n  inverted(): AffineTransform | null {\n    const det = this.det()\n    if (det === 0) return null\n    const adj = this.adj()\n    return adj.timesScalar(1 / det)\n  }\n\n  transformVector(v: Vec2) {\n    return new Vec2(v.x * this.m00 + v.y * this.m01, v.x * this.m10 + v.y * this.m11)\n  }\n\n  inverseTransformVector(v: Vec2): Vec2 | null {\n    const inv = this.inverted()\n    if (!inv) return null\n    return inv.transformVector(v)\n  }\n\n  transformPosition(v: Vec2) {\n    return new Vec2(\n      v.x * this.m00 + v.y * this.m01 + this.m02,\n      v.x * this.m10 + v.y * this.m11 + this.m12,\n    )\n  }\n\n  inverseTransformPosition(v: Vec2): Vec2 | null {\n    const inv = this.inverted()\n    if (!inv) return null\n    return inv.transformPosition(v)\n  }\n\n  transformRect(r: Rect) {\n    const size = this.transformVector(r.size)\n    const origin = this.transformPosition(r.origin)\n\n    if (size.x < 0 && size.y < 0) {\n      return new Rect(origin.plus(size), size.abs())\n    } else if (size.x < 0) {\n      return new Rect(origin.withX(origin.x + size.x), size.abs())\n    } else if (size.y < 0) {\n      return new Rect(origin.withY(origin.y + size.y), size.abs())\n    }\n\n    return new Rect(origin, size)\n  }\n\n  inverseTransformRect(r: Rect): Rect | null {\n    const inv = this.inverted()\n    if (!inv) return null\n    return inv.transformRect(r)\n  }\n\n  flatten(): [number, number, number, number, number, number, number, number, number] {\n    // Flatten into GLSL format\n    // prettier-ignore\n    return [\n      this.m00, this.m10, 0,\n      this.m01, this.m11, 0,\n      this.m02, this.m12, 1,\n    ]\n  }\n}\n\nexport class Rect {\n  constructor(readonly origin: Vec2, readonly size: Vec2) {}\n\n  isEmpty() {\n    return this.width() == 0 || this.height() == 0\n  }\n\n  width() {\n    return this.size.x\n  }\n  height() {\n    return this.size.y\n  }\n\n  left() {\n    return this.origin.x\n  }\n  right() {\n    return this.left() + this.width()\n  }\n  top() {\n    return this.origin.y\n  }\n  bottom() {\n    return this.top() + this.height()\n  }\n\n  topLeft() {\n    return this.origin\n  }\n  topRight() {\n    return this.origin.plus(new Vec2(this.width(), 0))\n  }\n\n  bottomRight() {\n    return this.origin.plus(this.size)\n  }\n  bottomLeft() {\n    return this.origin.plus(new Vec2(0, this.height()))\n  }\n\n  withOrigin(origin: Vec2) {\n    return new Rect(origin, this.size)\n  }\n  withSize(size: Vec2) {\n    return new Rect(this.origin, size)\n  }\n\n  closestPointTo(p: Vec2) {\n    return new Vec2(clamp(p.x, this.left(), this.right()), clamp(p.y, this.top(), this.bottom()))\n  }\n\n  distanceFrom(p: Vec2) {\n    return p.minus(this.closestPointTo(p)).length()\n  }\n\n  contains(p: Vec2) {\n    return this.distanceFrom(p) === 0\n  }\n\n  hasIntersectionWith(other: Rect) {\n    const top = Math.max(this.top(), other.top())\n    const bottom = Math.max(top, Math.min(this.bottom(), other.bottom()))\n    if (bottom - top === 0) return false\n\n    const left = Math.max(this.left(), other.left())\n    const right = Math.max(left, Math.min(this.right(), other.right()))\n    if (right - left === 0) return false\n    return true\n  }\n\n  intersectWith(other: Rect): Rect {\n    const topLeft = Vec2.max(this.topLeft(), other.topLeft())\n    const bottomRight = Vec2.max(topLeft, Vec2.min(this.bottomRight(), other.bottomRight()))\n\n    return new Rect(topLeft, bottomRight.minus(topLeft))\n  }\n\n  equals(other: Rect) {\n    return this.origin.equals(other.origin) && this.size.equals(other.size)\n  }\n\n  approxEquals(other: Rect) {\n    return this.origin.approxEquals(other.origin) && this.size.approxEquals(other.size)\n  }\n\n  area() {\n    return this.size.x * this.size.y\n  }\n\n  static empty = new Rect(Vec2.zero, Vec2.zero)\n  static unit = new Rect(Vec2.zero, Vec2.unit)\n  static NDC = new Rect(new Vec2(-1, -1), new Vec2(2, 2))\n}\n","import {CallTreeNode} from '../lib/profile'\nimport {Rect, Vec2} from '../lib/math'\nimport {Reducer} from '../lib/typed-redux'\nimport {actions} from './actions'\n\nexport enum FlamechartID {\n  LEFT_HEAVY = 'LEFT_HEAVY',\n  CHRONO = 'CHRONO',\n  SANDWICH_INVERTED_CALLERS = 'SANDWICH_INVERTED_CALLERS',\n  SANDWICH_CALLEES = 'SANDWICH_CALLEES',\n}\n\nexport interface FlamechartViewState {\n  hover: {\n    node: CallTreeNode\n    event: MouseEvent\n  } | null\n  selectedNode: CallTreeNode | null\n  logicalSpaceViewportSize: Vec2\n  configSpaceViewportRect: Rect\n}\n\nexport function createFlamechartViewStateReducer(\n  id: FlamechartID,\n  profileIndex: number,\n): Reducer<FlamechartViewState> {\n  let initialState: FlamechartViewState = {\n    hover: null,\n    selectedNode: null,\n    configSpaceViewportRect: Rect.empty,\n    logicalSpaceViewportSize: Vec2.zero,\n  }\n  function applies(action: {payload: {profileIndex: number; args: {id: FlamechartID}}}) {\n    const {payload} = action\n    return payload.args.id === id && payload.profileIndex === profileIndex\n  }\n\n  return (state = initialState, action) => {\n    if (actions.flamechart.setHoveredNode.matches(action) && applies(action)) {\n      const {hover} = action.payload.args\n      return {...state, hover}\n    }\n    if (actions.flamechart.setSelectedNode.matches(action) && applies(action)) {\n      const {selectedNode} = action.payload.args\n      return {...state, selectedNode}\n    }\n    if (actions.flamechart.setConfigSpaceViewportRect.matches(action) && applies(action)) {\n      const {configSpaceViewportRect} = action.payload.args\n      return {...state, configSpaceViewportRect}\n    }\n    if (actions.flamechart.setLogicalSpaceViewportSize.matches(action) && applies(action)) {\n      const {logicalSpaceViewportSize} = action.payload.args\n      return {...state, logicalSpaceViewportSize}\n    }\n    if (actions.setViewMode.matches(action)) {\n      // If we switch views, the hover information is no longer relevant\n      return {...state, hover: null}\n    }\n\n    return state\n  }\n}\n","import {Frame} from '../lib/profile'\nimport {\n  FlamechartViewState,\n  FlamechartID,\n  createFlamechartViewStateReducer,\n} from './flamechart-view-state'\nimport {Reducer} from '../lib/typed-redux'\nimport {actions} from './actions'\n\nexport interface SandwichViewState {\n  callerCallee: CallerCalleeState | null\n}\n\nexport interface CallerCalleeState {\n  selectedFrame: Frame\n  invertedCallerFlamegraph: FlamechartViewState\n  calleeFlamegraph: FlamechartViewState\n}\n\nexport function createSandwichView(profileIndex: number): Reducer<SandwichViewState> {\n  const calleesReducer = createFlamechartViewStateReducer(\n    FlamechartID.SANDWICH_CALLEES,\n    profileIndex,\n  )\n  const invertedCallersReducer = createFlamechartViewStateReducer(\n    FlamechartID.SANDWICH_INVERTED_CALLERS,\n    profileIndex,\n  )\n  function applies(action: {payload: {profileIndex: number}}) {\n    const {payload} = action\n    return payload.profileIndex === profileIndex\n  }\n\n  return (state = {callerCallee: null}, action) => {\n    if (actions.sandwichView.setSelectedFrame.matches(action) && applies(action)) {\n      if (action.payload.args == null) {\n        return {\n          ...state,\n          callerCallee: null,\n        }\n      } else {\n        return {\n          ...state,\n          callerCallee: {\n            selectedFrame: action.payload.args,\n            calleeFlamegraph: calleesReducer(undefined, action),\n            invertedCallerFlamegraph: invertedCallersReducer(undefined, action),\n          },\n        }\n      }\n    }\n\n    const {callerCallee} = state\n    if (callerCallee) {\n      const {calleeFlamegraph, invertedCallerFlamegraph} = callerCallee\n      const nextCalleeFlamegraph = calleesReducer(calleeFlamegraph, action)\n      const nextInvertedCallerFlamegraph = invertedCallersReducer(invertedCallerFlamegraph, action)\n\n      if (\n        nextCalleeFlamegraph === calleeFlamegraph &&\n        nextInvertedCallerFlamegraph === invertedCallerFlamegraph\n      ) {\n        return state\n      }\n\n      return {\n        ...state,\n        callerCallee: {\n          ...callerCallee,\n          calleeFlamegraph: nextCalleeFlamegraph,\n          invertedCallerFlamegraph: nextInvertedCallerFlamegraph,\n        },\n      }\n    }\n\n    return state\n  }\n}\n","export function lastOf<T>(ts: T[]): T | null {\n  return ts[ts.length - 1] || null\n}\n\nexport function sortBy<T>(ts: T[], key: (t: T) => number | string): void {\n  function comparator(a: T, b: T) {\n    return key(a) < key(b) ? -1 : 1\n  }\n  ts.sort(comparator)\n}\n\nexport function getOrInsert<K, V>(map: Map<K, V>, k: K, fallback: (k: K) => V): V {\n  if (!map.has(k)) map.set(k, fallback(k))\n  return map.get(k)!\n}\n\nexport function getOrElse<K, V>(map: Map<K, V>, k: K, fallback: (k: K) => V): V {\n  if (!map.has(k)) return fallback(k)\n  return map.get(k)!\n}\n\nexport function getOrThrow<K, V>(map: Map<K, V>, k: K): V {\n  if (!map.has(k)) {\n    throw new Error(`Expected key ${k}`)\n  }\n  return map.get(k)!\n}\n\n// Intended to be used to de-duplicate objects based on a key property. This\n// allows value comparisons to be done efficiently and for the returned objects\n// to be used intuitively in Map objects.\n//\n// Example usage:\n//\n// export class Frame {\n//   private constructor(readonly file: string, readonly name: string) {}\n//   get key() { return `${this.file}:${this.name}` }\n//   static getOrInsert(set: KeyedSet<Frame>, file: string, name: string) {\n//     return set.getOrInsert(set, new Frame(file, name))\n//   }\n// }\n//\nexport interface HasKey {\n  readonly key: string | number\n}\nexport class KeyedSet<T extends HasKey> implements Iterable<T> {\n  private map = new Map<string | number, T>()\n\n  getOrInsert(t: T): T {\n    const key = t.key\n    const existing = this.map.get(key)\n    if (existing) return existing\n    this.map.set(key, t)\n    return t\n  }\n  forEach(fn: (t: T) => void) {\n    this.map.forEach(fn)\n  }\n  [Symbol.iterator]() {\n    return this.map.values()\n  }\n}\n\nexport function* itMap<T, U>(it: Iterable<T>, f: (t: T) => U): Iterable<U> {\n  for (let t of it) {\n    yield f(t)\n  }\n}\n\nexport function itForEach<T>(it: Iterable<T>, f: (t: T) => void): void {\n  for (let t of it) {\n    f(t)\n  }\n}\n\nexport function itReduce<T, U>(it: Iterable<T>, f: (a: U, b: T) => U, init: U): U {\n  let accum: U = init\n  for (let t of it) {\n    accum = f(accum, t)\n  }\n  return accum\n}\n\nexport function zeroPad(s: string, width: number) {\n  return new Array(Math.max(width - s.length, 0) + 1).join('0') + s\n}\n\nexport function formatPercent(percent: number) {\n  let formattedPercent = `${percent.toFixed(0)}%`\n  if (percent === 100) formattedPercent = '100%'\n  else if (percent > 99) formattedPercent = '>99%'\n  else if (percent < 0.01) formattedPercent = '<0.01%'\n  else if (percent < 1) formattedPercent = `${percent.toFixed(2)}%`\n  else if (percent < 10) formattedPercent = `${percent.toFixed(1)}%`\n  return formattedPercent\n}\n\nexport function fract(x: number) {\n  return x - Math.floor(x)\n}\n\nexport function triangle(x: number) {\n  return 2.0 * Math.abs(fract(x) - 0.5) - 1.0\n}\n\nexport function binarySearch(\n  lo: number,\n  hi: number,\n  f: (val: number) => number,\n  target: number,\n  targetRangeSize = 1,\n): [number, number] {\n  console.assert(!isNaN(targetRangeSize) && !isNaN(target))\n  while (true) {\n    if (hi - lo <= targetRangeSize) return [lo, hi]\n    const mid = (hi + lo) / 2\n    const val = f(mid)\n    if (val < target) lo = mid\n    else hi = mid\n  }\n}\n\nexport function noop(...args: any[]) {}\n\nexport function objectsHaveShallowEquality<T extends object>(a: T, b: T): boolean {\n  for (let key in a) {\n    if (a[key] !== b[key]) return false\n  }\n  for (let key in b) {\n    if (a[key] !== b[key]) return false\n  }\n  return true\n}\n\nexport function memoizeByShallowEquality<T extends object, U>(cb: (t: T) => U): (t: T) => U {\n  let last: {args: T; result: U} | null = null\n  return (args: T) => {\n    let result: U\n    if (last == null) {\n      result = cb(args)\n      last = {args, result}\n      return result\n    } else if (objectsHaveShallowEquality(last.args, args)) {\n      return last.result\n    } else {\n      last.args = args\n      last.result = cb(args)\n      return last.result\n    }\n  }\n}\n\nexport function memoizeByReference<T, U>(cb: (t: T) => U): (t: T) => U {\n  let last: {args: T; result: U} | null = null\n  return (args: T) => {\n    let result: U\n    if (last == null) {\n      result = cb(args)\n      last = {args, result}\n      return result\n    } else if (last.args === args) {\n      return last.result\n    } else {\n      last.args = args\n      last.result = cb(args)\n      return last.result\n    }\n  }\n}\n","import {Profile} from '../lib/profile'\nimport {\n  FlamechartViewState,\n  createFlamechartViewStateReducer,\n  FlamechartID,\n} from './flamechart-view-state'\nimport {SandwichViewState, createSandwichView} from './sandwich-view-state'\nimport {Reducer, actionCreator, setter} from '../lib/typed-redux'\nimport {actions} from './actions'\nimport {clamp} from '../lib/math'\nimport {objectsHaveShallowEquality} from '../lib/utils'\n\nexport type ProfileGroupState = {\n  name: string\n  indexToView: number\n  profiles: ProfileState[]\n} | null\n\nexport interface ProfileWithIndex {\n  profile: Profile\n  index: number\n}\n\nexport interface ProfileState {\n  profile: Profile\n  chronoViewState: FlamechartViewState\n  leftHeavyViewState: FlamechartViewState\n  sandwichViewState: SandwichViewState\n}\n\nexport function actionCreatorWithIndex<T>(name: string) {\n  return actionCreator<{profileIndex: number; args: T}>(name)\n}\n\nfunction createProfileReducer(profile: Profile, index: number): Reducer<ProfileState> {\n  const chronoViewStateReducer = createFlamechartViewStateReducer(FlamechartID.CHRONO, index)\n  const leftHeavyViewStateReducer = createFlamechartViewStateReducer(FlamechartID.LEFT_HEAVY, index)\n  const sandwichViewStateReducer = createSandwichView(index)\n\n  return (state = undefined, action) => {\n    if (state === undefined) {\n      return {\n        profile,\n        chronoViewState: chronoViewStateReducer(undefined, action),\n        leftHeavyViewState: leftHeavyViewStateReducer(undefined, action),\n        sandwichViewState: sandwichViewStateReducer(undefined, action),\n      }\n    }\n\n    const nextState = {\n      profile,\n      chronoViewState: chronoViewStateReducer(state.chronoViewState, action),\n      leftHeavyViewState: leftHeavyViewStateReducer(state.leftHeavyViewState, action),\n      sandwichViewState: sandwichViewStateReducer(state.sandwichViewState, action),\n    }\n\n    if (objectsHaveShallowEquality(state, nextState)) {\n      return state\n    }\n\n    return nextState\n  }\n}\n\nexport const profileGroup: Reducer<ProfileGroupState> = (state = null, action) => {\n  if (actions.setProfileGroup.matches(action)) {\n    const {indexToView, profiles, name} = action.payload\n    return {\n      indexToView,\n      name,\n      profiles: profiles.map((p, i) => {\n        return createProfileReducer(p, i)(undefined, action)\n      }),\n    }\n  }\n\n  if (state != null) {\n    const {indexToView, profiles} = state\n\n    const nextIndexToView = clamp(\n      setter(actions.setProfileIndexToView, 0)(indexToView, action),\n      0,\n      profiles.length - 1,\n    )\n    const nextProfiles = profiles.map((profileState, profileIndex) => {\n      return createProfileReducer(profileState.profile, profileIndex)(profileState, action)\n    })\n\n    if (indexToView === nextIndexToView && objectsHaveShallowEquality(profiles, nextProfiles)) {\n      return state\n    }\n\n    return {\n      ...state,\n      indexToView: nextIndexToView,\n      profiles: nextProfiles,\n    }\n  }\n  return state\n}\n","import {actionCreator} from '../lib/typed-redux'\nimport {CallTreeNode, Frame, ProfileGroup} from '../lib/profile'\nimport {SortMethod} from '../views/profile-table-view'\nimport {ViewMode} from '.'\nimport {FlamechartID} from './flamechart-view-state'\nimport {Rect, Vec2} from '../lib/math'\nimport {HashParams} from '../lib/hash-params'\nimport {actionCreatorWithIndex} from './profiles-state'\n\nexport namespace actions {\n  // Set the top-level profile group from which other data will be derived\n  export const setProfileGroup = actionCreator<ProfileGroup>('setProfileGroup')\n\n  // Set the index into the profile group to view\n  export const setProfileIndexToView = actionCreator<number>('setProfileIndexToView')\n\n  export const setGLCanvas = actionCreator<HTMLCanvasElement | null>('setGLCanvas')\n\n  // Set which top-level view should be displayed\n  export const setViewMode = actionCreator<ViewMode>('setViewMode')\n\n  // Set whether or not recursion should be flattened when viewing flamegraphs\n  export const setFlattenRecursion = actionCreator<boolean>('setFlattenRecursion')\n\n  // Set whether a file drag is currently active. Used to indicate that the\n  // application is a valid drop target.\n  export const setDragActive = actionCreator<boolean>('setDragActive')\n\n  // Set whether the application is currently in a loading state. Used to\n  // display a loading progress bar.\n  export const setLoading = actionCreator<boolean>('setLoading')\n\n  // Set whether the application is in an errored state.\n  export const setError = actionCreator<boolean>('setError')\n\n  // Set whether parameters defined by the URL encoded k=v pairs after the # in the URL\n  export const setHashParams = actionCreator<HashParams>('setHashParams')\n\n  export namespace sandwichView {\n    // Set the table sorting method used for the sandwich view.\n    export const setTableSortMethod = actionCreator<SortMethod>('sandwichView.setTableSortMethod')\n\n    export const setSelectedFrame = actionCreatorWithIndex<Frame | null>(\n      'sandwichView.setSelectedFarmr',\n    )\n  }\n\n  export namespace flamechart {\n    export const setHoveredNode = actionCreatorWithIndex<{\n      id: FlamechartID\n      hover: {node: CallTreeNode; event: MouseEvent} | null\n    }>('flamechart.setHoveredNode')\n\n    export const setSelectedNode = actionCreatorWithIndex<{\n      id: FlamechartID\n      selectedNode: CallTreeNode | null\n    }>('flamechart.setSelectedNode')\n\n    export const setConfigSpaceViewportRect = actionCreatorWithIndex<{\n      id: FlamechartID\n      configSpaceViewportRect: Rect\n    }>('flamechart.setConfigSpaceViewportRect')\n\n    export const setLogicalSpaceViewportSize = actionCreatorWithIndex<{\n      id: FlamechartID\n      logicalSpaceViewportSize: Vec2\n    }>('flamechart.setLogicalSpaceViewportSpace')\n  }\n}\n","export interface HashParams {\n  profileURL?: string\n  title?: string\n  localProfilePath?: string\n}\n\nexport function getHashParams(hashContents = window.location.hash): HashParams {\n  try {\n    if (!hashContents.startsWith('#')) {\n      return {}\n    }\n    const components = hashContents.substr(1).split('&')\n    const result: HashParams = {}\n    for (const component of components) {\n      let [key, value] = component.split('=')\n      value = decodeURIComponent(value)\n      if (key === 'profileURL') {\n        result.profileURL = value\n      } else if (key === 'title') {\n        result.title = value\n      } else if (key === 'localProfilePath') {\n        result.localProfilePath = value\n      }\n    }\n    return result\n  } catch (e) {\n    console.error(`Error when loading hash fragment.`)\n    console.error(e)\n    return {}\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isPrefixedValue;\nvar regex = /-webkit-|-moz-|-ms-/;\n\nfunction isPrefixedValue(value) {\n  return typeof value === 'string' && regex.test(value);\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = calc;\n\nvar _isPrefixedValue = require(\"css-in-js-utils/lib/isPrefixedValue\");\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar prefixes = [\"-webkit-\", \"-moz-\", \"\"];\nfunction calc(property, value) {\n  if (typeof value === \"string\" && !(0, _isPrefixedValue2.default)(value) && value.indexOf(\"calc(\") > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/calc\\(/g, prefix + \"calc(\");\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossFade;\n\nvar _isPrefixedValue = require(\"css-in-js-utils/lib/isPrefixedValue\");\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// http://caniuse.com/#search=cross-fade\nvar prefixes = [\"-webkit-\", \"\"];\nfunction crossFade(property, value) {\n  if (typeof value === \"string\" && !(0, _isPrefixedValue2.default)(value) && value.indexOf(\"cross-fade(\") > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/cross-fade\\(/g, prefix + \"cross-fade(\");\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = cursor;\nvar prefixes = [\"-webkit-\", \"-moz-\", \"\"];\n\nvar values = {\n  \"zoom-in\": true,\n  \"zoom-out\": true,\n  grab: true,\n  grabbing: true\n};\n\nfunction cursor(property, value) {\n  if (property === \"cursor\" && values.hasOwnProperty(value)) {\n    return prefixes.map(function (prefix) {\n      return prefix + value;\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = filter;\n\nvar _isPrefixedValue = require(\"css-in-js-utils/lib/isPrefixedValue\");\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// http://caniuse.com/#feat=css-filter-function\nvar prefixes = [\"-webkit-\", \"\"];\nfunction filter(property, value) {\n  if (typeof value === \"string\" && !(0, _isPrefixedValue2.default)(value) && value.indexOf(\"filter(\") > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/filter\\(/g, prefix + \"filter(\");\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flex;\nvar values = {\n  flex: [\"-webkit-box\", \"-moz-box\", \"-ms-flexbox\", \"-webkit-flex\", \"flex\"],\n  \"inline-flex\": [\"-webkit-inline-box\", \"-moz-inline-box\", \"-ms-inline-flexbox\", \"-webkit-inline-flex\", \"inline-flex\"]\n};\n\nfunction flex(property, value) {\n  if (property === \"display\" && values.hasOwnProperty(value)) {\n    return values[value];\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flexboxIE;\nvar alternativeValues = {\n  \"space-around\": \"distribute\",\n  \"space-between\": \"justify\",\n  \"flex-start\": \"start\",\n  \"flex-end\": \"end\"\n};\nvar alternativeProps = {\n  alignContent: \"msFlexLinePack\",\n  alignSelf: \"msFlexItemAlign\",\n  alignItems: \"msFlexAlign\",\n  justifyContent: \"msFlexPack\",\n  order: \"msFlexOrder\",\n  flexGrow: \"msFlexPositive\",\n  flexShrink: \"msFlexNegative\",\n  flexBasis: \"msFlexPreferredSize\"\n};\n\nfunction flexboxIE(property, value, style) {\n  if (alternativeProps.hasOwnProperty(property)) {\n    style[alternativeProps[property]] = alternativeValues[value] || value;\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = flexboxOld;\nvar alternativeValues = {\n  \"space-around\": \"justify\",\n  \"space-between\": \"justify\",\n  \"flex-start\": \"start\",\n  \"flex-end\": \"end\",\n  \"wrap-reverse\": \"multiple\",\n  wrap: \"multiple\"\n};\n\nvar alternativeProps = {\n  alignItems: \"WebkitBoxAlign\",\n  justifyContent: \"WebkitBoxPack\",\n  flexWrap: \"WebkitBoxLines\"\n};\n\nfunction flexboxOld(property, value, style) {\n  if (property === \"flexDirection\" && typeof value === \"string\") {\n    if (value.indexOf(\"column\") > -1) {\n      style.WebkitBoxOrient = \"vertical\";\n    } else {\n      style.WebkitBoxOrient = \"horizontal\";\n    }\n    if (value.indexOf(\"reverse\") > -1) {\n      style.WebkitBoxDirection = \"reverse\";\n    } else {\n      style.WebkitBoxDirection = \"normal\";\n    }\n  }\n  if (alternativeProps.hasOwnProperty(property)) {\n    style[alternativeProps[property]] = alternativeValues[value] || value;\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = gradient;\n\nvar _isPrefixedValue = require(\"css-in-js-utils/lib/isPrefixedValue\");\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar prefixes = [\"-webkit-\", \"-moz-\", \"\"];\n\nvar values = /linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;\n\nfunction gradient(property, value) {\n  if (typeof value === \"string\" && !(0, _isPrefixedValue2.default)(value) && values.test(value)) {\n    return prefixes.map(function (prefix) {\n      return prefix + value;\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = imageSet;\n\nvar _isPrefixedValue = require(\"css-in-js-utils/lib/isPrefixedValue\");\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// http://caniuse.com/#feat=css-image-set\nvar prefixes = [\"-webkit-\", \"\"];\nfunction imageSet(property, value) {\n  if (typeof value === \"string\" && !(0, _isPrefixedValue2.default)(value) && value.indexOf(\"image-set(\") > -1) {\n    return prefixes.map(function (prefix) {\n      return value.replace(/image-set\\(/g, prefix + \"image-set(\");\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = position;\nfunction position(property, value) {\n  if (property === \"position\" && value === \"sticky\") {\n    return [\"-webkit-sticky\", \"sticky\"];\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sizing;\nvar prefixes = [\"-webkit-\", \"-moz-\", \"\"];\n\nvar properties = {\n  maxHeight: true,\n  maxWidth: true,\n  width: true,\n  height: true,\n  columnWidth: true,\n  minWidth: true,\n  minHeight: true\n};\nvar values = {\n  \"min-content\": true,\n  \"max-content\": true,\n  \"fill-available\": true,\n  \"fit-content\": true,\n  \"contain-floats\": true\n};\n\nfunction sizing(property, value) {\n  if (properties.hasOwnProperty(property) && values.hasOwnProperty(value)) {\n    return prefixes.map(function (prefix) {\n      return prefix + value;\n    });\n  }\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nvar uppercasePattern = /[A-Z]/g;\nvar msPattern = /^ms-/;\nvar cache = {};\n\nfunction hyphenateStyleName(string) {\n    return string in cache\n    ? cache[string]\n    : cache[string] = string\n      .replace(uppercasePattern, '-$&')\n      .toLowerCase()\n      .replace(msPattern, '-ms-');\n}\n\nmodule.exports = hyphenateStyleName;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = hyphenateProperty;\n\nvar _hyphenateStyleName = require('hyphenate-style-name');\n\nvar _hyphenateStyleName2 = _interopRequireDefault(_hyphenateStyleName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction hyphenateProperty(property) {\n  return (0, _hyphenateStyleName2.default)(property);\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = capitalizeString;\nfunction capitalizeString(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transition;\n\nvar _hyphenateProperty = require(\"css-in-js-utils/lib/hyphenateProperty\");\n\nvar _hyphenateProperty2 = _interopRequireDefault(_hyphenateProperty);\n\nvar _isPrefixedValue = require(\"css-in-js-utils/lib/isPrefixedValue\");\n\nvar _isPrefixedValue2 = _interopRequireDefault(_isPrefixedValue);\n\nvar _capitalizeString = require(\"../../utils/capitalizeString\");\n\nvar _capitalizeString2 = _interopRequireDefault(_capitalizeString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar properties = {\n  transition: true,\n  transitionProperty: true,\n  WebkitTransition: true,\n  WebkitTransitionProperty: true,\n  MozTransition: true,\n  MozTransitionProperty: true\n};\n\n\nvar prefixMapping = {\n  Webkit: \"-webkit-\",\n  Moz: \"-moz-\",\n  ms: \"-ms-\"\n};\n\nfunction prefixValue(value, propertyPrefixMap) {\n  if ((0, _isPrefixedValue2.default)(value)) {\n    return value;\n  }\n\n  // only split multi values, not cubic beziers\n  var multipleValues = value.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g);\n\n  for (var i = 0, len = multipleValues.length; i < len; ++i) {\n    var singleValue = multipleValues[i];\n    var values = [singleValue];\n    for (var property in propertyPrefixMap) {\n      var dashCaseProperty = (0, _hyphenateProperty2.default)(property);\n\n      if (singleValue.indexOf(dashCaseProperty) > -1 && dashCaseProperty !== \"order\") {\n        var prefixes = propertyPrefixMap[property];\n        for (var j = 0, pLen = prefixes.length; j < pLen; ++j) {\n          // join all prefixes and create a new value\n          values.unshift(singleValue.replace(dashCaseProperty, prefixMapping[prefixes[j]] + dashCaseProperty));\n        }\n      }\n    }\n\n    multipleValues[i] = values.join(\",\");\n  }\n\n  return multipleValues.join(\",\");\n}\n\nfunction transition(property, value, style, propertyPrefixMap) {\n  // also check for already prefixed transitions\n  if (typeof value === \"string\" && properties.hasOwnProperty(property)) {\n    var outputValue = prefixValue(value, propertyPrefixMap);\n    // if the property is already prefixed\n    var webkitOutput = outputValue.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g).filter(function (val) {\n      return !/-moz-|-ms-/.test(val);\n    }).join(\",\");\n\n    if (property.indexOf(\"Webkit\") > -1) {\n      return webkitOutput;\n    }\n\n    var mozOutput = outputValue.split(/,(?![^()]*(?:\\([^()]*\\))?\\))/g).filter(function (val) {\n      return !/-webkit-|-ms-/.test(val);\n    }).join(\",\");\n\n    if (property.indexOf(\"Moz\") > -1) {\n      return mozOutput;\n    }\n\n    style[\"Webkit\" + (0, _capitalizeString2.default)(property)] = webkitOutput;\n    style[\"Moz\" + (0, _capitalizeString2.default)(property)] = mozOutput;\n    return outputValue;\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nmodule.exports = hash;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = prefixProperty;\n\nvar _capitalizeString = require(\"./capitalizeString\");\n\nvar _capitalizeString2 = _interopRequireDefault(_capitalizeString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction prefixProperty(prefixProperties, property, style) {\n  if (prefixProperties.hasOwnProperty(property)) {\n    var newStyle = {};\n    var requiredPrefixes = prefixProperties[property];\n    var capitalizedProperty = (0, _capitalizeString2.default)(property);\n    var keys = Object.keys(style);\n    for (var i = 0; i < keys.length; i++) {\n      var styleProperty = keys[i];\n      if (styleProperty === property) {\n        for (var j = 0; j < requiredPrefixes.length; j++) {\n          newStyle[requiredPrefixes[j] + capitalizedProperty] = style[property];\n        }\n      }\n      newStyle[styleProperty] = style[styleProperty];\n    }\n    return newStyle;\n  }\n  return style;\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = prefixValue;\nfunction prefixValue(plugins, property, value, style, metaData) {\n  for (var i = 0, len = plugins.length; i < len; ++i) {\n    var processedValue = plugins[i](property, value, style, metaData);\n\n    // we can stop processing if a value is returned\n    // as all plugin criteria are unique\n    if (processedValue) {\n      return processedValue;\n    }\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = addNewValuesOnly;\nfunction addIfNew(list, value) {\n  if (list.indexOf(value) === -1) {\n    list.push(value);\n  }\n}\n\nfunction addNewValuesOnly(list, values) {\n  if (Array.isArray(values)) {\n    for (var i = 0, len = values.length; i < len; ++i) {\n      addIfNew(list, values[i]);\n    }\n  } else {\n    addIfNew(list, values);\n  }\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isObject;\nfunction isObject(value) {\n  return value instanceof Object && !Array.isArray(value);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createPrefixer;\n\nvar _prefixProperty = require(\"../utils/prefixProperty\");\n\nvar _prefixProperty2 = _interopRequireDefault(_prefixProperty);\n\nvar _prefixValue = require(\"../utils/prefixValue\");\n\nvar _prefixValue2 = _interopRequireDefault(_prefixValue);\n\nvar _addNewValuesOnly = require(\"../utils/addNewValuesOnly\");\n\nvar _addNewValuesOnly2 = _interopRequireDefault(_addNewValuesOnly);\n\nvar _isObject = require(\"../utils/isObject\");\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createPrefixer(_ref) {\n  var prefixMap = _ref.prefixMap,\n      plugins = _ref.plugins;\n\n  function prefixAll(style) {\n    for (var property in style) {\n      var value = style[property];\n\n      // handle nested objects\n      if ((0, _isObject2.default)(value)) {\n        style[property] = prefixAll(value);\n        // handle array values\n      } else if (Array.isArray(value)) {\n        var combinedValue = [];\n\n        for (var i = 0, len = value.length; i < len; ++i) {\n          var processedValue = (0, _prefixValue2.default)(plugins, property, value[i], style, prefixMap);\n          (0, _addNewValuesOnly2.default)(combinedValue, processedValue || value[i]);\n        }\n\n        // only modify the value if it was touched\n        // by any plugin to prevent unnecessary mutations\n        if (combinedValue.length > 0) {\n          style[property] = combinedValue;\n        }\n      } else {\n        var _processedValue = (0, _prefixValue2.default)(plugins, property, value, style, prefixMap);\n\n        // only modify the value if it was touched\n        // by any plugin to prevent unnecessary mutations\n        if (_processedValue) {\n          style[property] = _processedValue;\n        }\n\n        style = (0, _prefixProperty2.default)(prefixMap, property, style);\n      }\n    }\n\n    return style;\n  }\n\n  return prefixAll;\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n","import calc from 'inline-style-prefixer/static/plugins/calc';\nimport crossFade from 'inline-style-prefixer/static/plugins/crossFade';\nimport cursor from 'inline-style-prefixer/static/plugins/cursor';\nimport filter from 'inline-style-prefixer/static/plugins/filter';\nimport flex from 'inline-style-prefixer/static/plugins/flex';\nimport flexboxIE from 'inline-style-prefixer/static/plugins/flexboxIE';\nimport flexboxOld from 'inline-style-prefixer/static/plugins/flexboxOld';\nimport gradient from 'inline-style-prefixer/static/plugins/gradient';\nimport imageSet from 'inline-style-prefixer/static/plugins/imageSet';\nimport position from 'inline-style-prefixer/static/plugins/position';\nimport sizing from 'inline-style-prefixer/static/plugins/sizing';\nimport transition from 'inline-style-prefixer/static/plugins/transition';\nimport stringHash from 'string-hash';\nimport createPrefixer from 'inline-style-prefixer/static/createPrefixer';\nimport asap from 'asap';\n\nvar w = [\"Webkit\"];\nvar m = [\"Moz\"];\nvar ms = [\"ms\"];\nvar wm = [\"Webkit\", \"Moz\"];\nvar wms = [\"Webkit\", \"ms\"];\nvar wmms = [\"Webkit\", \"Moz\", \"ms\"];\n\nvar staticPrefixData = {\n  plugins: [calc, crossFade, cursor, filter, flex, flexboxIE, flexboxOld, gradient, imageSet, position, sizing, transition],\n  prefixMap: { \"transform\": wms, \"transformOrigin\": wms, \"transformOriginX\": wms, \"transformOriginY\": wms, \"backfaceVisibility\": w, \"perspective\": w, \"perspectiveOrigin\": w, \"transformStyle\": w, \"transformOriginZ\": w, \"animation\": w, \"animationDelay\": w, \"animationDirection\": w, \"animationFillMode\": w, \"animationDuration\": w, \"animationIterationCount\": w, \"animationName\": w, \"animationPlayState\": w, \"animationTimingFunction\": w, \"appearance\": wm, \"userSelect\": wmms, \"fontKerning\": w, \"textEmphasisPosition\": w, \"textEmphasis\": w, \"textEmphasisStyle\": w, \"textEmphasisColor\": w, \"boxDecorationBreak\": w, \"clipPath\": w, \"maskImage\": w, \"maskMode\": w, \"maskRepeat\": w, \"maskPosition\": w, \"maskClip\": w, \"maskOrigin\": w, \"maskSize\": w, \"maskComposite\": w, \"mask\": w, \"maskBorderSource\": w, \"maskBorderMode\": w, \"maskBorderSlice\": w, \"maskBorderWidth\": w, \"maskBorderOutset\": w, \"maskBorderRepeat\": w, \"maskBorder\": w, \"maskType\": w, \"textDecorationStyle\": wm, \"textDecorationSkip\": wm, \"textDecorationLine\": wm, \"textDecorationColor\": wm, \"filter\": w, \"fontFeatureSettings\": wm, \"breakAfter\": wmms, \"breakBefore\": wmms, \"breakInside\": wmms, \"columnCount\": wm, \"columnFill\": wm, \"columnGap\": wm, \"columnRule\": wm, \"columnRuleColor\": wm, \"columnRuleStyle\": wm, \"columnRuleWidth\": wm, \"columns\": wm, \"columnSpan\": wm, \"columnWidth\": wm, \"writingMode\": wms, \"flex\": wms, \"flexBasis\": w, \"flexDirection\": wms, \"flexGrow\": w, \"flexFlow\": wms, \"flexShrink\": w, \"flexWrap\": wms, \"alignContent\": w, \"alignItems\": w, \"alignSelf\": w, \"justifyContent\": w, \"order\": w, \"transitionDelay\": w, \"transitionDuration\": w, \"transitionProperty\": w, \"transitionTimingFunction\": w, \"backdropFilter\": w, \"scrollSnapType\": wms, \"scrollSnapPointsX\": wms, \"scrollSnapPointsY\": wms, \"scrollSnapDestination\": wms, \"scrollSnapCoordinate\": wms, \"shapeImageThreshold\": w, \"shapeImageMargin\": w, \"shapeImageOutside\": w, \"hyphens\": wmms, \"flowInto\": wms, \"flowFrom\": wms, \"regionFragment\": wms, \"boxSizing\": m, \"textAlignLast\": m, \"tabSize\": m, \"wrapFlow\": ms, \"wrapThrough\": ms, \"wrapMargin\": ms, \"touchAction\": ms, \"gridTemplateColumns\": ms, \"gridTemplateRows\": ms, \"gridTemplateAreas\": ms, \"gridTemplate\": ms, \"gridAutoColumns\": ms, \"gridAutoRows\": ms, \"gridAutoFlow\": ms, \"grid\": ms, \"gridRowStart\": ms, \"gridColumnStart\": ms, \"gridRowEnd\": ms, \"gridRow\": ms, \"gridColumn\": ms, \"gridColumnEnd\": ms, \"gridColumnGap\": ms, \"gridRowGap\": ms, \"gridArea\": ms, \"gridGap\": ms, \"textSizeAdjust\": wms, \"borderImage\": w, \"borderImageOutset\": w, \"borderImageRepeat\": w, \"borderImageSlice\": w, \"borderImageSource\": w, \"borderImageWidth\": w }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MAP_EXISTS = typeof Map !== 'undefined';\n\nvar OrderedElements = function () {\n    /* ::\n    elements: {[string]: any};\n    keyOrder: string[];\n    */\n\n    function OrderedElements() {\n        _classCallCheck(this, OrderedElements);\n\n        this.elements = {};\n        this.keyOrder = [];\n    }\n\n    _createClass(OrderedElements, [{\n        key: 'forEach',\n        value: function () {\n            function forEach(callback /* : (string, any) => void */) {\n                for (var i = 0; i < this.keyOrder.length; i++) {\n                    // (value, key) to match Map's API\n                    callback(this.elements[this.keyOrder[i]], this.keyOrder[i]);\n                }\n            }\n\n            return forEach;\n        }()\n    }, {\n        key: 'set',\n        value: function () {\n            function set(key /* : string */, value /* : any */, shouldReorder /* : ?boolean */) {\n                if (!this.elements.hasOwnProperty(key)) {\n                    this.keyOrder.push(key);\n                } else if (shouldReorder) {\n                    var index = this.keyOrder.indexOf(key);\n                    this.keyOrder.splice(index, 1);\n                    this.keyOrder.push(key);\n                }\n\n                if (value == null) {\n                    this.elements[key] = value;\n                    return;\n                }\n\n                if (MAP_EXISTS && value instanceof Map || value instanceof OrderedElements) {\n                    // We have found a nested Map, so we need to recurse so that all\n                    // of the nested objects and Maps are merged properly.\n                    var nested = this.elements.hasOwnProperty(key) ? this.elements[key] : new OrderedElements();\n                    value.forEach(function (value, key) {\n                        nested.set(key, value, shouldReorder);\n                    });\n                    this.elements[key] = nested;\n                    return;\n                }\n\n                if (!Array.isArray(value) && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n                    // We have found a nested object, so we need to recurse so that all\n                    // of the nested objects and Maps are merged properly.\n                    var _nested = this.elements.hasOwnProperty(key) ? this.elements[key] : new OrderedElements();\n                    var keys = Object.keys(value);\n                    for (var i = 0; i < keys.length; i += 1) {\n                        _nested.set(keys[i], value[keys[i]], shouldReorder);\n                    }\n                    this.elements[key] = _nested;\n                    return;\n                }\n\n                this.elements[key] = value;\n            }\n\n            return set;\n        }()\n    }, {\n        key: 'get',\n        value: function () {\n            function get(key /* : string */) /* : any */{\n                return this.elements[key];\n            }\n\n            return get;\n        }()\n    }, {\n        key: 'has',\n        value: function () {\n            function has(key /* : string */) /* : boolean */{\n                return this.elements.hasOwnProperty(key);\n            }\n\n            return has;\n        }()\n    }, {\n        key: 'addStyleType',\n        value: function () {\n            function addStyleType(styleType /* : any */) /* : void */{\n                var _this = this;\n\n                if (MAP_EXISTS && styleType instanceof Map || styleType instanceof OrderedElements) {\n                    styleType.forEach(function (value, key) {\n                        _this.set(key, value, true);\n                    });\n                } else {\n                    var keys = Object.keys(styleType);\n                    for (var i = 0; i < keys.length; i++) {\n                        this.set(keys[i], styleType[keys[i]], true);\n                    }\n                }\n            }\n\n            return addStyleType;\n        }()\n    }]);\n\n    return OrderedElements;\n}();\n\n/* ::\ntype ObjectMap = { [id:string]: any };\n*/\n\nvar UPPERCASE_RE = /([A-Z])/g;\nvar UPPERCASE_RE_TO_KEBAB = function UPPERCASE_RE_TO_KEBAB(match /* : string */) {\n    return (/* : string */'-' + String(match.toLowerCase())\n    );\n};\n\nvar kebabifyStyleName = function kebabifyStyleName(string /* : string */) /* : string */{\n    var result = string.replace(UPPERCASE_RE, UPPERCASE_RE_TO_KEBAB);\n    if (result[0] === 'm' && result[1] === 's' && result[2] === '-') {\n        return '-' + String(result);\n    }\n    return result;\n};\n\n/**\n * CSS properties which accept numbers but are not in units of \"px\".\n * Taken from React's CSSProperty.js\n */\nvar isUnitlessNumber = {\n    animationIterationCount: true,\n    borderImageOutset: true,\n    borderImageSlice: true,\n    borderImageWidth: true,\n    boxFlex: true,\n    boxFlexGroup: true,\n    boxOrdinalGroup: true,\n    columnCount: true,\n    flex: true,\n    flexGrow: true,\n    flexPositive: true,\n    flexShrink: true,\n    flexNegative: true,\n    flexOrder: true,\n    gridRow: true,\n    gridColumn: true,\n    fontWeight: true,\n    lineClamp: true,\n    lineHeight: true,\n    opacity: true,\n    order: true,\n    orphans: true,\n    tabSize: true,\n    widows: true,\n    zIndex: true,\n    zoom: true,\n\n    // SVG-related properties\n    fillOpacity: true,\n    floodOpacity: true,\n    stopOpacity: true,\n    strokeDasharray: true,\n    strokeDashoffset: true,\n    strokeMiterlimit: true,\n    strokeOpacity: true,\n    strokeWidth: true\n};\n\n/**\n * Taken from React's CSSProperty.js\n *\n * @param {string} prefix vendor-specific prefix, eg: Webkit\n * @param {string} key style name, eg: transitionDuration\n * @return {string} style name prefixed with `prefix`, properly camelCased, eg:\n * WebkitTransitionDuration\n */\nfunction prefixKey(prefix, key) {\n    return prefix + key.charAt(0).toUpperCase() + key.substring(1);\n}\n\n/**\n * Support style names that may come passed in prefixed by adding permutations\n * of vendor prefixes.\n * Taken from React's CSSProperty.js\n */\nvar prefixes = ['Webkit', 'ms', 'Moz', 'O'];\n\n// Using Object.keys here, or else the vanilla for-in loop makes IE8 go into an\n// infinite loop, because it iterates over the newly added props too.\n// Taken from React's CSSProperty.js\nObject.keys(isUnitlessNumber).forEach(function (prop) {\n    prefixes.forEach(function (prefix) {\n        isUnitlessNumber[prefixKey(prefix, prop)] = isUnitlessNumber[prop];\n    });\n});\n\nvar stringifyValue = function stringifyValue(key /* : string */\n, prop /* : any */\n) /* : string */{\n    if (typeof prop === \"number\") {\n        if (isUnitlessNumber[key]) {\n            return \"\" + prop;\n        } else {\n            return prop + \"px\";\n        }\n    } else {\n        return '' + prop;\n    }\n};\n\nvar stringifyAndImportantifyValue = function stringifyAndImportantifyValue(key /* : string */\n, prop /* : any */\n) {\n    return (/* : string */importantify(stringifyValue(key, prop))\n    );\n};\n\n// Turn a string into a hash string of base-36 values (using letters and numbers)\n// eslint-disable-next-line no-unused-vars\nvar hashString = function hashString(string /* : string */, key /* : ?string */) {\n    return (/* string */stringHash(string).toString(36)\n    );\n};\n\n// Hash a javascript object using JSON.stringify. This is very fast, about 3\n// microseconds on my computer for a sample object:\n// http://jsperf.com/test-hashfnv32a-hash/5\n//\n// Note that this uses JSON.stringify to stringify the objects so in order for\n// this to produce consistent hashes browsers need to have a consistent\n// ordering of objects. Ben Alpert says that Facebook depends on this, so we\n// can probably depend on this too.\nvar hashObject = function hashObject(object /* : ObjectMap */) {\n    return (/* : string */hashString(JSON.stringify(object))\n    );\n};\n\n// Given a single style value string like the \"b\" from \"a: b;\", adds !important\n// to generate \"b !important\".\nvar importantify = function importantify(string /* : string */) {\n    return (/* : string */\n        // Bracket string character access is very fast, and in the default case we\n        // normally don't expect there to be \"!important\" at the end of the string\n        // so we can use this simple check to take an optimized path. If there\n        // happens to be a \"!\" in this position, we follow up with a more thorough\n        // check.\n        string[string.length - 10] === '!' && string.slice(-11) === ' !important' ? string : String(string) + ' !important'\n    );\n};\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar prefixAll = createPrefixer(staticPrefixData);\n\n/* ::\nimport type { SheetDefinition } from './index.js';\ntype StringHandlers = { [id:string]: Function };\ntype SelectorCallback = (selector: string) => string[];\nexport type SelectorHandler = (\n    selector: string,\n    baseSelector: string,\n    callback: SelectorCallback\n) => string[] | string | null;\n*/\n\n/**\n * `selectorHandlers` are functions which handle special selectors which act\n * differently than normal style definitions. These functions look at the\n * current selector and can generate CSS for the styles in their subtree by\n * calling the callback with a new selector.\n *\n * For example, when generating styles with a base selector of '.foo' and the\n * following styles object:\n *\n *   {\n *     ':nth-child(2n)': {\n *       ':hover': {\n *         color: 'red'\n *       }\n *     }\n *   }\n *\n * when we reach the ':hover' style, we would call our selector handlers like\n *\n *   handler(':hover', '.foo:nth-child(2n)', callback)\n *\n * Since our `pseudoSelectors` handles ':hover' styles, that handler would call\n * the callback like\n *\n *   callback('.foo:nth-child(2n):hover')\n *\n * to generate its subtree `{ color: 'red' }` styles with a\n * '.foo:nth-child(2n):hover' selector. The callback would return an array of CSS\n * rules like\n *\n *   ['.foo:nth-child(2n):hover{color:red !important;}']\n *\n * and the handler would then return that resulting CSS.\n *\n * `defaultSelectorHandlers` is the list of default handlers used in a call to\n * `generateCSS`.\n *\n * @name SelectorHandler\n * @function\n * @param {string} selector: The currently inspected selector. ':hover' in the\n *     example above.\n * @param {string} baseSelector: The selector of the parent styles.\n *     '.foo:nth-child(2n)' in the example above.\n * @param {function} generateSubtreeStyles: A function which can be called to\n *     generate CSS for the subtree of styles corresponding to the selector.\n *     Accepts a new baseSelector to use for generating those styles.\n * @returns {string[] | string | null} The generated CSS for this selector, or\n *     null if we don't handle this selector.\n */\nvar defaultSelectorHandlers /* : SelectorHandler[] */ = [\n// Handle pseudo-selectors, like :hover and :nth-child(3n)\nfunction () {\n    function pseudoSelectors(selector, baseSelector, generateSubtreeStyles) {\n        if (selector[0] !== \":\") {\n            return null;\n        }\n        return generateSubtreeStyles(baseSelector + selector);\n    }\n\n    return pseudoSelectors;\n}(),\n\n// Handle media queries (or font-faces)\nfunction () {\n    function mediaQueries(selector, baseSelector, generateSubtreeStyles) {\n        if (selector[0] !== \"@\") {\n            return null;\n        }\n        // Generate the styles normally, and then wrap them in the media query.\n        var generated = generateSubtreeStyles(baseSelector);\n        return [String(selector) + '{' + String(generated.join('')) + '}'];\n    }\n\n    return mediaQueries;\n}()];\n\n/**\n * Generate CSS for a selector and some styles.\n *\n * This function handles the media queries and pseudo selectors that can be used\n * in aphrodite styles.\n *\n * @param {string} selector: A base CSS selector for the styles to be generated\n *     with.\n * @param {Object} styleTypes: A list of properties of the return type of\n *     StyleSheet.create, e.g. [styles.red, styles.blue].\n * @param {Array.<SelectorHandler>} selectorHandlers: A list of selector\n *     handlers to use for handling special selectors. See\n *     `defaultSelectorHandlers`.\n * @param stringHandlers: See `generateCSSRuleset`\n * @param useImportant: See `generateCSSRuleset`\n *\n * To actually generate the CSS special-construct-less styles are passed to\n * `generateCSSRuleset`.\n *\n * For instance, a call to\n *\n *     generateCSS(\".foo\", [{\n *       color: \"red\",\n *       \"@media screen\": {\n *         height: 20,\n *         \":hover\": {\n *           backgroundColor: \"black\"\n *         }\n *       },\n *       \":active\": {\n *         fontWeight: \"bold\"\n *       }\n *     }], defaultSelectorHandlers);\n *\n * with the default `selectorHandlers` will make 5 calls to\n * `generateCSSRuleset`:\n *\n *     generateCSSRuleset(\".foo\", { color: \"red\" }, ...)\n *     generateCSSRuleset(\".foo:active\", { fontWeight: \"bold\" }, ...)\n *     // These 2 will be wrapped in @media screen {}\n *     generateCSSRuleset(\".foo\", { height: 20 }, ...)\n *     generateCSSRuleset(\".foo:hover\", { backgroundColor: \"black\" }, ...)\n */\nvar generateCSS = function generateCSS(selector /* : string */\n, styleTypes /* : SheetDefinition[] */\n, selectorHandlers /* : SelectorHandler[] */\n, stringHandlers /* : StringHandlers */\n, useImportant /* : boolean */\n) /* : string[] */{\n    var merged = new OrderedElements();\n\n    for (var i = 0; i < styleTypes.length; i++) {\n        merged.addStyleType(styleTypes[i]);\n    }\n\n    var plainDeclarations = new OrderedElements();\n    var generatedStyles = [];\n\n    // TODO(emily): benchmark this to see if a plain for loop would be faster.\n    merged.forEach(function (val, key) {\n        // For each key, see if one of the selector handlers will handle these\n        // styles.\n        var foundHandler = selectorHandlers.some(function (handler) {\n            var result = handler(key, selector, function (newSelector) {\n                return generateCSS(newSelector, [val], selectorHandlers, stringHandlers, useImportant);\n            });\n            if (result != null) {\n                // If the handler returned something, add it to the generated\n                // CSS and stop looking for another handler.\n                if (Array.isArray(result)) {\n                    generatedStyles.push.apply(generatedStyles, _toConsumableArray(result));\n                } else {\n                    // eslint-disable-next-line\n                    console.warn('WARNING: Selector handlers should return an array of rules.' + 'Returning a string containing multiple rules is deprecated.', handler);\n                    generatedStyles.push('@media all {' + String(result) + '}');\n                }\n                return true;\n            }\n        });\n        // If none of the handlers handled it, add it to the list of plain\n        // style declarations.\n        if (!foundHandler) {\n            plainDeclarations.set(key, val, true);\n        }\n    });\n    var generatedRuleset = generateCSSRuleset(selector, plainDeclarations, stringHandlers, useImportant, selectorHandlers);\n\n    if (generatedRuleset) {\n        generatedStyles.unshift(generatedRuleset);\n    }\n\n    return generatedStyles;\n};\n\n/**\n * Helper method of generateCSSRuleset to facilitate custom handling of certain\n * CSS properties. Used for e.g. font families.\n *\n * See generateCSSRuleset for usage and documentation of paramater types.\n */\nvar runStringHandlers = function runStringHandlers(declarations /* : OrderedElements */\n, stringHandlers /* : StringHandlers */\n, selectorHandlers /* : SelectorHandler[] */\n) /* : void */{\n    if (!stringHandlers) {\n        return;\n    }\n\n    var stringHandlerKeys = Object.keys(stringHandlers);\n    for (var i = 0; i < stringHandlerKeys.length; i++) {\n        var key = stringHandlerKeys[i];\n        if (declarations.has(key)) {\n            // A declaration exists for this particular string handler, so we\n            // need to let the string handler interpret the declaration first\n            // before proceeding.\n            //\n            // TODO(emily): Pass in a callback which generates CSS, similar to\n            // how our selector handlers work, instead of passing in\n            // `selectorHandlers` and have them make calls to `generateCSS`\n            // themselves. Right now, this is impractical because our string\n            // handlers are very specialized and do complex things.\n            declarations.set(key, stringHandlers[key](declarations.get(key), selectorHandlers),\n\n            // Preserve order here, since we are really replacing an\n            // unprocessed style with a processed style, not overriding an\n            // earlier style\n            false);\n        }\n    }\n};\n\nvar transformRule = function transformRule(key /* : string */\n, value /* : string */\n, transformValue /* : function */\n) {\n    return (/* : string */String(kebabifyStyleName(key)) + ':' + String(transformValue(key, value)) + ';'\n    );\n};\n\nvar arrayToObjectKeysReducer = function arrayToObjectKeysReducer(acc, val) {\n    acc[val] = true;\n    return acc;\n};\n\n/**\n * Generate a CSS ruleset with the selector and containing the declarations.\n *\n * This function assumes that the given declarations don't contain any special\n * children (such as media queries, pseudo-selectors, or descendant styles).\n *\n * Note that this method does not deal with nesting used for e.g.\n * psuedo-selectors or media queries. That responsibility is left to  the\n * `generateCSS` function.\n *\n * @param {string} selector: the selector associated with the ruleset\n * @param {Object} declarations: a map from camelCased CSS property name to CSS\n *     property value.\n * @param {Object.<string, function>} stringHandlers: a map from camelCased CSS\n *     property name to a function which will map the given value to the value\n *     that is output.\n * @param {bool} useImportant: A boolean saying whether to append \"!important\"\n *     to each of the CSS declarations.\n * @returns {string} A string of raw CSS.\n *\n * Examples:\n *\n *    generateCSSRuleset(\".blah\", { color: \"red\" })\n *    -> \".blah{color: red !important;}\"\n *    generateCSSRuleset(\".blah\", { color: \"red\" }, {}, false)\n *    -> \".blah{color: red}\"\n *    generateCSSRuleset(\".blah\", { color: \"red\" }, {color: c => c.toUpperCase})\n *    -> \".blah{color: RED}\"\n *    generateCSSRuleset(\".blah:hover\", { color: \"red\" })\n *    -> \".blah:hover{color: red}\"\n */\nvar generateCSSRuleset = function generateCSSRuleset(selector /* : string */\n, declarations /* : OrderedElements */\n, stringHandlers /* : StringHandlers */\n, useImportant /* : boolean */\n, selectorHandlers /* : SelectorHandler[] */\n) /* : string */{\n    // Mutates declarations\n    runStringHandlers(declarations, stringHandlers, selectorHandlers);\n\n    var originalElements = Object.keys(declarations.elements).reduce(arrayToObjectKeysReducer, Object.create(null));\n\n    // NOTE(emily): This mutates handledDeclarations.elements.\n    var prefixedElements = prefixAll(declarations.elements);\n\n    var elementNames = Object.keys(prefixedElements);\n    if (elementNames.length !== declarations.keyOrder.length) {\n        // There are some prefixed values, so we need to figure out how to sort\n        // them.\n        //\n        // Loop through prefixedElements, looking for anything that is not in\n        // sortOrder, which means it was added by prefixAll. This means that we\n        // need to figure out where it should appear in the sortOrder.\n        for (var i = 0; i < elementNames.length; i++) {\n            if (!originalElements[elementNames[i]]) {\n                // This element is not in the sortOrder, which means it is a prefixed\n                // value that was added by prefixAll. Let's try to figure out where it\n                // goes.\n                var originalStyle = void 0;\n                if (elementNames[i][0] === 'W') {\n                    // This is a Webkit-prefixed style, like \"WebkitTransition\". Let's\n                    // find its original style's sort order.\n                    originalStyle = elementNames[i][6].toLowerCase() + elementNames[i].slice(7);\n                } else if (elementNames[i][1] === 'o') {\n                    // This is a Moz-prefixed style, like \"MozTransition\". We check\n                    // the second character to avoid colliding with Ms-prefixed\n                    // styles. Let's find its original style's sort order.\n                    originalStyle = elementNames[i][3].toLowerCase() + elementNames[i].slice(4);\n                } else {\n                    // if (elementNames[i][1] === 's') {\n                    // This is a Ms-prefixed style, like \"MsTransition\".\n                    originalStyle = elementNames[i][2].toLowerCase() + elementNames[i].slice(3);\n                }\n\n                if (originalStyle && originalElements[originalStyle]) {\n                    var originalIndex = declarations.keyOrder.indexOf(originalStyle);\n                    declarations.keyOrder.splice(originalIndex, 0, elementNames[i]);\n                } else {\n                    // We don't know what the original style was, so sort it to\n                    // top. This can happen for styles that are added that don't\n                    // have the same base name as the original style.\n                    declarations.keyOrder.unshift(elementNames[i]);\n                }\n            }\n        }\n    }\n\n    var transformValue = useImportant === false ? stringifyValue : stringifyAndImportantifyValue;\n\n    var rules = [];\n    for (var _i = 0; _i < declarations.keyOrder.length; _i++) {\n        var key = declarations.keyOrder[_i];\n        var value = prefixedElements[key];\n        if (Array.isArray(value)) {\n            // inline-style-prefixer returns an array when there should be\n            // multiple rules for the same key. Here we flatten to multiple\n            // pairs with the same key.\n            for (var j = 0; j < value.length; j++) {\n                rules.push(transformRule(key, value[j], transformValue));\n            }\n        } else {\n            rules.push(transformRule(key, value, transformValue));\n        }\n    }\n\n    if (rules.length) {\n        return String(selector) + '{' + String(rules.join(\"\")) + '}';\n    } else {\n        return \"\";\n    }\n};\n\nvar _typeof$1 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray$1(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/* ::\nimport type { SheetDefinition, SheetDefinitions } from './index.js';\nimport type { MaybeSheetDefinition } from './exports.js';\nimport type { SelectorHandler } from './generate.js';\n*/\n\n// The current <style> tag we are inserting into, or null if we haven't\n// inserted anything yet. We could find this each time using\n// `document.querySelector(\"style[data-aphrodite\"])`, but holding onto it is\n// faster.\nvar styleTag /* : ?HTMLStyleElement */ = null;\n\n// Inject a set of rules into a <style> tag in the head of the document. This\n// will automatically create a style tag and then continue to use it for\n// multiple injections. It will also use a style tag with the `data-aphrodite`\n// tag on it if that exists in the DOM. This could be used for e.g. reusing the\n// same style tag that server-side rendering inserts.\nvar injectStyleTag = function injectStyleTag(cssRules /* : string[] */) {\n    if (styleTag == null) {\n        // Try to find a style tag with the `data-aphrodite` attribute first.\n        styleTag = document.querySelector(\"style[data-aphrodite]\") /* : any */;\n\n        // If that doesn't work, generate a new style tag.\n        if (styleTag == null) {\n            // Taken from\n            // http://stackoverflow.com/questions/524696/how-to-create-a-style-tag-with-javascript\n            var head = document.head || document.getElementsByTagName('head')[0];\n            styleTag = document.createElement('style');\n\n            styleTag.type = 'text/css';\n            styleTag.setAttribute(\"data-aphrodite\", \"\");\n            head.appendChild(styleTag);\n        }\n    }\n\n    var sheet = styleTag.styleSheet || styleTag.sheet /* : any */;\n\n    if (sheet.insertRule) {\n        var numRules = sheet.cssRules.length;\n        cssRules.forEach(function (rule) {\n            try {\n                sheet.insertRule(rule, numRules);\n                numRules += 1;\n            } catch (e) {\n                // The selector for this rule wasn't compatible with the browser\n            }\n        });\n    } else {\n        styleTag.innerText = (styleTag.innerText || '') + cssRules.join('');\n    }\n};\n\n// Custom handlers for stringifying CSS values that have side effects\n// (such as fontFamily, which can cause @font-face rules to be injected)\nvar stringHandlers = {\n    // With fontFamily we look for objects that are passed in and interpret\n    // them as @font-face rules that we need to inject. The value of fontFamily\n    // can either be a string (as normal), an object (a single font face), or\n    // an array of objects and strings.\n    fontFamily: function () {\n        function fontFamily(val) {\n            if (Array.isArray(val)) {\n                return val.map(fontFamily).join(\",\");\n            } else if ((typeof val === 'undefined' ? 'undefined' : _typeof$1(val)) === \"object\") {\n                injectStyleOnce(val.src, \"@font-face\", [val], false);\n                return '\"' + String(val.fontFamily) + '\"';\n            } else {\n                return val;\n            }\n        }\n\n        return fontFamily;\n    }(),\n\n    // With animationName we look for an object that contains keyframes and\n    // inject them as an `@keyframes` block, returning a uniquely generated\n    // name. The keyframes object should look like\n    //  animationName: {\n    //    from: {\n    //      left: 0,\n    //      top: 0,\n    //    },\n    //    '50%': {\n    //      left: 15,\n    //      top: 5,\n    //    },\n    //    to: {\n    //      left: 20,\n    //      top: 20,\n    //    }\n    //  }\n    // TODO(emily): `stringHandlers` doesn't let us rename the key, so I have\n    // to use `animationName` here. Improve that so we can call this\n    // `animation` instead of `animationName`.\n    animationName: function () {\n        function animationName(val, selectorHandlers) {\n            if (Array.isArray(val)) {\n                return val.map(function (v) {\n                    return animationName(v, selectorHandlers);\n                }).join(\",\");\n            } else if ((typeof val === 'undefined' ? 'undefined' : _typeof$1(val)) === \"object\") {\n                // Generate a unique name based on the hash of the object. We can't\n                // just use the hash because the name can't start with a number.\n                // TODO(emily): this probably makes debugging hard, allow a custom\n                // name?\n                var name = 'keyframe_' + String(hashObject(val));\n\n                // Since keyframes need 3 layers of nesting, we use `generateCSS` to\n                // build the inner layers and wrap it in `@keyframes` ourselves.\n                var finalVal = '@keyframes ' + name + '{';\n\n                // TODO see if we can find a way where checking for OrderedElements\n                // here is not necessary. Alternatively, perhaps we should have a\n                // utility method that can iterate over either a plain object, an\n                // instance of OrderedElements, or a Map, and then use that here and\n                // elsewhere.\n                if (val instanceof OrderedElements) {\n                    val.forEach(function (valVal, valKey) {\n                        finalVal += generateCSS(valKey, [valVal], selectorHandlers, stringHandlers, false).join('');\n                    });\n                } else {\n                    Object.keys(val).forEach(function (key) {\n                        finalVal += generateCSS(key, [val[key]], selectorHandlers, stringHandlers, false).join('');\n                    });\n                }\n                finalVal += '}';\n\n                injectGeneratedCSSOnce(name, [finalVal]);\n\n                return name;\n            } else {\n                return val;\n            }\n        }\n\n        return animationName;\n    }()\n};\n\n// This is a map from Aphrodite's generated class names to `true` (acting as a\n// set of class names)\nvar alreadyInjected = {};\n\n// This is the buffer of styles which have not yet been flushed.\nvar injectionBuffer /* : string[] */ = [];\n\n// A flag to tell if we are already buffering styles. This could happen either\n// because we scheduled a flush call already, so newly added styles will\n// already be flushed, or because we are statically buffering on the server.\nvar isBuffering = false;\n\nvar injectGeneratedCSSOnce = function injectGeneratedCSSOnce(key, generatedCSS) {\n    var _injectionBuffer;\n\n    if (alreadyInjected[key]) {\n        return;\n    }\n\n    if (!isBuffering) {\n        // We should never be automatically buffering on the server (or any\n        // place without a document), so guard against that.\n        if (typeof document === \"undefined\") {\n            throw new Error(\"Cannot automatically buffer without a document\");\n        }\n\n        // If we're not already buffering, schedule a call to flush the\n        // current styles.\n        isBuffering = true;\n        asap(flushToStyleTag);\n    }\n\n    (_injectionBuffer = injectionBuffer).push.apply(_injectionBuffer, _toConsumableArray$1(generatedCSS));\n    alreadyInjected[key] = true;\n};\n\nvar injectStyleOnce = function injectStyleOnce(key /* : string */\n, selector /* : string */\n, definitions /* : SheetDefinition[] */\n, useImportant /* : boolean */\n) {\n    var selectorHandlers /* : SelectorHandler[] */ = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n\n    if (alreadyInjected[key]) {\n        return;\n    }\n\n    var generated = generateCSS(selector, definitions, selectorHandlers, stringHandlers, useImportant);\n\n    injectGeneratedCSSOnce(key, generated);\n};\n\nvar reset = function reset() {\n    injectionBuffer = [];\n    alreadyInjected = {};\n    isBuffering = false;\n    styleTag = null;\n};\n\nvar getBufferedStyles = function getBufferedStyles() {\n    return injectionBuffer;\n};\n\nvar startBuffering = function startBuffering() {\n    if (isBuffering) {\n        throw new Error(\"Cannot buffer while already buffering\");\n    }\n    isBuffering = true;\n};\n\nvar flushToArray = function flushToArray() {\n    isBuffering = false;\n    var ret = injectionBuffer;\n    injectionBuffer = [];\n    return ret;\n};\n\nvar flushToString = function flushToString() {\n    return flushToArray().join('');\n};\n\nvar flushToStyleTag = function flushToStyleTag() {\n    var cssRules = flushToArray();\n    if (cssRules.length > 0) {\n        injectStyleTag(cssRules);\n    }\n};\n\nvar getRenderedClassNames = function getRenderedClassNames() {\n    return Object.keys(alreadyInjected);\n};\n\nvar addRenderedClassNames = function addRenderedClassNames(classNames /* : string[] */) {\n    classNames.forEach(function (className) {\n        alreadyInjected[className] = true;\n    });\n};\n\nvar processStyleDefinitions = function processStyleDefinitions(styleDefinitions /* : any[] */\n, classNameBits /* : string[] */\n, definitionBits /* : Object[] */\n, length /* : number */\n) /* : number */{\n    for (var i = 0; i < styleDefinitions.length; i += 1) {\n        // Filter out falsy values from the input, to allow for\n        // `css(a, test && c)`\n        if (styleDefinitions[i]) {\n            if (Array.isArray(styleDefinitions[i])) {\n                // We've encountered an array, so let's recurse\n                length += processStyleDefinitions(styleDefinitions[i], classNameBits, definitionBits, length);\n            } else {\n                classNameBits.push(styleDefinitions[i]._name);\n                definitionBits.push(styleDefinitions[i]._definition);\n                length += styleDefinitions[i]._len;\n            }\n        }\n    }\n    return length;\n};\n\n/**\n * Inject styles associated with the passed style definition objects, and return\n * an associated CSS class name.\n *\n * @param {boolean} useImportant If true, will append !important to generated\n *     CSS output. e.g. {color: red} -> \"color: red !important\".\n * @param {(Object|Object[])[]} styleDefinitions style definition objects, or\n *     arbitrarily nested arrays of them, as returned as properties of the\n *     return value of StyleSheet.create().\n */\nvar injectAndGetClassName = function injectAndGetClassName(useImportant /* : boolean */\n, styleDefinitions /* : MaybeSheetDefinition[] */\n, selectorHandlers /* : SelectorHandler[] */\n) /* : string */{\n    var classNameBits = [];\n    var definitionBits = [];\n\n    // Mutates classNameBits and definitionBits and returns a length which we\n    // will append to the hash to decrease the chance of hash collisions.\n    var length = processStyleDefinitions(styleDefinitions, classNameBits, definitionBits, 0);\n\n    // Break if there aren't any valid styles.\n    if (classNameBits.length === 0) {\n        return \"\";\n    }\n\n    var className = void 0;\n    if (process.env.NODE_ENV === 'production') {\n        className = classNameBits.length === 1 ? '_' + String(classNameBits[0]) : '_' + String(hashString(classNameBits.join())) + String((length % 36).toString(36));\n    } else {\n        className = classNameBits.join(\"-o_O-\");\n    }\n\n    injectStyleOnce(className, '.' + String(className), definitionBits, useImportant, selectorHandlers);\n\n    return className;\n};\n\n/* ::\nimport type { SelectorHandler } from './generate.js';\nexport type SheetDefinition = { [id:string]: any };\nexport type SheetDefinitions = SheetDefinition | SheetDefinition[];\ntype RenderFunction = () => string;\ntype Extension = {\n    selectorHandler: SelectorHandler\n};\nexport type MaybeSheetDefinition = SheetDefinition | false | null | void\n*/\n\nvar unminifiedHashFn = function unminifiedHashFn(str /* : string */, key /* : string */) {\n    return String(key) + '_' + String(hashString(str));\n};\n\n// StyleSheet.create is in a hot path so we want to keep as much logic out of it\n// as possible. So, we figure out which hash function to use once, and only\n// switch it out via minify() as necessary.\n//\n// This is in an exported function to make it easier to test.\nvar initialHashFn = function initialHashFn() {\n    return process.env.NODE_ENV === 'production' ? hashString : unminifiedHashFn;\n};\n\nvar hashFn = initialHashFn();\n\nvar StyleSheet = {\n    create: function () {\n        function create(sheetDefinition /* : SheetDefinition */) /* : Object */{\n            var mappedSheetDefinition = {};\n            var keys = Object.keys(sheetDefinition);\n\n            for (var i = 0; i < keys.length; i += 1) {\n                var key = keys[i];\n                var val = sheetDefinition[key];\n                var stringVal = JSON.stringify(val);\n\n                mappedSheetDefinition[key] = {\n                    _len: stringVal.length,\n                    _name: hashFn(stringVal, key),\n                    _definition: val\n                };\n            }\n\n            return mappedSheetDefinition;\n        }\n\n        return create;\n    }(),\n    rehydrate: function () {\n        function rehydrate() {\n            var renderedClassNames /* : string[] */ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n            addRenderedClassNames(renderedClassNames);\n        }\n\n        return rehydrate;\n    }()\n};\n\n/**\n * Utilities for using Aphrodite server-side.\n *\n * This can be minified out in client-only bundles by replacing `typeof window`\n * with `\"object\"`, e.g. via Webpack's DefinePlugin:\n *\n *   new webpack.DefinePlugin({\n *     \"typeof window\": JSON.stringify(\"object\")\n *   })\n */\nvar StyleSheetServer = typeof window !== 'undefined' ? null : {\n    renderStatic: function () {\n        function renderStatic(renderFunc /* : RenderFunction */) {\n            reset();\n            startBuffering();\n            var html = renderFunc();\n            var cssContent = flushToString();\n\n            return {\n                html: html,\n                css: {\n                    content: cssContent,\n                    renderedClassNames: getRenderedClassNames()\n                }\n            };\n        }\n\n        return renderStatic;\n    }()\n};\n\n/**\n * Utilities for using Aphrodite in tests.\n *\n * Not meant to be used in production.\n */\nvar StyleSheetTestUtils = process.env.NODE_ENV === 'production' ? null : {\n    /**\n    * Prevent styles from being injected into the DOM.\n    *\n    * This is useful in situations where you'd like to test rendering UI\n    * components which use Aphrodite without any of the side-effects of\n    * Aphrodite happening. Particularly useful for testing the output of\n    * components when you have no DOM, e.g. testing in Node without a fake DOM.\n    *\n    * Should be paired with a subsequent call to\n    * clearBufferAndResumeStyleInjection.\n    */\n    suppressStyleInjection: function () {\n        function suppressStyleInjection() {\n            reset();\n            startBuffering();\n        }\n\n        return suppressStyleInjection;\n    }(),\n\n\n    /**\n    * Opposite method of preventStyleInject.\n    */\n    clearBufferAndResumeStyleInjection: function () {\n        function clearBufferAndResumeStyleInjection() {\n            reset();\n        }\n\n        return clearBufferAndResumeStyleInjection;\n    }(),\n\n\n    /**\n    * Returns a string of buffered styles which have not been flushed\n    *\n    * @returns {string}  Buffer of styles which have not yet been flushed.\n    */\n    getBufferedStyles: function () {\n        function getBufferedStyles$$1() {\n            return getBufferedStyles();\n        }\n\n        return getBufferedStyles$$1;\n    }()\n};\n\n/**\n * Generate the Aphrodite API exports, with given `selectorHandlers` and\n * `useImportant` state.\n */\nfunction makeExports(useImportant /* : boolean */\n, selectorHandlers /* : SelectorHandler[] */\n) {\n    return {\n        StyleSheet: Object.assign({}, StyleSheet, {\n\n            /**\n             * Returns a version of the exports of Aphrodite (i.e. an object\n             * with `css` and `StyleSheet` properties) which have some\n             * extensions included.\n             *\n             * @param {Array.<Object>} extensions: An array of extensions to\n             *     add to this instance of Aphrodite. Each object should have a\n             *     single property on it, defining which kind of extension to\n             *     add.\n             * @param {SelectorHandler} [extensions[].selectorHandler]: A\n             *     selector handler extension. See `defaultSelectorHandlers` in\n             *     generate.js.\n             *\n             * @returns {Object} An object containing the exports of the new\n             *     instance of Aphrodite.\n             */\n            extend: function () {\n                function extend(extensions /* : Extension[] */) {\n                    var extensionSelectorHandlers = extensions\n                    // Pull out extensions with a selectorHandler property\n                    .map(function (extension) {\n                        return extension.selectorHandler;\n                    })\n                    // Remove nulls (i.e. extensions without a selectorHandler\n                    // property).\n                    .filter(function (handler) {\n                        return handler;\n                    });\n\n                    return makeExports(useImportant, selectorHandlers.concat(extensionSelectorHandlers));\n                }\n\n                return extend;\n            }()\n        }),\n\n        StyleSheetServer: StyleSheetServer,\n        StyleSheetTestUtils: StyleSheetTestUtils,\n\n        minify: function () {\n            function minify(shouldMinify /* : boolean */) {\n                hashFn = shouldMinify ? hashString : unminifiedHashFn;\n            }\n\n            return minify;\n        }(),\n        css: function () {\n            function css() /* : MaybeSheetDefinition[] */{\n                for (var _len = arguments.length, styleDefinitions = Array(_len), _key = 0; _key < _len; _key++) {\n                    styleDefinitions[_key] = arguments[_key];\n                }\n\n                return injectAndGetClassName(useImportant, styleDefinitions, selectorHandlers);\n            }\n\n            return css;\n        }()\n    };\n}\n\nvar useImportant = true; // Add !important to all style definitions\n\nvar Aphrodite = makeExports(useImportant, defaultSelectorHandlers);\n\nvar StyleSheet$1 = Aphrodite.StyleSheet,\n    StyleSheetServer$1 = Aphrodite.StyleSheetServer,\n    StyleSheetTestUtils$1 = Aphrodite.StyleSheetTestUtils,\n    css = Aphrodite.css,\n    minify = Aphrodite.minify;\n\nexport { StyleSheet$1 as StyleSheet, StyleSheetServer$1 as StyleSheetServer, StyleSheetTestUtils$1 as StyleSheetTestUtils, css, minify, flushToStyleTag };\n","import {StyleSheet} from 'aphrodite'\n\nexport enum FontFamily {\n  MONOSPACE = '\"Source Code Pro\", Courier, monospace',\n}\n\nexport enum FontSize {\n  LABEL = 10,\n  TITLE = 12,\n  BIG_BUTTON = 36,\n}\n\nexport enum Colors {\n  WHITE = '#FFFFFF',\n  OFF_WHITE = '#F6F6F6',\n  LIGHT_GRAY = '#BDBDBD',\n  GRAY = '#666666',\n  DARK_GRAY = '#222222',\n  BLACK = '#000000',\n  BRIGHT_BLUE = '#56CCF2',\n  DARK_BLUE = '#2F80ED',\n  PALE_DARK_BLUE = '#8EB7ED',\n  GREEN = '#6FCF97',\n  TRANSPARENT_GREEN = 'rgba(111, 207, 151, 0.2)',\n}\n\nexport enum Sizes {\n  MINIMAP_HEIGHT = 100,\n  DETAIL_VIEW_HEIGHT = 150,\n  TOOLTIP_WIDTH_MAX = 300,\n  TOOLTIP_HEIGHT_MAX = 80,\n  SEPARATOR_HEIGHT = 2,\n  FRAME_HEIGHT = 20,\n  TOOLBAR_HEIGHT = 20,\n  TOOLBAR_TAB_HEIGHT = TOOLBAR_HEIGHT - SEPARATOR_HEIGHT,\n}\n\nexport enum Duration {\n  HOVER_CHANGE = '0.07s',\n}\n\nexport enum ZIndex {\n  HOVERTIP = 1,\n}\n\nexport const commonStyle = StyleSheet.create({\n  fillY: {\n    height: '100%',\n  },\n  fillX: {\n    width: '100%',\n  },\n  hbox: {\n    display: 'flex',\n    flexDirection: 'row',\n    position: 'relative',\n    overflow: 'hidden',\n  },\n  vbox: {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'relative',\n    overflow: 'hidden',\n  },\n})\n","import {h, Component} from 'preact'\nimport {StyleSheet, css} from 'aphrodite'\nimport {Colors, FontSize} from './style'\n\ninterface ColorChitProps {\n  color: string\n}\n\nexport class ColorChit extends Component<ColorChitProps, {}> {\n  render() {\n    return <span className={css(style.stackChit)} style={{backgroundColor: this.props.color}} />\n  }\n}\n\nconst style = StyleSheet.create({\n  stackChit: {\n    position: 'relative',\n    top: -1,\n    display: 'inline-block',\n    verticalAlign: 'middle',\n    marginRight: '0.5em',\n    border: `1px solid ${Colors.LIGHT_GRAY}`,\n    width: FontSize.LABEL - 2,\n    height: FontSize.LABEL - 2,\n  },\n})\n","// A simple implementation of an efficient scrolling list view which\n// renders only items within the viewport + a couple extra items.\n\nimport {h, Component} from 'preact'\n\nexport interface ListItem {\n  size: number\n}\n\ninterface ScrollableListViewProps {\n  items: ListItem[]\n  axis: 'x' | 'y'\n  renderItems: (firstVisibleIndex: number, lastVisibleIndex: number) => JSX.Element | JSX.Element[]\n  className?: string\n}\n\ninterface ScrollableListViewState {\n  firstVisibleIndex: number | null\n  lastVisibleIndex: number | null\n  invisiblePrefixSize: number | null\n  viewportSize: number | null\n  cachedTotalSize: number\n}\n\nexport class ScrollableListView extends Component<\n  ScrollableListViewProps,\n  ScrollableListViewState\n> {\n  constructor(props: ScrollableListViewProps) {\n    super(props)\n    this.state = {\n      firstVisibleIndex: null,\n      lastVisibleIndex: null,\n      invisiblePrefixSize: null,\n      viewportSize: null,\n      cachedTotalSize: props.items.reduce((a, b) => a + b.size, 0),\n    }\n  }\n\n  private viewport: HTMLDivElement | null = null\n  private viewportRef = (viewport?: Element) => {\n    this.viewport = (viewport as HTMLDivElement) || null\n  }\n\n  private recomputeVisibleIndices(props: ScrollableListViewProps) {\n    if (!this.viewport) return\n    const {items} = props\n\n    const viewportSize = this.viewport.getBoundingClientRect().height\n\n    // We render items up to a quarter viewport height outside of the\n    // viewport both above and below to prevent flickering.\n    const minY = this.viewport.scrollTop - viewportSize / 4\n    const maxY = this.viewport.scrollTop + viewportSize + viewportSize / 4\n\n    let total = 0\n    let invisiblePrefixSize = 0\n\n    let i = 0\n    for (; i < items.length; i++) {\n      const item = items[i]\n      invisiblePrefixSize = total\n      total += item.size\n      if (total >= minY) {\n        break\n      }\n    }\n\n    const firstVisibleIndex = i\n\n    for (; i < items.length; i++) {\n      const item = items[i]\n      total += item.size\n      if (total >= maxY) {\n        break\n      }\n    }\n\n    const lastVisibleIndex = Math.min(i, items.length - 1)\n    this.setState({invisiblePrefixSize, firstVisibleIndex, lastVisibleIndex})\n  }\n\n  private pendingScroll = 0\n  public scrollIndexIntoView(index: number) {\n    this.pendingScroll = this.props.items.reduce((sum, cur, i) => {\n      if (i >= index) return sum\n      return sum + cur.size\n    }, 0)\n  }\n  private applyPendingScroll() {\n    if (!this.viewport) return\n\n    const leftOrTop = this.props.axis === 'y' ? 'top' : 'left'\n    this.viewport.scrollTo({\n      [leftOrTop]: this.pendingScroll,\n    })\n  }\n\n  componentWillReceiveProps(nextProps: ScrollableListViewProps) {\n    if (this.props.items !== nextProps.items) {\n      this.recomputeVisibleIndices(nextProps)\n    }\n  }\n\n  componentDidMount() {\n    this.applyPendingScroll()\n    this.recomputeVisibleIndices(this.props)\n    window.addEventListener('resize', this.onWindowResize)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onWindowResize)\n  }\n\n  onWindowResize = () => {\n    this.recomputeVisibleIndices(this.props)\n  }\n\n  onViewportScroll = (ev: UIEvent) => {\n    this.recomputeVisibleIndices(this.props)\n  }\n\n  render() {\n    const {cachedTotalSize, firstVisibleIndex, lastVisibleIndex, invisiblePrefixSize} = this.state\n\n    return (\n      <div className={this.props.className} ref={this.viewportRef} onScroll={this.onViewportScroll}>\n        <div style={{height: cachedTotalSize}}>\n          <div style={{transform: `translateY(${invisiblePrefixSize}px)`}}>\n            {firstVisibleIndex != null &&\n              lastVisibleIndex != null &&\n              this.props.renderItems(firstVisibleIndex, lastVisibleIndex)}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","class ListNode<V> {\n  prev: ListNode<V> | null = null\n  next: ListNode<V> | null = null\n  constructor(readonly data: V) {}\n}\n\nexport class List<V> {\n  private head: ListNode<V> | null = null\n  private tail: ListNode<V> | null = null\n  private size: number = 0\n  constructor() {}\n\n  getHead(): ListNode<V> | null {\n    return this.head\n  }\n  getTail(): ListNode<V> | null {\n    return this.tail\n  }\n  getSize(): number {\n    return this.size\n  }\n\n  append(node: ListNode<V>): void {\n    if (!this.tail) {\n      this.head = this.tail = node\n    } else {\n      this.tail.next = node\n      node.prev = this.tail\n      this.tail = node\n    }\n    this.size++\n  }\n\n  prepend(node: ListNode<V>): ListNode<V> {\n    if (!this.head) {\n      this.head = this.tail = node\n    } else {\n      this.head.prev = node\n      node.next = this.head\n      this.head = node\n    }\n    this.size++\n    return node\n  }\n\n  pop(): ListNode<V> | null {\n    if (!this.tail) {\n      return null\n    } else {\n      const ret = this.tail\n      if (ret.prev) {\n        this.tail = ret.prev\n        this.tail.next = null\n      } else {\n        this.head = this.tail = null\n      }\n      this.size--\n      ret.prev = null\n      return ret\n    }\n  }\n\n  dequeue(): ListNode<V> | null {\n    if (!this.head) {\n      return null\n    } else {\n      const ret = this.head\n      if (ret.next) {\n        this.head = ret.next\n        this.head.prev = null\n      } else {\n        this.head = this.tail = null\n      }\n      this.size--\n      ret.next = null\n      return ret\n    }\n  }\n\n  remove(node: ListNode<V>): void {\n    if (node.prev == null) {\n      this.dequeue()\n    } else if (node.next == null) {\n      this.pop()\n    } else {\n      // Neither first nor last, should be safe to just link\n      // neighbours.\n      node.next.prev = node.prev\n      node.prev.next = node.next\n      node.next = null\n      node.prev = null\n      this.size--\n    }\n  }\n}\n\ninterface LRUCacheNode<K, V> {\n  value: V\n  listNode: ListNode<K>\n}\n\nexport class LRUCache<K, V> {\n  private list = new List<K>()\n  private map = new Map<K, LRUCacheNode<K, V>>()\n\n  constructor(private capacity: number) {}\n\n  has(key: K): boolean {\n    return this.map.has(key)\n  }\n\n  get(key: K): V | null {\n    const node = this.map.get(key)\n    if (!node) {\n      return null\n    }\n    // Bring node to the front of the list\n    this.list.remove(node.listNode)\n    this.list.prepend(node.listNode)\n\n    return node ? node.value : null\n  }\n\n  getSize() {\n    return this.list.getSize()\n  }\n\n  getCapacity() {\n    return this.capacity\n  }\n\n  insert(key: K, value: V) {\n    const node = this.map.get(key)\n    if (node) {\n      this.list.remove(node.listNode)\n    }\n    // Evict old entries when out of capacity\n    while (this.list.getSize() >= this.capacity) {\n      this.map.delete(this.list.pop()!.data)\n    }\n    const listNode = this.list.prepend(new ListNode(key))\n    this.map.set(key, {value, listNode})\n  }\n\n  getOrInsert(key: K, f: (key: K) => V): V {\n    let value = this.get(key)\n    if (value == null) {\n      value = f(key)\n      this.insert(key, value)\n    }\n    return value\n  }\n\n  removeLRU(): [K, V] | null {\n    const oldest = this.list.pop()\n    if (!oldest) return null\n    const key = oldest.data\n    const value = this.map.get(key)!.value\n    this.map.delete(key)\n    return [key, value]\n  }\n\n  clear() {\n    this.list = new List<K>()\n    this.map = new Map<K, LRUCacheNode<K, V>>()\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// This is a port of the GPU APIs from https://github.com/evanw/sky from Skew to\n// TypeScript.\n//\n// The MIT License (MIT)\n// Original work Copyright (c) 2016 Evan Wallace\n// Modified work Copyright (c) 2018 Jamie Wong\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n// NOTE: This file intentionally has no dependencies.\n\n// Dependencies & polyfills for import from skew\nconst RELEASE =\n  typeof process !== 'undefined' && process.env && process.env.NODE_ENV === 'production'\n\nfunction assert(condition: boolean) {\n  if (!RELEASE) {\n    if (!condition) throw new Error('Assertion failed.')\n  }\n}\n\nfunction appendOne<T>(ts: T[], t: T): void {\n  if (ts.indexOf(t) === -1) ts.push(t)\n}\n\nfunction removeOne<T>(ts: T[], t: T): void {\n  const index = ts.indexOf(t)\n  if (index !== -1) ts.splice(index, 1)\n}\n\nfunction TEXTURE_N(gl: WebGLRenderingContext, index: number) {\n  assert(index >= 0 && index <= 31)\n  return (gl.TEXTURE0 + index) as GLenum\n}\n\nexport namespace Graphics {\n  export class Rect {\n    constructor(\n      public x: number = 0,\n      public y: number = 0,\n      public width: number = 0,\n      public height: number = 0,\n    ) {}\n\n    set(x: number, y: number, width: number, height: number) {\n      this.x = x\n      this.y = y\n      this.width = width\n      this.height = height\n    }\n\n    equals(other: Rect) {\n      return (\n        this.x === other.x &&\n        this.y === other.y &&\n        this.width === other.width &&\n        this.height === other.height\n      )\n    }\n  }\n\n  export class Color {\n    constructor(\n      public redF: number,\n      public greenF: number,\n      public blueF: number,\n      public alphaF: number,\n    ) {}\n\n    static TRANSPARENT = new Color(0, 0, 0, 0)\n  }\n\n  // Converted from https://github.com/evanw/sky/blob/c72de77/src/graphics/context.sk\n  export enum BlendOperation {\n    ZERO = 0,\n    ONE = 1,\n\n    SOURCE_COLOR = 2,\n    TARGET_COLOR = 3,\n    INVERSE_SOURCE_COLOR = 4,\n    INVERSE_TARGET_COLOR = 5,\n\n    SOURCE_ALPHA = 6,\n    TARGET_ALPHA = 7,\n    INVERSE_SOURCE_ALPHA = 8,\n    INVERSE_TARGET_ALPHA = 9,\n\n    CONSTANT = 10,\n    INVERSE_CONSTANT = 11,\n  }\n\n  export enum Primitive {\n    TRIANGLES,\n    TRIANGLE_STRIP,\n  }\n\n  export abstract class Context {\n    abstract addContextResetHandler(callback: () => void): void\n    abstract beginFrame(): void\n    abstract clear(color: Color): void\n\n    abstract createMaterial(\n      format: VertexFormat,\n      vertexSource: string,\n      fragmentSource: string,\n    ): Material\n    abstract createTexture(\n      format: TextureFormat,\n      width: number,\n      height: number,\n      pixels?: Uint8Array,\n    ): Texture\n    abstract createRenderTarget(texture: Texture): RenderTarget\n    abstract createVertexBuffer(byteCount: number): VertexBuffer\n    abstract currentRenderTarget: RenderTarget | null\n    abstract draw(primitive: Primitive, material: Material, vertices: VertexBuffer): void\n    abstract endFrame(): void\n    abstract removeContextResetHandler(callback: () => void): void\n    abstract resize(\n      widthInPixels: number,\n      heightInPixels: number,\n      widthInAppUnits: number,\n      heightInAppUnits: number,\n    ): void\n    abstract setRenderTarget(renderTarget: RenderTarget | null): void\n    abstract setViewport(x: number, y: number, width: number, height: number): void\n    abstract viewport: Rect\n    abstract widthInPixels: number\n    abstract heightInPixels: number\n\n    abstract renderTargetHeightInPixels: number\n    abstract renderTargetWidthInPixels: number\n\n    abstract setBlendState(source: BlendOperation, target: BlendOperation): void\n    setCopyBlendState() {\n      this.setBlendState(BlendOperation.ONE, BlendOperation.ZERO)\n    }\n    setAddBlendState() {\n      this.setBlendState(BlendOperation.ONE, BlendOperation.ONE)\n    }\n    setPremultipliedBlendState() {\n      this.setBlendState(BlendOperation.ONE, BlendOperation.INVERSE_SOURCE_ALPHA)\n    }\n    setUnpremultipliedBlendState() {\n      this.setBlendState(BlendOperation.SOURCE_ALPHA, BlendOperation.INVERSE_SOURCE_ALPHA)\n    }\n  }\n\n  export interface Material {\n    context: Context\n    format: VertexFormat\n    fragmentSource: string\n    vertexSource: string\n    setUniformFloat(name: string, x: number): void\n    setUniformInt(name: string, x: number): void\n    setUniformVec2(name: string, x: number, y: number): void\n    setUniformVec3(name: string, x: number, y: number, z: number): void\n    setUniformVec4(name: string, x: number, y: number, z: number, w: number): void\n    setUniformMat3(\n      name: string,\n      m00: number,\n      m01: number,\n      m02: number,\n      m10: number,\n      m11: number,\n      m12: number,\n      m20: number,\n      m21: number,\n      m22: number,\n    ): void\n    setUniformSampler(name: string, texture: Texture, index: number): void\n  }\n\n  export enum AttributeType {\n    FLOAT,\n    BYTE,\n  }\n\n  export function attributeByteLength(type: AttributeType) {\n    return type == AttributeType.FLOAT ? 4 : 1\n  }\n\n  export class Attribute {\n    constructor(\n      readonly name: string,\n      readonly type: AttributeType,\n      readonly count: number,\n      readonly byteOffset: number,\n    ) {}\n  }\n\n  export class VertexFormat {\n    private _attributes: Attribute[] = []\n    private _stride = 0\n\n    get attributes() {\n      return this._attributes\n    }\n    get stride() {\n      return this._stride\n    }\n\n    add(name: string, type: AttributeType, count: number): VertexFormat {\n      this.attributes.push(new Attribute(name, type, count, this.stride))\n      this._stride += count * attributeByteLength(type)\n      return this\n    }\n  }\n\n  export abstract class VertexBuffer {\n    abstract byteCount: number\n    abstract context: Context\n    abstract move(sourceByteOffset: number, targetByteOffset: number, byteCount: number): void\n    abstract upload(bytes: Uint8Array, byteOffset?: number): void\n    uploadFloat32Array(floats: Float32Array) {\n      this.upload(new Uint8Array(floats.buffer), 0)\n    }\n    uploadFloats(floats: number[]) {\n      this.uploadFloat32Array(new Float32Array(floats))\n    }\n    abstract free(): void\n  }\n\n  export enum PixelFilter {\n    NEAREST,\n    LINEAR,\n  }\n\n  export enum PixelWrap {\n    REPEAT,\n    CLAMP,\n  }\n\n  export class TextureFormat {\n    constructor(\n      readonly minFilter: PixelFilter,\n      readonly magFilter: PixelFilter,\n      readonly wrap: PixelWrap,\n    ) {}\n\n    static LINEAR_CLAMP = new TextureFormat(PixelFilter.LINEAR, PixelFilter.LINEAR, PixelWrap.CLAMP)\n    static LINEAR_MIN_NEAREST_MAG_CLAMP = new TextureFormat(\n      PixelFilter.LINEAR,\n      PixelFilter.NEAREST,\n      PixelWrap.CLAMP,\n    )\n    static NEAREST_CLAMP = new TextureFormat(\n      PixelFilter.NEAREST,\n      PixelFilter.NEAREST,\n      PixelWrap.CLAMP,\n    )\n  }\n\n  export interface Texture {\n    context: Context\n    format: TextureFormat\n    width: number\n    height: number\n    resize(width: number, height: number, pixels?: Uint8Array): void\n    setFormat(format: TextureFormat): void\n    free(): void\n  }\n\n  export interface RenderTarget {\n    context: Context\n    texture: Texture\n    setColor(texture: Texture): void\n    free(): void\n  }\n}\n\n// Converted from https://github.com/evanw/sky/blob/c72de77/src/browser/context.sk\nexport namespace WebGL {\n  export class Context extends Graphics.Context {\n    private _attributeCount = 0\n    private _blendOperationMap: {[key: number]: GLenum}\n    private _blendOperations = 0\n    private _contextResetHandlers: (() => void)[] = []\n    private _currentClearColor = Graphics.Color.TRANSPARENT\n    private _currentRenderTarget: RenderTarget | null = null\n    private _defaultViewport = new Graphics.Rect()\n    private _forceStateUpdate = true\n    private _generation = 1\n    private _gl: WebGLRenderingContext\n    private _height = 0\n    private _oldBlendOperations = 0\n    private _oldRenderTarget: RenderTarget | null = null\n    private _oldViewport = new Graphics.Rect()\n    private _width = 0\n\n    get widthInPixels() {\n      return this._width\n    }\n    get heightInPixels() {\n      return this._height\n    }\n\n    constructor(canvas: HTMLCanvasElement = document.createElement('canvas')) {\n      super()\n      let gl = canvas.getContext('webgl', {\n        alpha: false,\n        antialias: false,\n        depth: false,\n        preserveDrawingBuffer: false,\n        stencil: false,\n      })\n\n      if (gl == null) {\n        throw new Error('Setup failure')\n      }\n\n      this._gl = gl\n      let style = canvas.style\n      canvas.width = 0\n      canvas.height = 0\n      style.width = style.height = '0'\n\n      canvas.addEventListener('webglcontextlost', (e: Event) => {\n        e.preventDefault()\n      })\n\n      canvas.addEventListener('webglcontextrestored', this.handleWebglContextRestored)\n\n      // Using maps makes these compact in release\n      this._blendOperationMap = {\n        [Graphics.BlendOperation.ZERO]: this._gl.ZERO,\n        [Graphics.BlendOperation.ONE]: this._gl.ONE,\n\n        [Graphics.BlendOperation.SOURCE_COLOR]: this._gl.SRC_COLOR,\n        [Graphics.BlendOperation.TARGET_COLOR]: this._gl.DST_COLOR,\n        [Graphics.BlendOperation.INVERSE_SOURCE_COLOR]: this._gl.ONE_MINUS_SRC_COLOR,\n        [Graphics.BlendOperation.INVERSE_TARGET_COLOR]: this._gl.ONE_MINUS_DST_COLOR,\n\n        [Graphics.BlendOperation.SOURCE_ALPHA]: this._gl.SRC_ALPHA,\n        [Graphics.BlendOperation.TARGET_ALPHA]: this._gl.DST_ALPHA,\n        [Graphics.BlendOperation.INVERSE_SOURCE_ALPHA]: this._gl.ONE_MINUS_SRC_ALPHA,\n        [Graphics.BlendOperation.INVERSE_TARGET_ALPHA]: this._gl.ONE_MINUS_DST_ALPHA,\n\n        [Graphics.BlendOperation.CONSTANT]: this._gl.CONSTANT_COLOR,\n        [Graphics.BlendOperation.INVERSE_CONSTANT]: this._gl.ONE_MINUS_CONSTANT_COLOR,\n      }\n    }\n\n    private handleWebglContextRestored = () => {\n      this._attributeCount = 0\n      this._currentClearColor = Graphics.Color.TRANSPARENT\n      this._forceStateUpdate = true\n      this._generation++\n      for (let handler of this._contextResetHandlers) {\n        handler()\n      }\n    }\n\n    public testContextLoss() {\n      this.handleWebglContextRestored()\n    }\n\n    get gl() {\n      return this._gl\n    }\n    get generation() {\n      return this._generation\n    }\n    addContextResetHandler(callback: () => void) {\n      appendOne(this._contextResetHandlers, callback)\n    }\n    removeContextResetHandler(callback: () => void) {\n      removeOne(this._contextResetHandlers, callback)\n    }\n\n    get currentRenderTarget() {\n      return this._currentRenderTarget\n    }\n\n    beginFrame() {\n      this.setRenderTarget(null)\n    }\n\n    endFrame() {}\n\n    setBlendState(source: Graphics.BlendOperation, target: Graphics.BlendOperation) {\n      this._blendOperations = Context._packBlendModes(source, target)\n    }\n\n    setViewport(x: number, y: number, width: number, height: number) {\n      ;(this._currentRenderTarget != null\n        ? this._currentRenderTarget.viewport\n        : this._defaultViewport\n      ).set(x, y, width, height)\n    }\n\n    get viewport() {\n      return this._currentRenderTarget != null\n        ? this._currentRenderTarget.viewport\n        : this._defaultViewport\n    }\n\n    get renderTargetWidthInPixels() {\n      return this._currentRenderTarget != null\n        ? this._currentRenderTarget.viewport.width\n        : this._width\n    }\n\n    get renderTargetHeightInPixels() {\n      return this._currentRenderTarget != null\n        ? this._currentRenderTarget.viewport.height\n        : this._height\n    }\n\n    draw(\n      primitive: Graphics.Primitive,\n      material: Graphics.Material,\n      vertices: Graphics.VertexBuffer,\n    ) {\n      // Update the texture set before preparing the material so uniform samplers can check for that they use different textures\n      this._updateRenderTargetAndViewport()\n      Material.from(material).prepare()\n\n      // Update the vertex buffer before updating the format so attributes can bind correctly\n      VertexBuffer.from(vertices).prepare()\n      this._updateFormat(material.format)\n\n      // Draw now that everything is ready\n      this._updateBlendState()\n\n      this._gl.drawArrays(\n        primitive == Graphics.Primitive.TRIANGLES ? this._gl.TRIANGLES : this._gl.TRIANGLE_STRIP,\n        0,\n        Math.floor(vertices.byteCount / material.format.stride),\n      )\n\n      // Forced state updates are done once after a context loss\n      this._forceStateUpdate = false\n    }\n\n    resize(\n      widthInPixels: number,\n      heightInPixels: number,\n      widthInAppUnits: number,\n      heightInAppUnits: number,\n    ) {\n      const bounds = this._gl.canvas.getBoundingClientRect()\n\n      if (\n        this._width === widthInAppUnits &&\n        this._height === heightInPixels &&\n        bounds.width === widthInAppUnits &&\n        bounds.height === heightInAppUnits\n      ) {\n        // Nothing to do here!\n        return\n      }\n\n      let canvas = this._gl.canvas\n      let style = canvas.style\n      canvas.width = widthInPixels\n      canvas.height = heightInPixels\n      style.width = `${widthInAppUnits}px`\n      style.height = `${heightInAppUnits}px`\n      this.setViewport(0, 0, widthInPixels, heightInPixels)\n      this._width = widthInPixels\n      this._height = heightInPixels\n    }\n\n    clear(color: Graphics.Color) {\n      this._updateRenderTargetAndViewport()\n      this._updateBlendState()\n\n      if (color != this._currentClearColor) {\n        this._gl.clearColor(color.redF, color.greenF, color.blueF, color.alphaF)\n        this._currentClearColor = color\n      }\n\n      this._gl.clear(this._gl.COLOR_BUFFER_BIT)\n    }\n\n    setRenderTarget(renderTarget: Graphics.RenderTarget | null) {\n      this._currentRenderTarget = RenderTarget.from(renderTarget)\n    }\n\n    createMaterial(\n      format: Graphics.VertexFormat,\n      vertexSource: string,\n      fragmentSource: string,\n    ): Graphics.Material {\n      let material = new Material(this, format, vertexSource, fragmentSource)\n\n      // Compiling shaders is really expensive so we want to get that started\n      // as early as possible. In Chrome and possibly other browsers, shader\n      // compilation can happen asynchronously as long as you don't call\n      // useProgram().\n      //\n      //   https://plus.google.com/+BrandonJonesToji/posts/4ERHkicC5Ny\n      //\n      material.program\n\n      return material\n    }\n\n    createVertexBuffer(byteCount: number): Graphics.VertexBuffer {\n      assert(byteCount > 0 && byteCount % 4 == 0)\n      return new VertexBuffer(this, byteCount)\n    }\n\n    createTexture(\n      format: Graphics.TextureFormat,\n      width: number,\n      height: number,\n      pixels?: Uint8Array,\n    ): Graphics.Texture {\n      return new Texture(this, format, width, height, pixels)\n    }\n\n    createRenderTarget(texture: Graphics.Texture): Graphics.RenderTarget {\n      return new RenderTarget(this, Texture.from(texture))\n    }\n\n    private ANGLE_instanced_arrays: ANGLE_instanced_arrays | null = null\n    private ANGLE_instanced_arrays_generation: number = -1\n    getANGLE_instanced_arrays(): ANGLE_instanced_arrays {\n      if (this.ANGLE_instanced_arrays_generation !== this._generation) {\n        this.ANGLE_instanced_arrays = null\n      }\n      if (!this.ANGLE_instanced_arrays) {\n        this.ANGLE_instanced_arrays = this.gl.getExtension('ANGLE_instanced_arrays')\n        if (!this.ANGLE_instanced_arrays) {\n          throw new Error('Failed to get extension ANGLE_instanced_arrays')\n        }\n      }\n      return this.ANGLE_instanced_arrays!\n    }\n\n    _updateRenderTargetAndViewport() {\n      let renderTarget = this._currentRenderTarget\n      let viewport = renderTarget != null ? renderTarget.viewport : this._defaultViewport\n      let gl = this._gl\n\n      if (this._forceStateUpdate || this._oldRenderTarget != renderTarget) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget ? renderTarget.framebuffer : null)\n        this._oldRenderTarget = renderTarget\n      }\n\n      if (this._forceStateUpdate || !this._oldViewport.equals(viewport)) {\n        gl.viewport(\n          viewport.x,\n          this.renderTargetHeightInPixels - viewport.y - viewport.height,\n          viewport.width,\n          viewport.height,\n        )\n        this._oldViewport.set(viewport.x, viewport.y, viewport.width, viewport.height)\n      }\n    }\n\n    _updateBlendState() {\n      if (this._forceStateUpdate || this._oldBlendOperations != this._blendOperations) {\n        let gl = this._gl\n        let operations = this._blendOperations\n        let oldOperations = this._oldBlendOperations\n        let source = (operations & 0xf) as Graphics.BlendOperation\n        let target = (operations >> 4) as Graphics.BlendOperation\n\n        assert(source in this._blendOperationMap)\n        assert(target in this._blendOperationMap)\n\n        // Special-case the blend mode that just writes over the target buffer\n        if (operations == Context.COPY_BLEND_OPERATIONS) {\n          gl.disable(gl.BLEND)\n        } else {\n          if (this._forceStateUpdate || oldOperations == Context.COPY_BLEND_OPERATIONS) {\n            gl.enable(gl.BLEND)\n          }\n\n          // Otherwise, use actual blending\n          gl.blendFunc(this._blendOperationMap[source], this._blendOperationMap[target])\n        }\n\n        this._oldBlendOperations = operations\n      }\n    }\n\n    _updateFormat(format: Graphics.VertexFormat) {\n      // Update the attributes\n      let gl = this._gl\n      let attributes = format.attributes\n      let count = attributes.length\n      for (let i = 0; i < count; i++) {\n        let attribute = attributes[i]\n        let isByte = attribute.type == Graphics.AttributeType.BYTE\n        gl.vertexAttribPointer(\n          i,\n          attribute.count,\n          isByte ? gl.UNSIGNED_BYTE : gl.FLOAT,\n          isByte,\n          format.stride,\n          attribute.byteOffset,\n        )\n      }\n\n      // Update the attribute count\n      while (this._attributeCount < count) {\n        gl.enableVertexAttribArray(this._attributeCount)\n        this._attributeCount++\n      }\n      while (this._attributeCount > count) {\n        this._attributeCount--\n        gl.disableVertexAttribArray(this._attributeCount)\n      }\n      this._attributeCount = count\n    }\n\n    getWebGLInfo(): {renderer: string | null; vendor: string | null; version: string | null} {\n      const ext = this.gl.getExtension('WEBGL_debug_renderer_info')\n      const renderer = ext ? this.gl.getParameter(ext.UNMASKED_RENDERER_WEBGL) : null\n      const vendor = ext ? this.gl.getParameter(ext.UNMASKED_VENDOR_WEBGL) : null\n      const version = this.gl.getParameter(this.gl.VERSION)\n      return {renderer, vendor, version}\n    }\n\n    static from(context: Graphics.Context): Context {\n      assert(context == null || context instanceof Context)\n      return context as Context\n    }\n\n    static _packBlendModes(\n      source: Graphics.BlendOperation,\n      target: Graphics.BlendOperation,\n    ): number {\n      return source | (target << 4)\n    }\n\n    static COPY_BLEND_OPERATIONS = Context._packBlendModes(\n      Graphics.BlendOperation.ONE,\n      Graphics.BlendOperation.ZERO,\n    )\n  }\n\n  abstract class Uniform {\n    constructor(\n      protected readonly _material: Material,\n      protected readonly _name: string,\n      protected _generation = 0,\n      protected _location: WebGLUniformLocation | null = null,\n      protected _isDirty = true,\n    ) {}\n\n    // Upload this uniform if it's dirty\n    abstract prepare(): void\n\n    get location(): WebGLUniformLocation {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation) {\n        this._location = context.gl.getUniformLocation(this._material.program, this._name)\n        this._generation = context.generation\n\n        // Validate the shader against this uniform\n        if (!RELEASE) {\n          let program = this._material.program\n          let gl = context.gl\n          for (let i = 0, ii = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS); i < ii; i++) {\n            let info = gl.getActiveUniform(program, i)\n            if (info && info.name == this._name) {\n              assert(info.size == 1)\n              switch (info.type) {\n                case gl.FLOAT: {\n                  assert(this instanceof UniformFloat)\n                  break\n                }\n                case gl.FLOAT_MAT3: {\n                  assert(this instanceof UniformMat3)\n                  break\n                }\n                case gl.FLOAT_VEC2: {\n                  assert(this instanceof UniformVec2)\n                  break\n                }\n                case gl.FLOAT_VEC3: {\n                  assert(this instanceof UniformVec3)\n                  break\n                }\n                case gl.FLOAT_VEC4: {\n                  assert(this instanceof UniformVec4)\n                  break\n                }\n                case gl.INT: {\n                  assert(this instanceof UniformInt)\n                  break\n                }\n                case gl.SAMPLER_2D: {\n                  assert(this instanceof UniformSampler)\n                  break\n                }\n                default:\n                  assert(false)\n              }\n            }\n          }\n        }\n      }\n      if (!this._location) {\n        throw new Error('Failed to get uniform location')\n      }\n      return this._location\n    }\n  }\n\n  class UniformFloat extends Uniform {\n    private _x = 0.0\n\n    set(x: number) {\n      if (x != this._x) {\n        this._x = x\n        this._isDirty = true\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation || this._isDirty) {\n        context.gl.uniform1f(this.location, this._x)\n        this._isDirty = false\n      }\n    }\n  }\n\n  class UniformInt extends Uniform {\n    private _x = 0\n\n    set(x: number) {\n      if (x != this._x) {\n        this._x = x\n        this._isDirty = true\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation || this._isDirty) {\n        context.gl.uniform1i(this.location, this._x)\n        this._isDirty = false\n      }\n    }\n  }\n\n  class UniformVec2 extends Uniform {\n    private _x = 0.0\n    private _y = 0.0\n\n    set(x: number, y: number) {\n      if (x != this._x || y != this._y) {\n        this._x = x\n        this._y = y\n        this._isDirty = true\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation || this._isDirty) {\n        context.gl.uniform2f(this.location, this._x, this._y)\n        this._isDirty = false\n      }\n    }\n  }\n\n  class UniformVec3 extends Uniform {\n    private _x = 0.0\n    private _y = 0.0\n    private _z = 0.0\n\n    set(x: number, y: number, z: number) {\n      if (x != this._x || y != this._y || z != this._z) {\n        this._x = x\n        this._y = y\n        this._z = z\n        this._isDirty = true\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation || this._isDirty) {\n        context.gl.uniform3f(this.location, this._x, this._y, this._z)\n        this._isDirty = false\n      }\n    }\n  }\n\n  class UniformVec4 extends Uniform {\n    private _x = 0.0\n    private _y = 0.0\n    private _z = 0.0\n    private _w = 0.0\n\n    set(x: number, y: number, z: number, w: number) {\n      if (x != this._x || y != this._y || z != this._z || w != this._w) {\n        this._x = x\n        this._y = y\n        this._z = z\n        this._w = w\n        this._isDirty = true\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation || this._isDirty) {\n        context.gl.uniform4f(this.location, this._x, this._y, this._z, this._w)\n        this._isDirty = false\n      }\n    }\n  }\n\n  class UniformMat3 extends Uniform {\n    private _values = [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]\n\n    set(\n      m00: number,\n      m01: number,\n      m02: number,\n      m10: number,\n      m11: number,\n      m12: number,\n      m20: number,\n      m21: number,\n      m22: number,\n    ) {\n      // These values are deliberately transposed because WebGL requires the \"transpose\" argument of uniformMatrix() to be false\n      UniformMat3._cachedValues[0] = m00\n      UniformMat3._cachedValues[1] = m10\n      UniformMat3._cachedValues[2] = m20\n      UniformMat3._cachedValues[3] = m01\n      UniformMat3._cachedValues[4] = m11\n      UniformMat3._cachedValues[5] = m21\n      UniformMat3._cachedValues[6] = m02\n      UniformMat3._cachedValues[7] = m12\n      UniformMat3._cachedValues[8] = m22\n\n      for (let i = 0; i < 9; i++) {\n        if (UniformMat3._cachedValues[i] != this._values[i]) {\n          let swap = this._values\n          this._values = UniformMat3._cachedValues\n          UniformMat3._cachedValues = swap\n          this._isDirty = true\n          break\n        }\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      if (this._generation != context.generation || this._isDirty) {\n        context.gl.uniformMatrix3fv(this.location, false, this._values)\n        this._isDirty = false\n      }\n    }\n\n    // Statically allocate this to avoid allocations\n    static _cachedValues = [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]\n  }\n\n  class UniformSampler extends Uniform {\n    private _texture: Texture | null = null\n    private _index = -1\n\n    set(texture: Graphics.Texture, index: number) {\n      if (this._texture != texture || this._index != index) {\n        this._texture = Texture.from(texture)\n        this._index = index\n        this._isDirty = true\n      }\n    }\n\n    prepare() {\n      let context = Context.from(this._material.context)\n      let gl = context.gl\n      assert(\n        this._texture == null ||\n          context.currentRenderTarget == null ||\n          this._texture != context.currentRenderTarget.texture,\n      )\n      if (this._generation != context.generation || this._isDirty) {\n        gl.uniform1i(this.location, this._index)\n        this._isDirty = false\n      }\n      gl.activeTexture(TEXTURE_N(gl, this._index))\n      gl.bindTexture(\n        gl.TEXTURE_2D,\n        this._texture != null && this._texture.width > 0 && this._texture.height > 0\n          ? this._texture.texture\n          : null,\n      )\n    }\n  }\n\n  class Material implements Graphics.Material {\n    constructor(\n      private readonly _context: Context,\n      private readonly _format: Graphics.VertexFormat,\n      private readonly _vertexSource: string,\n      private readonly _fragmentSource: string,\n      private readonly _uniformsMap: {[key: string]: Uniform} = {},\n      private readonly _uniformsList: Uniform[] = [],\n      private _generation = 0,\n      private _program: WebGLProgram | null = null,\n    ) {}\n\n    get context() {\n      return this._context\n    }\n    get format() {\n      return this._format\n    }\n    get vertexSource() {\n      return this._vertexSource\n    }\n    get fragmentSource() {\n      return this._fragmentSource\n    }\n\n    setUniformFloat(name: string, x: number) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformFloat(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformFloat)\n      ;(uniform as UniformFloat).set(x)\n    }\n\n    setUniformInt(name: string, x: number) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformInt(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformInt)\n      ;(uniform as UniformInt).set(x)\n    }\n\n    setUniformVec2(name: string, x: number, y: number) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformVec2(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformVec2)\n      ;(uniform as UniformVec2).set(x, y)\n    }\n\n    setUniformVec3(name: string, x: number, y: number, z: number) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformVec3(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformVec3)\n      ;(uniform as UniformVec3).set(x, y, z)\n    }\n\n    setUniformVec4(name: string, x: number, y: number, z: number, w: number) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformVec4(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformVec4)\n      ;(uniform as UniformVec4).set(x, y, z, w)\n    }\n\n    setUniformMat3(\n      name: string,\n      m00: number,\n      m01: number,\n      m02: number,\n      m10: number,\n      m11: number,\n      m12: number,\n      m20: number,\n      m21: number,\n      m22: number,\n    ) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformMat3(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformMat3)\n      ;(uniform as UniformMat3).set(m00, m01, m02, m10, m11, m12, m20, m21, m22)\n    }\n\n    setUniformSampler(name: string, texture: Graphics.Texture, index: number) {\n      let uniform = this._uniformsMap[name] || null\n      if (uniform == null) {\n        uniform = new UniformSampler(this, name)\n        this._uniformsMap[name] = uniform\n        this._uniformsList.push(uniform)\n      }\n      assert(uniform instanceof UniformSampler)\n      ;(uniform as UniformSampler).set(texture, index)\n    }\n\n    get program(): WebGLProgram {\n      let gl = this._context.gl\n      if (this._generation != this._context.generation) {\n        this._program = gl.createProgram()!\n        this._compileShader(gl, gl.VERTEX_SHADER, this.vertexSource)\n        this._compileShader(gl, gl.FRAGMENT_SHADER, this.fragmentSource)\n        let attributes = this.format.attributes\n        for (let i = 0; i < attributes.length; i++) {\n          gl.bindAttribLocation(this._program, i, attributes[i].name)\n        }\n        gl.linkProgram(this._program)\n        if (!gl.getProgramParameter(this._program, gl.LINK_STATUS)) {\n          throw new Error(`${gl.getProgramInfoLog(this._program)}`)\n        }\n        this._generation = this._context.generation\n\n        // Validate this shader against the format\n        if (!RELEASE) {\n          for (let attribute of attributes) {\n            for (\n              let i = 0, ii = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\n              i < ii;\n              i++\n            ) {\n              let info = gl.getActiveAttrib(this.program, i)\n              if (info && info.name == attribute.name) {\n                assert(info.size == 1)\n                switch (attribute.count) {\n                  case 1: {\n                    assert(info.type == gl.FLOAT)\n                    break\n                  }\n                  case 2: {\n                    assert(info.type == gl.FLOAT_VEC2)\n                    break\n                  }\n                  case 3: {\n                    assert(info.type == gl.FLOAT_VEC3)\n                    break\n                  }\n                  case 4: {\n                    assert(info.type == gl.FLOAT_VEC4)\n                    break\n                  }\n                  default: {\n                    assert(false)\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      return this._program!\n    }\n\n    prepare(): void {\n      this._context.gl.useProgram(this.program)\n      for (let uniform of this._uniformsList) {\n        uniform.prepare()\n      }\n    }\n\n    _compileShader(gl: WebGLRenderingContext, type: GLenum, source: string) {\n      let shader = gl.createShader(type)\n      gl.shaderSource(shader, source)\n      gl.compileShader(shader)\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        throw new Error(`${gl.getShaderInfoLog(shader)}`)\n      }\n      gl.attachShader(this._program, shader)\n    }\n\n    static from(material: Graphics.Material): Material {\n      assert(material == null || material instanceof Material)\n      return material as Material\n    }\n  }\n\n  class VertexBuffer extends Graphics.VertexBuffer {\n    private readonly _context: Context\n    private _generation = 0\n    private _buffer: WebGLBuffer | null = null\n    private _bytes: Uint8Array | null = null\n    private _isDirty = true\n    private _dirtyMin = VertexBuffer.INT_MAX\n    private _dirtyMax = 0\n    private _totalMin = VertexBuffer.INT_MAX\n    private _totalMax = 0\n    private _byteCount = 0\n\n    constructor(context: Context, byteCount: number) {\n      super()\n      this._context = context\n      this._byteCount = byteCount\n      this._bytes = new Uint8Array(byteCount)\n    }\n\n    get context() {\n      return this._context\n    }\n    get byteCount() {\n      return this._byteCount\n    }\n\n    move(sourceByteOffset: number, targetByteOffset: number, byteCount: number) {\n      assert(byteCount >= 0)\n      assert(0 <= sourceByteOffset && sourceByteOffset + byteCount <= this._byteCount)\n      assert(0 <= targetByteOffset && targetByteOffset + byteCount <= this._byteCount)\n\n      if (this._bytes && sourceByteOffset != targetByteOffset && byteCount != 0) {\n        this._bytes.set(this._bytes.subarray(sourceByteOffset, this._byteCount), targetByteOffset)\n        this._growDirtyRegion(\n          Math.min(sourceByteOffset, targetByteOffset),\n          Math.max(sourceByteOffset, targetByteOffset) + byteCount,\n        )\n      }\n    }\n\n    upload(bytes: Uint8Array, byteOffset: number = 0) {\n      assert(0 <= byteOffset && byteOffset + bytes.length <= this._byteCount)\n      assert(this._bytes != null)\n      this._bytes!.set(bytes, byteOffset)\n      this._growDirtyRegion(byteOffset, byteOffset + bytes.length)\n    }\n\n    free() {\n      if (this._buffer) {\n        this._context.gl.deleteBuffer(this._buffer)\n      }\n\n      // Reset the generation to force this to be re-uploaded if it's used again\n      // in the future.\n      this._generation = 0\n    }\n\n    prepare(): void {\n      let gl = this._context.gl\n\n      if (this._generation !== this._context.generation) {\n        this._buffer = gl.createBuffer()\n        this._generation = this._context.generation\n        this._isDirty = true\n      }\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._buffer)\n\n      if (this._isDirty) {\n        gl.bufferData(gl.ARRAY_BUFFER, this._byteCount, gl.DYNAMIC_DRAW)\n        this._dirtyMin = this._totalMin\n        this._dirtyMax = this._totalMax\n        this._isDirty = false\n      }\n\n      if (this._dirtyMin < this._dirtyMax) {\n        gl.bufferSubData(\n          gl.ARRAY_BUFFER,\n          this._dirtyMin,\n          this._bytes!.subarray(this._dirtyMin, this._dirtyMax),\n        )\n        this._dirtyMin = VertexBuffer.INT_MAX\n        this._dirtyMax = 0\n      }\n    }\n\n    _growDirtyRegion(min: number, max: number) {\n      this._dirtyMin = Math.min(this._dirtyMin, min)\n      this._dirtyMax = Math.max(this._dirtyMax, max)\n      this._totalMin = Math.min(this._totalMin, min)\n      this._totalMax = Math.max(this._totalMax, max)\n    }\n\n    static INT_MAX = 0x7fffffff\n\n    static from(buffer: Graphics.VertexBuffer): VertexBuffer {\n      assert(buffer == null || buffer instanceof VertexBuffer)\n      return buffer as VertexBuffer\n    }\n  }\n\n  class Texture implements Graphics.Texture {\n    constructor(\n      private readonly _context: Context,\n      private _format: Graphics.TextureFormat,\n      private _width: number,\n      private _height: number,\n      private _pixels: Uint8Array | null = null,\n      private _texture: WebGLTexture | null = null,\n      private _generation = 0,\n      private _isFormatDirty = true,\n      private _isContentDirty = true,\n    ) {}\n\n    get context() {\n      return this._context\n    }\n    get format() {\n      return this._format\n    }\n    get width() {\n      return this._width\n    }\n    get height() {\n      return this._height\n    }\n\n    resize(width: number, height: number, pixels: Uint8Array | null = null) {\n      this._width = width\n      this._height = height\n      this._pixels = pixels\n      this._isContentDirty = true\n    }\n\n    setFormat(format: Graphics.TextureFormat) {\n      if (this._format != format) {\n        this._format = format\n        this._isFormatDirty = true\n      }\n    }\n\n    get texture(): WebGLTexture {\n      let gl = this._context.gl\n\n      // Create\n      if (this._generation != this._context.generation) {\n        this._texture = gl.createTexture()\n        this._generation = this._context.generation\n        this._isFormatDirty = true\n        this._isContentDirty = true\n      }\n\n      // Format\n      if (this._isFormatDirty) {\n        gl.bindTexture(gl.TEXTURE_2D, this._texture)\n        gl.texParameteri(\n          gl.TEXTURE_2D,\n          gl.TEXTURE_MAG_FILTER,\n          this.format.magFilter == Graphics.PixelFilter.NEAREST ? gl.NEAREST : gl.LINEAR,\n        )\n        gl.texParameteri(\n          gl.TEXTURE_2D,\n          gl.TEXTURE_MIN_FILTER,\n          this.format.minFilter == Graphics.PixelFilter.NEAREST ? gl.NEAREST : gl.LINEAR,\n        )\n        gl.texParameteri(\n          gl.TEXTURE_2D,\n          gl.TEXTURE_WRAP_S,\n          this.format.wrap == Graphics.PixelWrap.REPEAT ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n        )\n        gl.texParameteri(\n          gl.TEXTURE_2D,\n          gl.TEXTURE_WRAP_T,\n          this.format.wrap == Graphics.PixelWrap.REPEAT ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n        )\n        this._isFormatDirty = false\n      }\n\n      if (this._isContentDirty) {\n        gl.bindTexture(gl.TEXTURE_2D, this._texture)\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          0,\n          gl.RGBA,\n          this._width,\n          this._height,\n          0,\n          gl.RGBA,\n          gl.UNSIGNED_BYTE,\n          this._pixels,\n        )\n        this._isContentDirty = false\n      }\n\n      return this._texture!\n    }\n\n    free() {\n      if (this.texture) {\n        this._context.gl.deleteTexture(this.texture)\n        this._generation = 0\n      }\n    }\n\n    static from(texture: Graphics.Texture): Texture {\n      assert(texture == null || texture instanceof Texture)\n      return texture as Texture\n    }\n  }\n\n  class RenderTarget implements Graphics.RenderTarget {\n    constructor(\n      private _context: Context,\n      private _texture: Texture,\n      private _framebuffer: WebGLFramebuffer | null = null,\n      private _generation = 0,\n      private _isDirty = true,\n      private _viewport = new Graphics.Rect(),\n    ) {}\n\n    get context() {\n      return this._context\n    }\n    get texture() {\n      return this._texture\n    }\n    get viewport() {\n      return this._viewport\n    }\n    setColor(texture: Graphics.Texture) {\n      if (this._texture != texture) {\n        this._texture = Texture.from(texture)\n        this._isDirty = true\n      }\n    }\n\n    get framebuffer(): WebGLFramebuffer {\n      let gl = this._context.gl\n      let texture = this._texture.texture\n\n      // Create\n      if (this._generation != this._context.generation) {\n        this._framebuffer = gl.createFramebuffer()\n        this._generation = this._context.generation\n        this._isDirty = true\n      }\n\n      // Update\n      if (this._isDirty) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._framebuffer)\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0)\n        assert(gl.checkFramebufferStatus(gl.FRAMEBUFFER) == gl.FRAMEBUFFER_COMPLETE)\n        this._isDirty = false\n      }\n\n      return this._framebuffer!\n    }\n\n    free() {\n      if (this._framebuffer) {\n        this._context.gl.deleteFramebuffer(this._framebuffer)\n        this._generation = 0\n      }\n    }\n\n    static from(renderTarget: Graphics.RenderTarget | null): RenderTarget | null {\n      assert(renderTarget == null || renderTarget instanceof RenderTarget)\n      return renderTarget as RenderTarget | null\n    }\n  }\n}\n","import {Graphics} from './graphics'\nimport {AffineTransform, Vec2} from '../lib/math'\n\nexport function setUniformAffineTransform(\n  material: Graphics.Material,\n  name: string,\n  transform: AffineTransform,\n) {\n  let {m00, m01, m02, m10, m11, m12} = transform\n  material.setUniformMat3(name, m00, m01, m02, m10, m11, m12, 0, 0, 1)\n}\nexport function setUniformVec2(material: Graphics.Material, name: string, vec: Vec2) {\n  material.setUniformVec2(name, vec.x, vec.y)\n}\n\nexport function renderInto(gl: Graphics.Context, target: Graphics.RenderTarget, cb: () => void) {\n  gl.setRenderTarget(target)\n  gl.setViewport(0, 0, target.texture.width, target.texture.height)\n  cb()\n  gl.setRenderTarget(null)\n}\n","import {Rect, Vec2, AffineTransform} from '../lib/math'\nimport {Color} from '../lib/color'\nimport {Graphics} from './graphics'\nimport {setUniformAffineTransform} from './utils'\n\nconst vertexFormat = new Graphics.VertexFormat()\nvertexFormat.add('configSpacePos', Graphics.AttributeType.FLOAT, 2)\nvertexFormat.add('color', Graphics.AttributeType.FLOAT, 3)\n\nconst vert = `\n  uniform mat3 configSpaceToNDC;\n\n  attribute vec2 configSpacePos;\n  attribute vec3 color;\n  varying vec3 vColor;\n\n  void main() {\n    vColor = color;\n    vec2 position = (configSpaceToNDC * vec3(configSpacePos, 1)).xy;\n    gl_Position = vec4(position, 1, 1);\n  }\n`\n\nconst frag = `\n  precision mediump float;\n  varying vec3 vColor;\n\n  void main() {\n    gl_FragColor = vec4(vColor.rgb, 1);\n  }\n`\n\nexport class RectangleBatch {\n  private rects: Rect[] = []\n  private colors: Color[] = []\n  constructor(private gl: Graphics.Context) {}\n\n  getRectCount() {\n    return this.rects.length\n  }\n\n  private buffer: Graphics.VertexBuffer | null = null\n  getBuffer(): Graphics.VertexBuffer {\n    if (this.buffer) {\n      return this.buffer\n    }\n\n    const corners = [[0, 0], [1, 0], [0, 1], [1, 0], [0, 1], [1, 1]]\n\n    const bytes = new Uint8Array(vertexFormat.stride * corners.length * this.rects.length)\n    const floats = new Float32Array(bytes.buffer)\n    let idx = 0\n\n    for (let i = 0; i < this.rects.length; i++) {\n      const rect = this.rects[i]\n      const color = this.colors[i]\n\n      // TODO(jlfwong): In the conversion from regl to graphics.ts, I lost the\n      // ability to do instanced drawing. This is a pretty significant hit to\n      // the performance here since I need 6x the memory to allocate these\n      // things. Adding instanced drawing to graphics.ts is non-trivial, so I'm\n      // just going to try this for now.\n      for (let corner of corners) {\n        floats[idx++] = rect.origin.x + corner[0] * rect.size.x\n        floats[idx++] = rect.origin.y + corner[1] * rect.size.y\n\n        floats[idx++] = color.r\n        floats[idx++] = color.g\n        floats[idx++] = color.b\n      }\n    }\n\n    if (idx !== floats.length) {\n      throw new Error(\"Buffer expected to be full but wasn't\")\n    }\n\n    this.buffer = this.gl.createVertexBuffer(bytes.length)\n    this.buffer.upload(bytes)\n    return this.buffer\n  }\n\n  addRect(rect: Rect, color: Color) {\n    this.rects.push(rect)\n    this.colors.push(color)\n\n    if (this.buffer) {\n      this.buffer.free()\n      this.buffer = null\n    }\n  }\n\n  free() {\n    if (this.buffer) {\n      this.buffer.free()\n      this.buffer = null\n    }\n  }\n}\n\nexport interface RectangleBatchRendererProps {\n  batch: RectangleBatch\n  configSpaceSrcRect: Rect\n  physicalSpaceDstRect: Rect\n}\n\nexport class RectangleBatchRenderer {\n  material: Graphics.Material\n  constructor(private gl: Graphics.Context) {\n    this.material = gl.createMaterial(vertexFormat, vert, frag)\n  }\n\n  render(props: RectangleBatchRendererProps) {\n    setUniformAffineTransform(\n      this.material,\n      'configSpaceToNDC',\n      (() => {\n        const configToPhysical = AffineTransform.betweenRects(\n          props.configSpaceSrcRect,\n          props.physicalSpaceDstRect,\n        )\n\n        const viewportSize = new Vec2(this.gl.viewport.width, this.gl.viewport.height)\n\n        const physicalToNDC = AffineTransform.withTranslation(new Vec2(-1, 1)).times(\n          AffineTransform.withScale(new Vec2(2, -2).dividedByPointwise(viewportSize)),\n        )\n\n        return physicalToNDC.times(configToPhysical)\n      })(),\n    )\n\n    this.gl.setUnpremultipliedBlendState()\n    this.gl.draw(Graphics.Primitive.TRIANGLES, this.material, props.batch.getBuffer())\n  }\n}\n","import {clamp} from './math'\n\nexport class Color {\n  constructor(\n    readonly r: number = 0,\n    readonly g: number = 0,\n    readonly b: number = 0,\n    readonly a: number = 1,\n  ) {}\n\n  static fromLumaChromaHue(L: number, C: number, H: number) {\n    // 0 <= L <= 1\n    // 0 <= C <= 1\n    // 0 <= H <= 360\n    // https://en.wikipedia.org/wiki/HSL_and_HSV#From_luma/chroma/hue\n\n    const hPrime = H / 60\n    const X = C * (1 - Math.abs(hPrime % 2 - 1))\n    const [R1, G1, B1] =\n      hPrime < 1\n        ? [C, X, 0]\n        : hPrime < 2\n          ? [X, C, 0]\n          : hPrime < 3\n            ? [0, C, X]\n            : hPrime < 4\n              ? [0, X, C]\n              : hPrime < 5\n                ? [X, 0, C]\n                : [C, 0, X]\n\n    const m = L - (0.3 * R1 + 0.59 * G1 + 0.11 * B1)\n\n    return new Color(clamp(R1 + m, 0, 1), clamp(G1 + m, 0, 1), clamp(B1 + m, 0, 1), 1.0)\n  }\n\n  toCSS(): string {\n    return `rgba(${(255 * this.r).toFixed()}, ${(255 * this.g).toFixed()}, ${(\n      255 * this.b\n    ).toFixed()}, ${this.a.toFixed(2)})`\n  }\n}\n","import {LRUCache} from '../lib/lru-cache'\nimport {RectangleBatch, RectangleBatchRenderer} from './rectangle-batch-renderer'\nimport {Rect, Vec2} from '../lib/math'\nimport {Color} from '../lib/color'\nimport {Graphics} from './graphics'\nimport {TextureRenderer} from './texture-renderer'\nimport {renderInto} from './utils'\n\nexport class RowAtlas<K> {\n  private texture: Graphics.Texture\n  private renderTarget: Graphics.RenderTarget\n  private rowCache: LRUCache<K, number>\n  private clearLineBatch: RectangleBatch\n\n  constructor(\n    private gl: Graphics.Context,\n    private rectangleBatchRenderer: RectangleBatchRenderer,\n    private textureRenderer: TextureRenderer,\n  ) {\n    this.texture = gl.createTexture(Graphics.TextureFormat.NEAREST_CLAMP, 4096, 4096)\n    this.renderTarget = gl.createRenderTarget(this.texture)\n    this.rowCache = new LRUCache(this.texture.height)\n    this.clearLineBatch = new RectangleBatch(gl)\n    this.clearLineBatch.addRect(Rect.unit, new Color(0, 0, 0, 0))\n\n    // All of the cached data is stored GPU-side, and we don't retain a copy of\n    // it client-side. This means when we get a context loss event, the data is\n    // totally gone. So let's clear our CPU-side cache to reflect that fact.\n    gl.addContextResetHandler(() => {\n      this.rowCache.clear()\n    })\n  }\n\n  has(key: K) {\n    return this.rowCache.has(key)\n  }\n  getResolution() {\n    return this.texture.width\n  }\n  getCapacity() {\n    return this.texture.height\n  }\n\n  private allocateLine(key: K): number {\n    if (this.rowCache.getSize() < this.rowCache.getCapacity()) {\n      // Not in cache, but cache isn't full\n      const row = this.rowCache.getSize()\n      this.rowCache.insert(key, row)\n      return row\n    } else {\n      // Not in cache, and cache is full. Evict something.\n      const [, row] = this.rowCache.removeLRU()!\n      this.rowCache.insert(key, row)\n      return row\n    }\n  }\n\n  writeToAtlasIfNeeded(keys: K[], render: (textureDstRect: Rect, key: K) => void) {\n    renderInto(this.gl, this.renderTarget, () => {\n      for (let key of keys) {\n        let row = this.rowCache.get(key)\n        if (row != null) {\n          // Already cached!\n          continue\n        }\n        // Not cached -- we'll have to actually render\n        row = this.allocateLine(key)\n\n        const textureRect = new Rect(new Vec2(0, row), new Vec2(this.texture.width, 1))\n        this.rectangleBatchRenderer.render({\n          batch: this.clearLineBatch,\n          configSpaceSrcRect: Rect.unit,\n          physicalSpaceDstRect: textureRect,\n        })\n        render(textureRect, key)\n      }\n    })\n  }\n\n  renderViaAtlas(key: K, dstRect: Rect): boolean {\n    let row = this.rowCache.get(key)\n    if (row == null) {\n      return false\n    }\n\n    const textureRect = new Rect(new Vec2(0, row), new Vec2(this.texture.width, 1))\n\n    // At this point, we have the row in cache, and we can\n    // paint directly from it into the framebuffer.\n    this.textureRenderer.render({\n      texture: this.texture,\n      srcRect: textureRect,\n      dstRect: dstRect,\n    })\n    return true\n  }\n}\n","import {Vec2, Rect, AffineTransform} from '../lib/math'\nimport {Graphics} from './graphics'\nimport {setUniformAffineTransform} from './utils'\n\nexport interface TextureRendererProps {\n  texture: Graphics.Texture\n  srcRect: Rect\n  dstRect: Rect\n}\n\nconst vert = `\n  uniform mat3 uvTransform;\n  uniform mat3 positionTransform;\n\n  attribute vec2 position;\n  attribute vec2 uv;\n  varying vec2 vUv;\n\n  void main() {\n    vUv = (uvTransform * vec3(uv, 1)).xy;\n    gl_Position = vec4((positionTransform * vec3(position, 1)).xy, 0, 1);\n  }\n`\n\nconst frag = `\n  precision mediump float;\n\n  varying vec2 vUv;\n  uniform sampler2D texture;\n\n  void main() {\n   gl_FragColor = texture2D(texture, vUv);\n  }\n`\n\nexport interface TextureRendererProps {\n  texture: Graphics.Texture\n  srcRect: Rect\n  dstRect: Rect\n}\n\nexport class TextureRenderer {\n  private buffer: Graphics.VertexBuffer\n  private material: Graphics.Material\n\n  constructor(private gl: Graphics.Context) {\n    const vertexFormat = new Graphics.VertexFormat()\n    vertexFormat.add('position', Graphics.AttributeType.FLOAT, 2)\n    vertexFormat.add('uv', Graphics.AttributeType.FLOAT, 2)\n\n    const vertices = [\n      {pos: [-1, 1], uv: [0, 1]},\n      {pos: [1, 1], uv: [1, 1]},\n      {pos: [-1, -1], uv: [0, 0]},\n      {pos: [1, -1], uv: [1, 0]},\n    ]\n    const floats: number[] = []\n    for (let v of vertices) {\n      floats.push(v.pos[0])\n      floats.push(v.pos[1])\n      floats.push(v.uv[0])\n      floats.push(v.uv[1])\n    }\n\n    this.buffer = gl.createVertexBuffer(vertexFormat.stride * vertices.length)\n    this.buffer.upload(new Uint8Array(new Float32Array(floats).buffer))\n    this.material = gl.createMaterial(vertexFormat, vert, frag)\n  }\n\n  render(props: TextureRendererProps) {\n    this.material.setUniformSampler('texture', props.texture, 0)\n    setUniformAffineTransform(\n      this.material,\n      'uvTransform',\n      (() => {\n        const {srcRect, texture} = props\n        const physicalToUV = AffineTransform.withTranslation(new Vec2(0, 1))\n          .times(AffineTransform.withScale(new Vec2(1, -1)))\n          .times(\n            AffineTransform.betweenRects(\n              new Rect(Vec2.zero, new Vec2(texture.width, texture.height)),\n              Rect.unit,\n            ),\n          )\n        const uvRect = physicalToUV.transformRect(srcRect)\n        return AffineTransform.betweenRects(Rect.unit, uvRect)\n      })(),\n    )\n    setUniformAffineTransform(\n      this.material,\n      'positionTransform',\n      (() => {\n        const {dstRect} = props\n\n        const {viewport} = this.gl\n        const viewportSize = new Vec2(viewport.width, viewport.height)\n\n        const physicalToNDC = AffineTransform.withScale(new Vec2(1, -1)).times(\n          AffineTransform.betweenRects(new Rect(Vec2.zero, viewportSize), Rect.NDC),\n        )\n        const ndcRect = physicalToNDC.transformRect(dstRect)\n        return AffineTransform.betweenRects(Rect.NDC, ndcRect)\n      })(),\n    )\n\n    this.gl.setUnpremultipliedBlendState()\n    this.gl.draw(Graphics.Primitive.TRIANGLE_STRIP, this.material, this.buffer)\n  }\n}\n","import {AffineTransform, Rect} from '../lib/math'\nimport {Graphics} from './graphics'\nimport {setUniformAffineTransform, setUniformVec2} from './utils'\n\nexport interface ViewportRectangleRendererProps {\n  configSpaceToPhysicalViewSpace: AffineTransform\n  configSpaceViewportRect: Rect\n}\n\nconst vertexFormat = new Graphics.VertexFormat()\nvertexFormat.add('position', Graphics.AttributeType.FLOAT, 2)\n\nconst vert = `\n  attribute vec2 position;\n\n  void main() {\n    gl_Position = vec4(position, 0, 1);\n  }\n`\n\nconst frag = `\n  precision mediump float;\n\n  uniform mat3 configSpaceToPhysicalViewSpace;\n  uniform vec2 physicalSize;\n  uniform vec2 physicalOrigin;\n  uniform vec2 configSpaceViewportOrigin;\n  uniform vec2 configSpaceViewportSize;\n  uniform float framebufferHeight;\n\n  void main() {\n    vec2 origin = (configSpaceToPhysicalViewSpace * vec3(configSpaceViewportOrigin, 1.0)).xy;\n    vec2 size = (configSpaceToPhysicalViewSpace * vec3(configSpaceViewportSize, 0.0)).xy;\n\n    vec2 halfSize = physicalSize / 2.0;\n\n    float borderWidth = 2.0;\n\n    origin = floor(origin * halfSize) / halfSize + borderWidth * vec2(1.0, 1.0);\n    size = floor(size * halfSize) / halfSize - 2.0 * borderWidth * vec2(1.0, 1.0);\n\n    vec2 coord = gl_FragCoord.xy;\n    coord.x = coord.x - physicalOrigin.x;\n    coord.y = framebufferHeight - coord.y - physicalOrigin.y;\n    vec2 clamped = clamp(coord, origin, origin + size);\n    vec2 gap = clamped - coord;\n    float maxdist = max(abs(gap.x), abs(gap.y));\n\n    // TOOD(jlfwong): Could probably optimize this to use mix somehow.\n    if (maxdist == 0.0) {\n      // Inside viewport rectangle\n      gl_FragColor = vec4(0, 0, 0, 0);\n    } else if (maxdist < borderWidth) {\n      // Inside viewport rectangle at border\n      gl_FragColor = vec4(0.7, 0.7, 0.7, 0.8);\n    } else {\n      // Outside viewport rectangle\n      gl_FragColor = vec4(0.7, 0.7, 0.7, 0.5);\n    }\n  }\n`\n\nexport class ViewportRectangleRenderer {\n  private material: Graphics.Material\n  private buffer: Graphics.VertexBuffer\n\n  constructor(private gl: Graphics.Context) {\n    const vertices = [[-1, 1], [1, 1], [-1, -1], [1, -1]]\n    const floats: number[] = []\n    for (let v of vertices) {\n      floats.push(v[0])\n      floats.push(v[1])\n    }\n    this.buffer = gl.createVertexBuffer(vertexFormat.stride * vertices.length)\n    this.buffer.upload(new Uint8Array(new Float32Array(floats).buffer))\n    this.material = gl.createMaterial(vertexFormat, vert, frag)\n  }\n\n  render(props: ViewportRectangleRendererProps) {\n    setUniformAffineTransform(\n      this.material,\n      'configSpaceToPhysicalViewSpace',\n      props.configSpaceToPhysicalViewSpace,\n    )\n\n    // TODO(jlfwong): Pack these into a Vec4 instead\n    setUniformVec2(this.material, 'configSpaceViewportOrigin', props.configSpaceViewportRect.origin)\n    setUniformVec2(this.material, 'configSpaceViewportSize', props.configSpaceViewportRect.size)\n    // TODO(jlfwong): Pack these into a Vec4 instead\n\n    const viewport = this.gl.viewport\n    this.material.setUniformVec2('physicalOrigin', viewport.x, viewport.y)\n    this.material.setUniformVec2('physicalSize', viewport.width, viewport.height)\n\n    this.material.setUniformFloat('framebufferHeight', this.gl.renderTargetHeightInPixels)\n\n    this.gl.setBlendState(\n      Graphics.BlendOperation.SOURCE_ALPHA,\n      Graphics.BlendOperation.INVERSE_SOURCE_ALPHA,\n    )\n    this.gl.draw(Graphics.Primitive.TRIANGLE_STRIP, this.material, this.buffer)\n  }\n}\n","import {Vec2, Rect, AffineTransform} from '../lib/math'\nimport {Graphics} from './graphics'\nimport {setUniformAffineTransform} from './utils'\n\nconst vertexFormat = new Graphics.VertexFormat()\nvertexFormat.add('position', Graphics.AttributeType.FLOAT, 2)\nvertexFormat.add('uv', Graphics.AttributeType.FLOAT, 2)\n\nconst vert = `\n  uniform mat3 uvTransform;\n  uniform mat3 positionTransform;\n\n  attribute vec2 position;\n  attribute vec2 uv;\n  varying vec2 vUv;\n\n  void main() {\n    vUv = (uvTransform * vec3(uv, 1)).xy;\n    gl_Position = vec4((positionTransform * vec3(position, 1)).xy, 0, 1);\n  }\n`\n\nconst frag = `\n  precision mediump float;\n\n  uniform vec2 uvSpacePixelSize;\n  uniform float renderOutlines;\n\n  varying vec2 vUv;\n  uniform sampler2D colorTexture;\n\n  // https://en.wikipedia.org/wiki/HSL_and_HSV#From_luma/chroma/hue\n  vec3 hcl2rgb(float H, float C, float L) {\n    float hPrime = H / 60.0;\n    float X = C * (1.0 - abs(mod(hPrime, 2.0) - 1.0));\n    vec3 RGB =\n      hPrime < 1.0 ? vec3(C, X, 0) :\n      hPrime < 2.0 ? vec3(X, C, 0) :\n      hPrime < 3.0 ? vec3(0, C, X) :\n      hPrime < 4.0 ? vec3(0, X, C) :\n      hPrime < 5.0 ? vec3(X, 0, C) :\n      vec3(C, 0, X);\n\n    float m = L - dot(RGB, vec3(0.30, 0.59, 0.11));\n    return RGB + vec3(m, m, m);\n  }\n\n  float triangle(float x) {\n    return 2.0 * abs(fract(x) - 0.5) - 1.0;\n  }\n\n  vec3 colorForBucket(float t) {\n    float x = triangle(30.0 * t);\n    float H = 360.0 * (0.9 * t);\n    float C = 0.25 + 0.2 * x;\n    float L = 0.80 - 0.15 * x;\n    return hcl2rgb(H, C, L);\n  }\n\n  void main() {\n    vec4 here = texture2D(colorTexture, vUv);\n\n    if (here.z == 0.0) {\n      // Background color\n      gl_FragColor = vec4(0, 0, 0, 0);\n      return;\n    }\n\n    // Sample the 4 surrounding pixels in the depth texture to determine\n    // if we should draw a boundary here or not.\n    vec4 N = texture2D(colorTexture, vUv + vec2(0, uvSpacePixelSize.y));\n    vec4 E = texture2D(colorTexture, vUv + vec2(uvSpacePixelSize.x, 0));\n    vec4 S = texture2D(colorTexture, vUv + vec2(0, -uvSpacePixelSize.y));\n    vec4 W = texture2D(colorTexture, vUv + vec2(-uvSpacePixelSize.x, 0));\n\n    // NOTE: For outline checks, we intentionally check both the right\n    // and the left to determine if we're an edge. If a rectangle is a single\n    // pixel wide, we don't want to render it as an outline, so this method\n    // of checking ensures that we don't outline single physical-space\n    // pixel width rectangles.\n    if (\n      renderOutlines > 0.0 &&\n      (\n        here.y == N.y && here.y != S.y || // Top edge\n        here.y == S.y && here.y != N.y || // Bottom edge\n        here.x == E.x && here.x != W.x || // Left edge\n        here.x == W.x && here.x != E.x\n      )\n    ) {\n      // We're on an edge! Draw transparent.\n      gl_FragColor = vec4(0, 0, 0, 0);\n    } else {\n      // Not on an edge. Draw the appropriate color.\n      gl_FragColor = vec4(colorForBucket(here.z), here.a);\n    }\n  }\n`\n\nexport interface FlamechartColorPassRenderProps {\n  rectInfoTexture: Graphics.Texture\n  renderOutlines: boolean\n  srcRect: Rect\n  dstRect: Rect\n}\n\nexport class FlamechartColorPassRenderer {\n  private material: Graphics.Material\n  private buffer: Graphics.VertexBuffer\n\n  constructor(private gl: Graphics.Context) {\n    const vertices = [\n      {pos: [-1, 1], uv: [0, 1]},\n      {pos: [1, 1], uv: [1, 1]},\n      {pos: [-1, -1], uv: [0, 0]},\n      {pos: [1, -1], uv: [1, 0]},\n    ]\n    const floats: number[] = []\n    for (let v of vertices) {\n      floats.push(v.pos[0])\n      floats.push(v.pos[1])\n      floats.push(v.uv[0])\n      floats.push(v.uv[1])\n    }\n\n    this.buffer = gl.createVertexBuffer(vertexFormat.stride * vertices.length)\n    this.buffer.uploadFloats(floats)\n    this.material = gl.createMaterial(vertexFormat, vert, frag)\n  }\n\n  render(props: FlamechartColorPassRenderProps) {\n    const {srcRect, rectInfoTexture} = props\n    const physicalToUV = AffineTransform.withTranslation(new Vec2(0, 1))\n      .times(AffineTransform.withScale(new Vec2(1, -1)))\n      .times(\n        AffineTransform.betweenRects(\n          new Rect(Vec2.zero, new Vec2(rectInfoTexture.width, rectInfoTexture.height)),\n          Rect.unit,\n        ),\n      )\n    const uvRect = physicalToUV.transformRect(srcRect)\n    const uvTransform = AffineTransform.betweenRects(Rect.unit, uvRect)\n\n    const {dstRect} = props\n    const viewportSize = new Vec2(this.gl.viewport.width, this.gl.viewport.height)\n\n    const physicalToNDC = AffineTransform.withScale(new Vec2(1, -1)).times(\n      AffineTransform.betweenRects(new Rect(Vec2.zero, viewportSize), Rect.NDC),\n    )\n    const ndcRect = physicalToNDC.transformRect(dstRect)\n    const positionTransform = AffineTransform.betweenRects(Rect.NDC, ndcRect)\n\n    const uvSpacePixelSize = Vec2.unit.dividedByPointwise(\n      new Vec2(props.rectInfoTexture.width, props.rectInfoTexture.height),\n    )\n\n    this.material.setUniformSampler('colorTexture', props.rectInfoTexture, 0)\n    setUniformAffineTransform(this.material, 'uvTransform', uvTransform)\n    this.material.setUniformFloat('renderOutlines', props.renderOutlines ? 1.0 : 0.0)\n    this.material.setUniformVec2('uvSpacePixelSize', uvSpacePixelSize.x, uvSpacePixelSize.y)\n    setUniformAffineTransform(this.material, 'positionTransform', positionTransform)\n\n    this.gl.setUnpremultipliedBlendState()\n    this.gl.draw(Graphics.Primitive.TRIANGLE_STRIP, this.material, this.buffer)\n  }\n}\n","import {Graphics, WebGL} from './graphics'\nimport {RectangleBatchRenderer} from './rectangle-batch-renderer'\nimport {TextureRenderer} from './texture-renderer'\nimport {Rect, Vec2} from '../lib/math'\nimport {ViewportRectangleRenderer} from './overlay-rectangle-renderer'\nimport {FlamechartColorPassRenderer} from './flamechart-color-pass-renderer'\n\ntype FrameCallback = () => void\n\nexport class CanvasContext {\n  public readonly gl: WebGL.Context\n  public readonly rectangleBatchRenderer: RectangleBatchRenderer\n  public readonly textureRenderer: TextureRenderer\n  public readonly viewportRectangleRenderer: ViewportRectangleRenderer\n  public readonly flamechartColorPassRenderer: FlamechartColorPassRenderer\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.gl = new WebGL.Context(canvas)\n    this.rectangleBatchRenderer = new RectangleBatchRenderer(this.gl)\n    this.textureRenderer = new TextureRenderer(this.gl)\n    this.viewportRectangleRenderer = new ViewportRectangleRenderer(this.gl)\n    this.flamechartColorPassRenderer = new FlamechartColorPassRenderer(this.gl)\n\n    const webGLInfo = this.gl.getWebGLInfo()\n    if (webGLInfo) {\n      console.log(\n        `WebGL initialized. renderer: ${webGLInfo.renderer}, vendor: ${\n          webGLInfo.vendor\n        }, version: ${webGLInfo.version}`,\n      )\n    }\n    ;(window as any)['testContextLoss'] = () => {\n      this.gl.testContextLoss()\n    }\n  }\n\n  private animationFrameRequest: number | null = null\n  private beforeFrameHandlers = new Set<FrameCallback>()\n  addBeforeFrameHandler(callback: FrameCallback) {\n    this.beforeFrameHandlers.add(callback)\n  }\n  removeBeforeFrameHandler(callback: FrameCallback) {\n    this.beforeFrameHandlers.delete(callback)\n  }\n  requestFrame() {\n    if (!this.animationFrameRequest) {\n      this.animationFrameRequest = requestAnimationFrame(this.onBeforeFrame)\n    }\n  }\n  private onBeforeFrame = () => {\n    this.animationFrameRequest = null\n    this.gl.setViewport(0, 0, this.gl.renderTargetWidthInPixels, this.gl.renderTargetHeightInPixels)\n    this.gl.clear(new Graphics.Color(1, 1, 1, 1))\n\n    for (const handler of this.beforeFrameHandlers) {\n      handler()\n    }\n  }\n\n  setViewport(physicalBounds: Rect, cb: () => void): void {\n    const {origin, size} = physicalBounds\n    let viewportBefore = this.gl.viewport\n    this.gl.setViewport(origin.x, origin.y, size.x, size.y)\n\n    cb()\n\n    let {x, y, width, height} = viewportBefore\n    this.gl.setViewport(x, y, width, height)\n  }\n\n  renderBehind(el: Element, cb: () => void) {\n    const bounds = el.getBoundingClientRect()\n    const physicalBounds = new Rect(\n      new Vec2(bounds.left * window.devicePixelRatio, bounds.top * window.devicePixelRatio),\n      new Vec2(bounds.width * window.devicePixelRatio, bounds.height * window.devicePixelRatio),\n    )\n\n    this.setViewport(physicalBounds, cb)\n  }\n}\n","import {Frame, Profile} from '../lib/profile'\nimport {triangle, memoizeByReference, memoizeByShallowEquality} from '../lib/utils'\nimport {RowAtlas} from '../gl/row-atlas'\nimport {CanvasContext} from '../gl/canvas-context'\nimport {Color} from '../lib/color'\nimport {FlamechartRowAtlasKey} from '../gl/flamechart-renderer'\n\nexport const createGetColorBucketForFrame = memoizeByReference(\n  (frameToColorBucket: Map<number | string, number>) => {\n    return (frame: Frame): number => {\n      return frameToColorBucket.get(frame.key) || 0\n    }\n  },\n)\n\nexport const createGetCSSColorForFrame = memoizeByReference(\n  (frameToColorBucket: Map<number | string, number>) => {\n    const getColorBucketForFrame = createGetColorBucketForFrame(frameToColorBucket)\n    return (frame: Frame): string => {\n      const t = getColorBucketForFrame(frame) / 255\n\n      const x = triangle(30.0 * t)\n      const H = 360.0 * (0.9 * t)\n      const C = 0.25 + 0.2 * x\n      const L = 0.8 - 0.15 * x\n      return Color.fromLumaChromaHue(L, C, H).toCSS()\n    }\n  },\n)\n\nexport const getCanvasContext = memoizeByReference((canvas: HTMLCanvasElement) => {\n  return new CanvasContext(canvas)\n})\n\nexport const getRowAtlas = memoizeByReference((canvasContext: CanvasContext) => {\n  return new RowAtlas<FlamechartRowAtlasKey>(\n    canvasContext.gl,\n    canvasContext.rectangleBatchRenderer,\n    canvasContext.textureRenderer,\n  )\n})\n\nexport const getProfileWithRecursionFlattened = memoizeByReference((profile: Profile) =>\n  profile.getProfileWithRecursionFlattened(),\n)\n\nexport const getProfileToView = memoizeByShallowEquality(\n  ({profile, flattenRecursion}: {profile: Profile; flattenRecursion: boolean}): Profile => {\n    return flattenRecursion ? profile.getProfileWithRecursionFlattened() : profile\n  },\n)\nexport const getFrameToColorBucket = memoizeByReference((profile: Profile): Map<\n  string | number,\n  number\n> => {\n  const frames: Frame[] = []\n  profile.forEachFrame(f => frames.push(f))\n  function key(f: Frame) {\n    return (f.file || '') + f.name\n  }\n  function compare(a: Frame, b: Frame) {\n    return key(a) > key(b) ? 1 : -1\n  }\n  frames.sort(compare)\n  const frameToColorBucket = new Map<string | number, number>()\n  for (let i = 0; i < frames.length; i++) {\n    frameToColorBucket.set(frames[i].key, Math.floor(255 * i / frames.length))\n  }\n\n  return frameToColorBucket\n})\n","import {h, Component} from 'preact'\nimport {StyleSheet, css} from 'aphrodite'\nimport {Profile, Frame} from '../lib/profile'\nimport {sortBy, formatPercent} from '../lib/utils'\nimport {FontSize, Colors, Sizes, commonStyle} from './style'\nimport {ColorChit} from './color-chit'\nimport {ScrollableListView, ListItem} from './scrollable-list-view'\nimport {actions} from '../store/actions'\nimport {Dispatch, createContainer} from '../lib/typed-redux'\nimport {ApplicationState} from '../store'\nimport {createGetCSSColorForFrame, getFrameToColorBucket} from '../store/getters'\nimport {ActiveProfileState} from './application'\n\nexport enum SortField {\n  SYMBOL_NAME,\n  SELF,\n  TOTAL,\n}\n\nexport enum SortDirection {\n  ASCENDING,\n  DESCENDING,\n}\n\nexport interface SortMethod {\n  field: SortField\n  direction: SortDirection\n}\n\ninterface HBarProps {\n  perc: number\n}\n\nclass HBarDisplay extends Component<HBarProps, {}> {\n  render() {\n    return (\n      <div className={css(style.hBarDisplay)}>\n        <div className={css(style.hBarDisplayFilled)} style={{width: `${this.props.perc}%`}} />\n      </div>\n    )\n  }\n}\n\ninterface SortIconProps {\n  activeDirection: SortDirection | null\n}\n\nclass SortIcon extends Component<SortIconProps, {}> {\n  render() {\n    const {activeDirection} = this.props\n    const upFill = activeDirection === SortDirection.ASCENDING ? Colors.GRAY : Colors.LIGHT_GRAY\n    const downFill = activeDirection === SortDirection.DESCENDING ? Colors.GRAY : Colors.LIGHT_GRAY\n\n    return (\n      <svg\n        width=\"8\"\n        height=\"10\"\n        viewBox=\"0 0 8 10\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className={css(style.sortIcon)}\n      >\n        <path d=\"M0 4L4 0L8 4H0Z\" fill={upFill} />\n        <path d=\"M0 4L4 0L8 4H0Z\" transform=\"translate(0 10) scale(1 -1)\" fill={downFill} />\n      </svg>\n    )\n  }\n}\n\ninterface ProfileTableViewProps {\n  profile: Profile\n  profileIndex: number\n  selectedFrame: Frame | null\n  getCSSColorForFrame: (frame: Frame) => string\n  sortMethod: SortMethod\n  setSelectedFrame: (frame: Frame | null) => void\n  setSortMethod: (sortMethod: SortMethod) => void\n}\n\nexport class ProfileTableView extends Component<ProfileTableViewProps, void> {\n  renderRow(frame: Frame, index: number) {\n    const {profile, selectedFrame} = this.props\n\n    const totalWeight = frame.getTotalWeight()\n    const selfWeight = frame.getSelfWeight()\n    const totalPerc = 100.0 * totalWeight / profile.getTotalNonIdleWeight()\n    const selfPerc = 100.0 * selfWeight / profile.getTotalNonIdleWeight()\n\n    const selected = frame === selectedFrame\n\n    // We intentionally use index rather than frame.key here as the tr key\n    // in order to re-use rows when sorting rather than creating all new elements.\n    return (\n      <tr\n        key={`${index}`}\n        onClick={this.props.setSelectedFrame.bind(null, frame)}\n        className={css(\n          style.tableRow,\n          index % 2 == 0 && style.tableRowEven,\n          selected && style.tableRowSelected,\n        )}\n      >\n        <td className={css(style.numericCell)}>\n          {profile.formatValue(totalWeight)} ({formatPercent(totalPerc)})\n          <HBarDisplay perc={totalPerc} />\n        </td>\n        <td className={css(style.numericCell)}>\n          {profile.formatValue(selfWeight)} ({formatPercent(selfPerc)})\n          <HBarDisplay perc={selfPerc} />\n        </td>\n        <td title={frame.file} className={css(style.textCell)}>\n          <ColorChit color={this.props.getCSSColorForFrame(frame)} />\n          {frame.name}\n        </td>\n      </tr>\n    )\n  }\n\n  onSortClick = (field: SortField, ev: MouseEvent) => {\n    ev.preventDefault()\n\n    const {sortMethod} = this.props\n\n    if (sortMethod.field == field) {\n      // Toggle\n      this.props.setSortMethod({\n        field,\n        direction:\n          sortMethod.direction === SortDirection.ASCENDING\n            ? SortDirection.DESCENDING\n            : SortDirection.ASCENDING,\n      })\n    } else {\n      // Set a sane default\n      switch (field) {\n        case SortField.SYMBOL_NAME: {\n          this.props.setSortMethod({field, direction: SortDirection.ASCENDING})\n          break\n        }\n        case SortField.SELF: {\n          this.props.setSortMethod({field, direction: SortDirection.DESCENDING})\n          break\n        }\n        case SortField.TOTAL: {\n          this.props.setSortMethod({field, direction: SortDirection.DESCENDING})\n          break\n        }\n      }\n    }\n  }\n\n  private getFrameList = (): Frame[] => {\n    const {profile, sortMethod} = this.props\n\n    const frameList: Frame[] = []\n\n    profile.forEachFrame(f => frameList.push(f))\n\n    // TODO(jlfwong): This is pretty inefficient to do this on every render, but doesn't\n    // seem to be a bottleneck, so we'll leave it alone.\n    switch (sortMethod.field) {\n      case SortField.SYMBOL_NAME: {\n        sortBy(frameList, f => f.name.toLowerCase())\n        break\n      }\n      case SortField.SELF: {\n        sortBy(frameList, f => f.getSelfWeight())\n        break\n      }\n      case SortField.TOTAL: {\n        sortBy(frameList, f => f.getTotalWeight())\n        break\n      }\n    }\n    if (sortMethod.direction === SortDirection.DESCENDING) {\n      frameList.reverse()\n    }\n\n    return frameList\n  }\n\n  private listView: ScrollableListView | null = null\n  private listViewRef = (listView: ScrollableListView | null) => {\n    if (listView === this.listView) return\n    this.listView = listView\n\n    const {selectedFrame} = this.props\n    if (!selectedFrame || !listView) return\n    const index = this.getFrameList().indexOf(selectedFrame)\n    if (index === -1) return\n    listView.scrollIndexIntoView(index)\n  }\n\n  render() {\n    const {sortMethod} = this.props\n\n    const frameList = this.getFrameList()\n\n    const renderItems = (firstIndex: number, lastIndex: number) => {\n      const rows: JSX.Element[] = []\n\n      for (let i = firstIndex; i <= lastIndex; i++) {\n        rows.push(this.renderRow(frameList[i], i))\n      }\n\n      return <table className={css(style.tableView)}>{rows}</table>\n    }\n\n    const listItems: ListItem[] = frameList.map(f => ({size: Sizes.FRAME_HEIGHT}))\n\n    return (\n      <div className={css(commonStyle.vbox, style.profileTableView)}>\n        <table className={css(style.tableView)}>\n          <thead className={css(style.tableHeader)}>\n            <tr>\n              <th\n                className={css(style.numericCell)}\n                onClick={ev => this.onSortClick(SortField.TOTAL, ev)}\n              >\n                <SortIcon\n                  activeDirection={\n                    sortMethod.field === SortField.TOTAL ? sortMethod.direction : null\n                  }\n                />\n                Total\n              </th>\n              <th\n                className={css(style.numericCell)}\n                onClick={ev => this.onSortClick(SortField.SELF, ev)}\n              >\n                <SortIcon\n                  activeDirection={\n                    sortMethod.field === SortField.SELF ? sortMethod.direction : null\n                  }\n                />\n                Self\n              </th>\n              <th\n                className={css(style.textCell)}\n                onClick={ev => this.onSortClick(SortField.SYMBOL_NAME, ev)}\n              >\n                <SortIcon\n                  activeDirection={\n                    sortMethod.field === SortField.SYMBOL_NAME ? sortMethod.direction : null\n                  }\n                />\n                Symbol Name\n              </th>\n            </tr>\n          </thead>\n        </table>\n        <ScrollableListView\n          ref={this.listViewRef}\n          axis={'y'}\n          items={listItems}\n          className={css(style.scrollView)}\n          renderItems={renderItems}\n        />\n      </div>\n    )\n  }\n}\n\nconst style = StyleSheet.create({\n  profileTableView: {\n    background: Colors.WHITE,\n    height: '100%',\n  },\n  scrollView: {\n    overflowY: 'auto',\n    overflowX: 'hidden',\n  },\n  tableView: {\n    width: '100%',\n    fontSize: FontSize.LABEL,\n    background: Colors.WHITE,\n  },\n  tableHeader: {\n    borderBottom: `2px solid ${Colors.LIGHT_GRAY}`,\n    textAlign: 'left',\n    color: Colors.GRAY,\n    userSelect: 'none',\n  },\n  sortIcon: {\n    position: 'relative',\n    top: 1,\n    marginRight: Sizes.FRAME_HEIGHT / 4,\n  },\n  tableRow: {\n    height: Sizes.FRAME_HEIGHT,\n  },\n  tableRowEven: {\n    background: Colors.OFF_WHITE,\n  },\n  tableRowSelected: {\n    background: Colors.DARK_BLUE,\n    color: Colors.WHITE,\n  },\n  numericCell: {\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    position: 'relative',\n    textAlign: 'right',\n    paddingRight: Sizes.FRAME_HEIGHT,\n    width: 6 * Sizes.FRAME_HEIGHT,\n    minWidth: 6 * Sizes.FRAME_HEIGHT,\n  },\n  textCell: {\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    width: '100%',\n    maxWidth: 0,\n  },\n  hBarDisplay: {\n    position: 'absolute',\n    background: Colors.TRANSPARENT_GREEN,\n    bottom: 2,\n    height: 2,\n    width: `calc(100% - ${2 * Sizes.FRAME_HEIGHT}px)`,\n    right: Sizes.FRAME_HEIGHT,\n  },\n  hBarDisplayFilled: {\n    height: '100%',\n    position: 'absolute',\n    background: Colors.GREEN,\n    right: 0,\n  },\n})\n\ninterface ProfileTableViewContainerProps {\n  activeProfileState: ActiveProfileState\n}\n\nexport const ProfileTableViewContainer = createContainer(\n  ProfileTableView,\n  (state: ApplicationState, dispatch: Dispatch, ownProps: ProfileTableViewContainerProps) => {\n    const {activeProfileState} = ownProps\n    const {profile, sandwichViewState, index} = activeProfileState\n    if (!profile) throw new Error('profile missing')\n    const {tableSortMethod} = state\n    const {callerCallee} = sandwichViewState\n    const selectedFrame = callerCallee ? callerCallee.selectedFrame : null\n    const frameToColorBucket = getFrameToColorBucket(profile)\n    const getCSSColorForFrame = createGetCSSColorForFrame(frameToColorBucket)\n\n    const setSelectedFrame = (selectedFrame: Frame | null) => {\n      dispatch(actions.sandwichView.setSelectedFrame({profileIndex: index, args: selectedFrame}))\n    }\n\n    const setSortMethod = (sortMethod: SortMethod) => {\n      dispatch(actions.sandwichView.setTableSortMethod(sortMethod))\n    }\n\n    return {\n      profile,\n      profileIndex: activeProfileState.index,\n      selectedFrame,\n      getCSSColorForFrame,\n      sortMethod: tableSortMethod,\n      setSelectedFrame,\n      setSortMethod,\n    }\n  },\n)\n","import {actions} from './actions'\n\n/**\n * The root node of application state. We use redux (https://redux.js.org/)\n * as our state management solution.\n */\n\nimport * as redux from 'redux'\nimport {setter, Reducer} from '../lib/typed-redux'\nimport {HashParams, getHashParams} from '../lib/hash-params'\nimport {ProfileGroupState, profileGroup} from './profiles-state'\nimport {SortMethod, SortField, SortDirection} from '../views/profile-table-view'\n\nexport const enum ViewMode {\n  CHRONO_FLAME_CHART,\n  LEFT_HEAVY_FLAME_GRAPH,\n  SANDWICH_VIEW,\n}\n\nexport interface ApplicationState {\n  hashParams: HashParams\n\n  glCanvas: HTMLCanvasElement | null\n\n  flattenRecursion: boolean\n\n  viewMode: ViewMode\n  dragActive: boolean\n  loading: boolean\n  error: boolean\n\n  tableSortMethod: SortMethod\n\n  profileGroup: ProfileGroupState\n}\n\nconst protocol = window.location.protocol\n\n// Speedscope is usable both from a local HTML file being served\n// from a file:// URL, and via websites. In the case of file:// URLs,\n// however, XHR will be unavailable to fetching files in adjacent directories.\nexport const canUseXHR = protocol === 'http:' || protocol === 'https:'\n\nexport function createApplicationStore(\n  initialState: Partial<ApplicationState>,\n): redux.Store<ApplicationState> {\n  const hashParams = getHashParams()\n\n  const loading = canUseXHR && hashParams.profileURL != null\n\n  const reducer: Reducer<ApplicationState> = redux.combineReducers({\n    profileGroup,\n\n    hashParams: setter<HashParams>(actions.setHashParams, hashParams),\n\n    flattenRecursion: setter<boolean>(actions.setFlattenRecursion, false),\n\n    viewMode: setter<ViewMode>(actions.setViewMode, ViewMode.CHRONO_FLAME_CHART),\n\n    glCanvas: setter<HTMLCanvasElement | null>(actions.setGLCanvas, null),\n\n    dragActive: setter<boolean>(actions.setDragActive, false),\n    loading: setter<boolean>(actions.setLoading, loading),\n    error: setter<boolean>(actions.setError, false),\n\n    tableSortMethod: setter<SortMethod>(actions.sandwichView.setTableSortMethod, {\n      field: SortField.SELF,\n      direction: SortDirection.DESCENDING,\n    }),\n  })\n\n  return redux.createStore(reducer, initialState)\n}\n","type EmscriptenSymbolMap = Map<string, string>\n\n// This imports symbol maps generated by emscripten using the \"--emit-symbol-map\" flag.\n// It allows you to visualize a profile captured in a release build as long as you also\n// have the associated symbol map. To do this, first drop the profile into speedscope\n// and then drop the symbol map. After the second drop, the symbols will be remapped to\n// their original names.\nexport function importEmscriptenSymbolMap(contents: string): EmscriptenSymbolMap | null {\n  const lines = contents.split('\\n')\n  if (!lines.length) return null\n\n  // Remove a trailing blank line if there is one\n  if (lines[lines.length - 1] === '') lines.pop()\n  if (!lines.length) return null\n\n  const map: EmscriptenSymbolMap = new Map()\n  const intRegex = /^(\\d+):([\\$\\w-]+)$/\n  const idRegex = /^([\\$\\w]+):([\\$\\w-]+)$/\n\n  for (const line of lines) {\n    // Match lines like \"103:__ZN8tinyxml210XMLCommentD0Ev\"\n    const intMatch = intRegex.exec(line)\n    if (intMatch) {\n      map.set(`wasm-function[${intMatch[1]}]`, intMatch[2])\n      continue\n    }\n\n    // Match lines like \"u6:__ZN8tinyxml210XMLCommentD0Ev\"\n    const idMatch = idRegex.exec(line)\n    if (idMatch) {\n      map.set(idMatch[1], idMatch[2])\n      continue\n    }\n\n    return null\n  }\n\n  return map\n}\n","import {Frame, CallTreeNode} from './profile'\n\nimport {lastOf} from './utils'\nimport {clamp} from './math'\n\nexport interface FlamechartFrame {\n  node: CallTreeNode\n  start: number\n  end: number\n  parent: FlamechartFrame | null\n  children: FlamechartFrame[]\n}\n\ntype StackLayer = FlamechartFrame[]\n\ninterface FlamechartDataSource {\n  getTotalWeight(): number\n\n  formatValue(v: number): string\n\n  forEachCall(\n    openFrame: (node: CallTreeNode, value: number) => void,\n    closeFrame: (node: CallTreeNode, value: number) => void,\n  ): void\n\n  getColorBucketForFrame(f: Frame): number\n}\n\nexport class Flamechart {\n  // Bottom to top\n  private layers: StackLayer[] = []\n  private totalWeight: number = 0\n  private minFrameWidth: number = 1\n\n  getTotalWeight() {\n    return this.totalWeight\n  }\n  getLayers() {\n    return this.layers\n  }\n  getColorBucketForFrame(frame: Frame) {\n    return this.source.getColorBucketForFrame(frame)\n  }\n  getMinFrameWidth() {\n    return this.minFrameWidth\n  }\n  formatValue(v: number) {\n    return this.source.formatValue(v)\n  }\n\n  getClampedViewportWidth(viewportWidth: number) {\n    const maxWidth = this.getTotalWeight()\n\n    // In order to avoid floating point error, we cap the maximum zoom. In\n    // particular, it's important that at the maximum zoom level, the total\n    // trace size + a viewport width is not equal to the trace size due to\n    // floating point rounding.\n    //\n    // For instance, if the profile's total weight is 2^60, and the viewport\n    // size is 1, trying to move one viewport width right will result in no\n    // change because 2^60 + 1 = 2^60 in floating point arithmetic. JavaScript\n    // numbers are 64 bit floats, and therefore have 53 mantissa bits. You can\n    // see this for yourself in the console. Try:\n    //\n    //   > Math.pow(2, 60) + 1 === Math.pow(2, 60)\n    //   true\n    //   > Math.pow(2, 53) + 1 === Math.pow(2, 53)\n    //   true\n    //   > Math.pow(2, 52) + 1 === Math.pow(2, 52)\n    //   false\n    //\n    // We use 2^40 as a cap instead, since we want to be able to make small\n    // adjustments within a viewport width.\n    //\n    // For reference, this will still allow you to zoom until 1 nanosecond fills\n    // the screen in a profile with a duration of over 18 minutes.\n    //\n    //   > Math.pow(2, 40) / (60 * Math.pow(10, 9))\n    //   18.325193796266667\n    //\n    const maxZoom = Math.pow(2, 40)\n\n    // In addition to capping zoom to avoid floating point error, we further cap\n    // zoom to avoid letting you zoom in so that the smallest element more than\n    // fills the screen, since that probably isn't useful. The final zoom cap is\n    // determined by the minimum zoom of either 2^40x zoom or the necessary zoom\n    // for the smallest frame to fill the screen three times.\n    const minWidth = clamp(3 * this.getMinFrameWidth(), maxWidth / maxZoom, maxWidth)\n\n    return clamp(viewportWidth, minWidth, maxWidth)\n  }\n\n  constructor(private source: FlamechartDataSource) {\n    const stack: FlamechartFrame[] = []\n    const openFrame = (node: CallTreeNode, value: number) => {\n      const parent = lastOf(stack)\n      const frame: FlamechartFrame = {\n        node,\n        parent,\n        children: [],\n        start: value,\n        end: value,\n      }\n      if (parent) {\n        parent.children.push(frame)\n      }\n      stack.push(frame)\n    }\n\n    this.minFrameWidth = Infinity\n    const closeFrame = (node: CallTreeNode, value: number) => {\n      console.assert(stack.length > 0)\n      const stackTop = stack.pop()!\n      stackTop.end = value\n      if (stackTop.end - stackTop.start === 0) return\n      const layerIndex = stack.length\n      while (this.layers.length <= layerIndex) this.layers.push([])\n      this.layers[layerIndex].push(stackTop)\n      this.minFrameWidth = Math.min(this.minFrameWidth, stackTop.end - stackTop.start)\n    }\n\n    this.totalWeight = source.getTotalWeight()\n    source.forEachCall(openFrame, closeFrame)\n\n    if (!isFinite(this.minFrameWidth)) this.minFrameWidth = 1\n  }\n}\n","import {Flamechart} from '../lib/flamechart'\nimport {RectangleBatch, RectangleBatchRenderer} from './rectangle-batch-renderer'\nimport {Vec2, Rect, AffineTransform} from '../lib/math'\nimport {Color} from '../lib/color'\nimport {KeyedSet} from '../lib/utils'\nimport {RowAtlas} from './row-atlas'\nimport {Graphics} from './graphics'\nimport {FlamechartColorPassRenderer} from './flamechart-color-pass-renderer'\nimport {renderInto} from './utils'\n\nconst MAX_BATCH_SIZE = 10000\n\ninterface RangeTreeNode {\n  getBounds(): Rect\n  getRectCount(): number\n  getChildren(): RangeTreeNode[]\n  forEachLeafNodeWithinBounds(configSpaceBounds: Rect, cb: (leaf: RangeTreeLeafNode) => void): void\n}\n\nclass RangeTreeLeafNode implements RangeTreeNode {\n  private children: RangeTreeNode[] = []\n\n  constructor(\n    private batch: RectangleBatch,\n    private bounds: Rect,\n    private numPrecedingRectanglesInRow: number,\n  ) {}\n\n  getBatch() {\n    return this.batch\n  }\n  getBounds() {\n    return this.bounds\n  }\n  getRectCount() {\n    return this.batch.getRectCount()\n  }\n  getChildren() {\n    return this.children\n  }\n  getParity() {\n    return this.numPrecedingRectanglesInRow % 2\n  }\n  forEachLeafNodeWithinBounds(configSpaceBounds: Rect, cb: (leaf: RangeTreeLeafNode) => void) {\n    if (!this.bounds.hasIntersectionWith(configSpaceBounds)) return\n    cb(this)\n  }\n}\n\nclass RangeTreeInteriorNode implements RangeTreeNode {\n  private rectCount: number = 0\n  private bounds: Rect\n  constructor(private children: RangeTreeNode[]) {\n    if (children.length === 0) {\n      throw new Error('Empty interior node')\n    }\n    let minLeft = Infinity\n    let maxRight = -Infinity\n    let minTop = Infinity\n    let maxBottom = -Infinity\n    for (let child of children) {\n      this.rectCount += child.getRectCount()\n      const bounds = child.getBounds()\n      minLeft = Math.min(minLeft, bounds.left())\n      maxRight = Math.max(maxRight, bounds.right())\n      minTop = Math.min(minTop, bounds.top())\n      maxBottom = Math.max(maxBottom, bounds.bottom())\n    }\n    this.bounds = new Rect(\n      new Vec2(minLeft, minTop),\n      new Vec2(maxRight - minLeft, maxBottom - minTop),\n    )\n  }\n\n  getBounds() {\n    return this.bounds\n  }\n  getRectCount() {\n    return this.rectCount\n  }\n  getChildren() {\n    return this.children\n  }\n\n  forEachLeafNodeWithinBounds(configSpaceBounds: Rect, cb: (leaf: RangeTreeLeafNode) => void) {\n    if (!this.bounds.hasIntersectionWith(configSpaceBounds)) return\n    for (let child of this.children) {\n      child.forEachLeafNodeWithinBounds(configSpaceBounds, cb)\n    }\n  }\n}\n\nexport interface FlamechartRendererProps {\n  configSpaceSrcRect: Rect\n  physicalSpaceDstRect: Rect\n  renderOutlines: boolean\n}\n\ninterface FlamechartRowAtlasKeyInfo {\n  stackDepth: number\n  zoomLevel: number\n  index: number\n}\n\nexport class FlamechartRowAtlasKey {\n  readonly stackDepth: number\n  readonly zoomLevel: number\n  readonly index: number\n\n  get key() {\n    return `${this.stackDepth}_${this.index}_${this.zoomLevel}`\n  }\n  private constructor(options: FlamechartRowAtlasKeyInfo) {\n    this.stackDepth = options.stackDepth\n    this.zoomLevel = options.zoomLevel\n    this.index = options.index\n  }\n  static getOrInsert(set: KeyedSet<FlamechartRowAtlasKey>, info: FlamechartRowAtlasKeyInfo) {\n    return set.getOrInsert(new FlamechartRowAtlasKey(info))\n  }\n}\n\nexport interface FlamechartRendererOptions {\n  inverted: boolean\n}\n\nexport class FlamechartRenderer {\n  private layers: RangeTreeNode[] = []\n\n  constructor(\n    private gl: Graphics.Context,\n    private rowAtlas: RowAtlas<FlamechartRowAtlasKey>,\n    private flamechart: Flamechart,\n    private rectangleBatchRenderer: RectangleBatchRenderer,\n    private colorPassRenderer: FlamechartColorPassRenderer,\n    private options: FlamechartRendererOptions = {inverted: false},\n  ) {\n    const nLayers = flamechart.getLayers().length\n    for (let stackDepth = 0; stackDepth < nLayers; stackDepth++) {\n      const leafNodes: RangeTreeLeafNode[] = []\n      const y = options.inverted ? nLayers - 1 - stackDepth : stackDepth\n\n      let minLeft = Infinity\n      let maxRight = -Infinity\n      let batch = new RectangleBatch(this.gl)\n\n      let rectCount = 0\n\n      const layer = flamechart.getLayers()[stackDepth]\n\n      for (let i = 0; i < layer.length; i++) {\n        const frame = layer[i]\n        if (batch.getRectCount() >= MAX_BATCH_SIZE) {\n          leafNodes.push(\n            new RangeTreeLeafNode(\n              batch,\n              new Rect(new Vec2(minLeft, y), new Vec2(maxRight - minLeft, 1)),\n              rectCount,\n            ),\n          )\n          minLeft = Infinity\n          maxRight = -Infinity\n          batch = new RectangleBatch(this.gl)\n        }\n        const configSpaceBounds = new Rect(\n          new Vec2(frame.start, y),\n          new Vec2(frame.end - frame.start, 1),\n        )\n        minLeft = Math.min(minLeft, configSpaceBounds.left())\n        maxRight = Math.max(maxRight, configSpaceBounds.right())\n\n        // We'll use the red channel to indicate the index to allow\n        // us to separate adjacent rectangles within a row from one another,\n        // the green channel to indicate the row,\n        // and the blue channel to indicate the color bucket to render.\n        // We add one to each so we have zero reserved for the background color.\n        const color = new Color(\n          (1 + i % 255) / 256,\n          (1 + stackDepth % 255) / 256,\n          (1 + this.flamechart.getColorBucketForFrame(frame.node.frame)) / 256,\n        )\n        batch.addRect(configSpaceBounds, color)\n        rectCount++\n      }\n\n      if (batch.getRectCount() > 0) {\n        leafNodes.push(\n          new RangeTreeLeafNode(\n            batch,\n            new Rect(new Vec2(minLeft, y), new Vec2(maxRight - minLeft, 1)),\n            rectCount,\n          ),\n        )\n      }\n\n      // TODO(jlfwong): Making this into a binary tree\n      // range than a tree of always-height-two might make this run faster\n      this.layers.push(new RangeTreeInteriorNode(leafNodes))\n    }\n  }\n\n  private rectInfoTexture: Graphics.Texture | null = null\n  getRectInfoTexture(width: number, height: number): Graphics.Texture {\n    if (this.rectInfoTexture) {\n      const texture = this.rectInfoTexture\n      if (texture.width != width || texture.height != height) {\n        texture.resize(width, height)\n      }\n    } else {\n      this.rectInfoTexture = this.gl.createTexture(\n        Graphics.TextureFormat.NEAREST_CLAMP,\n        width,\n        height,\n      )\n    }\n    return this.rectInfoTexture\n  }\n\n  private rectInfoRenderTarget: Graphics.RenderTarget | null = null\n  getRectInfoRenderTarget(width: number, height: number): Graphics.RenderTarget {\n    const texture = this.getRectInfoTexture(width, height)\n    if (this.rectInfoRenderTarget) {\n      if (this.rectInfoRenderTarget.texture != texture) {\n        this.rectInfoRenderTarget.texture.free()\n        this.rectInfoRenderTarget.setColor(texture)\n      }\n    }\n    if (!this.rectInfoRenderTarget) {\n      this.rectInfoRenderTarget = this.gl.createRenderTarget(texture)\n    }\n    return this.rectInfoRenderTarget\n  }\n\n  free() {\n    if (this.rectInfoRenderTarget) {\n      this.rectInfoRenderTarget.free()\n    }\n    if (this.rectInfoTexture) {\n      this.rectInfoTexture.free()\n    }\n  }\n\n  private atlasKeys = new KeyedSet<FlamechartRowAtlasKey>()\n\n  configSpaceBoundsForKey(key: FlamechartRowAtlasKey): Rect {\n    const {stackDepth, zoomLevel, index} = key\n    const configSpaceContentWidth = this.flamechart.getTotalWeight()\n\n    const width = configSpaceContentWidth / Math.pow(2, zoomLevel)\n\n    const nLayers = this.flamechart.getLayers().length\n    const y = this.options.inverted ? nLayers - 1 - stackDepth : stackDepth\n    return new Rect(new Vec2(width * index, y), new Vec2(width, 1))\n  }\n\n  render(props: FlamechartRendererProps) {\n    const {configSpaceSrcRect, physicalSpaceDstRect} = props\n\n    const atlasKeysToRender: FlamechartRowAtlasKey[] = []\n\n    // We want to render the lowest resolution we can while still guaranteeing that the\n    // atlas line is higher resolution than its corresponding destination rectangle on\n    // the screen.\n    const configToPhysical = AffineTransform.betweenRects(configSpaceSrcRect, physicalSpaceDstRect)\n    if (configSpaceSrcRect.isEmpty()) {\n      // Prevent an infinite loop\n      return\n    }\n\n    let zoomLevel = 0\n    while (true) {\n      const key = FlamechartRowAtlasKey.getOrInsert(this.atlasKeys, {\n        stackDepth: 0,\n        zoomLevel,\n        index: 0,\n      })\n      const configSpaceBounds = this.configSpaceBoundsForKey(key)\n      const physicalBounds = configToPhysical.transformRect(configSpaceBounds)\n      if (physicalBounds.width() < this.rowAtlas.getResolution()) {\n        break\n      }\n      zoomLevel++\n    }\n\n    const top = Math.max(0, Math.floor(configSpaceSrcRect.top()))\n    const bottom = Math.min(this.layers.length, Math.ceil(configSpaceSrcRect.bottom()))\n\n    const configSpaceContentWidth = this.flamechart.getTotalWeight()\n    const numAtlasEntriesPerLayer = Math.pow(2, zoomLevel)\n    const left = Math.floor(\n      numAtlasEntriesPerLayer * configSpaceSrcRect.left() / configSpaceContentWidth,\n    )\n    const right = Math.ceil(\n      numAtlasEntriesPerLayer * configSpaceSrcRect.right() / configSpaceContentWidth,\n    )\n\n    const nLayers = this.flamechart.getLayers().length\n\n    for (let y = top; y < bottom; y++) {\n      for (let index = left; index <= right; index++) {\n        const stackDepth = this.options.inverted ? nLayers - 1 - y : y\n        const key = FlamechartRowAtlasKey.getOrInsert(this.atlasKeys, {\n          stackDepth,\n          zoomLevel,\n          index,\n        })\n        const configSpaceBounds = this.configSpaceBoundsForKey(key)\n        if (!configSpaceBounds.hasIntersectionWith(configSpaceSrcRect)) continue\n        atlasKeysToRender.push(key)\n      }\n    }\n\n    // TODO(jlfwong): When I switched the GL backend from regl to the port from\n    // evanw/sky, rendering uncached even for massive documents seemed fast\n    // enough. It's possible that the row cache is now unnecessary, but I'll\n    // leave it around for now since it's not causing issues.\n\n    const cacheCapacity = this.rowAtlas.getCapacity()\n    const keysToRenderCached = atlasKeysToRender.slice(0, cacheCapacity)\n    const keysToRenderUncached = atlasKeysToRender.slice(cacheCapacity)\n\n    // Fill the cache\n    this.rowAtlas.writeToAtlasIfNeeded(keysToRenderCached, (textureDstRect, key) => {\n      const configSpaceBounds = this.configSpaceBoundsForKey(key)\n      this.layers[key.stackDepth].forEachLeafNodeWithinBounds(configSpaceBounds, leaf => {\n        this.rectangleBatchRenderer.render({\n          batch: leaf.getBatch(),\n          configSpaceSrcRect: configSpaceBounds,\n          physicalSpaceDstRect: textureDstRect,\n        })\n      })\n    })\n\n    const renderTarget = this.getRectInfoRenderTarget(\n      physicalSpaceDstRect.width(),\n      physicalSpaceDstRect.height(),\n    )\n\n    renderInto(this.gl, renderTarget, () => {\n      const viewportRect = new Rect(\n        Vec2.zero,\n        new Vec2(this.gl.viewport.width, this.gl.viewport.height),\n      )\n      const configToViewport = AffineTransform.betweenRects(configSpaceSrcRect, viewportRect)\n\n      // Render from the cache\n      for (let key of keysToRenderCached) {\n        const configSpaceSrcRect = this.configSpaceBoundsForKey(key)\n        this.rowAtlas.renderViaAtlas(key, configToViewport.transformRect(configSpaceSrcRect))\n      }\n\n      // Render entries that didn't make it into the cache\n      for (let key of keysToRenderUncached) {\n        const configSpaceBounds = this.configSpaceBoundsForKey(key)\n        const physicalBounds = configToViewport.transformRect(configSpaceBounds)\n        this.layers[key.stackDepth].forEachLeafNodeWithinBounds(configSpaceBounds, leaf => {\n          this.rectangleBatchRenderer.render({\n            batch: leaf.getBatch(),\n            configSpaceSrcRect: configSpaceBounds,\n            physicalSpaceDstRect: physicalBounds,\n          })\n        })\n      }\n    })\n\n    const rectInfoTexture = this.getRectInfoTexture(\n      physicalSpaceDstRect.width(),\n      physicalSpaceDstRect.height(),\n    )\n\n    this.colorPassRenderer.render({\n      rectInfoTexture,\n      srcRect: new Rect(Vec2.zero, new Vec2(rectInfoTexture.width, rectInfoTexture.height)),\n      dstRect: physicalSpaceDstRect,\n      renderOutlines: props.renderOutlines,\n    })\n  }\n}\n","import {StyleSheet} from 'aphrodite'\nimport {FontSize, Colors, Sizes} from './style'\n\nexport const style = StyleSheet.create({\n  hoverCount: {\n    color: Colors.GREEN,\n  },\n  fill: {\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n  },\n  minimap: {\n    height: Sizes.MINIMAP_HEIGHT,\n    borderBottom: `${Sizes.SEPARATOR_HEIGHT}px solid ${Colors.LIGHT_GRAY}`,\n  },\n  panZoomView: {\n    flex: 1,\n  },\n\n  detailView: {\n    display: 'grid',\n    height: Sizes.DETAIL_VIEW_HEIGHT,\n    overflow: 'hidden',\n    gridTemplateColumns: '120px 120px 1fr',\n    gridTemplateRows: 'repeat(4, 1fr)',\n    borderTop: `${Sizes.SEPARATOR_HEIGHT}px solid ${Colors.LIGHT_GRAY}`,\n    fontSize: FontSize.LABEL,\n    position: 'absolute',\n    background: Colors.WHITE,\n    width: '100vw',\n    bottom: 0,\n  },\n  stackTraceViewPadding: {\n    padding: 5,\n  },\n  stackTraceView: {\n    height: Sizes.DETAIL_VIEW_HEIGHT,\n    lineHeight: `${FontSize.LABEL + 2}px`,\n    overflow: 'auto',\n  },\n  stackLine: {\n    whiteSpace: 'nowrap',\n  },\n  stackFileLine: {\n    color: Colors.LIGHT_GRAY,\n  },\n  statsTable: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    gridTemplateRows: `repeat(3, ${FontSize.LABEL + 10}px)`,\n    gridGap: '1px 1px',\n    textAlign: 'center',\n    paddingRight: 1,\n  },\n  statsTableHeader: {\n    gridColumn: '1 / 3',\n  },\n  statsTableCell: {\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  thisInstanceCell: {\n    background: Colors.DARK_BLUE,\n    color: Colors.WHITE,\n  },\n  allInstancesCell: {\n    background: Colors.PALE_DARK_BLUE,\n    color: Colors.WHITE,\n  },\n  barDisplay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    background: 'rgba(0, 0, 0, 0.2)',\n    width: '100%',\n  },\n})\n","import {binarySearch} from './utils'\n\nexport const ELLIPSIS = '\\u2026'\n\n// NOTE: This blindly assumes the same result across contexts.\nconst measureTextCache = new Map<string, number>()\n\nlet lastDevicePixelRatio = -1\nexport function cachedMeasureTextWidth(ctx: CanvasRenderingContext2D, text: string): number {\n  if (window.devicePixelRatio !== lastDevicePixelRatio) {\n    // This cache is no longer valid!\n    measureTextCache.clear()\n    lastDevicePixelRatio = window.devicePixelRatio\n  }\n  if (!measureTextCache.has(text)) {\n    measureTextCache.set(text, ctx.measureText(text).width)\n  }\n  return measureTextCache.get(text)!\n}\n\nfunction buildTrimmedText(text: string, length: number) {\n  const prefixLength = Math.floor(length / 2)\n  const prefix = text.substr(0, prefixLength)\n  const suffix = text.substr(text.length - prefixLength, prefixLength)\n  return prefix + ELLIPSIS + suffix\n}\n\nexport function trimTextMid(ctx: CanvasRenderingContext2D, text: string, maxWidth: number) {\n  if (cachedMeasureTextWidth(ctx, text) <= maxWidth) return text\n  const [lo] = binarySearch(\n    0,\n    text.length,\n    n => {\n      return cachedMeasureTextWidth(ctx, buildTrimmedText(text, n))\n    },\n    maxWidth,\n  )\n  return buildTrimmedText(text, lo)\n}\n","import {h, Component} from 'preact'\nimport {css} from 'aphrodite'\nimport {Flamechart} from '../lib/flamechart'\nimport {Rect, Vec2, AffineTransform, clamp} from '../lib/math'\nimport {FlamechartRenderer} from '../gl/flamechart-renderer'\nimport {style} from './flamechart-style'\nimport {FontFamily, FontSize, Colors, Sizes, commonStyle} from './style'\nimport {CanvasContext} from '../gl/canvas-context'\nimport {cachedMeasureTextWidth} from '../lib/text-utils'\n\ninterface FlamechartMinimapViewProps {\n  flamechart: Flamechart\n  configSpaceViewportRect: Rect\n\n  canvasContext: CanvasContext\n  flamechartRenderer: FlamechartRenderer\n\n  transformViewport: (transform: AffineTransform) => void\n  setConfigSpaceViewportRect: (rect: Rect) => void\n}\n\nenum DraggingMode {\n  DRAW_NEW_VIEWPORT,\n  TRANSLATE_VIEWPORT,\n}\n\nexport class FlamechartMinimapView extends Component<FlamechartMinimapViewProps, {}> {\n  container: Element | null = null\n  containerRef = (element?: Element) => {\n    this.container = element || null\n  }\n\n  overlayCanvas: HTMLCanvasElement | null = null\n  overlayCtx: CanvasRenderingContext2D | null = null\n\n  private physicalViewSize() {\n    return new Vec2(\n      this.overlayCanvas ? this.overlayCanvas.width : 0,\n      this.overlayCanvas ? this.overlayCanvas.height : 0,\n    )\n  }\n\n  private minimapOrigin() {\n    return new Vec2(0, Sizes.FRAME_HEIGHT * window.devicePixelRatio)\n  }\n\n  private configSpaceSize() {\n    return new Vec2(\n      this.props.flamechart.getTotalWeight(),\n      this.props.flamechart.getLayers().length,\n    )\n  }\n\n  private configSpaceToPhysicalViewSpace() {\n    const minimapOrigin = this.minimapOrigin()\n\n    return AffineTransform.betweenRects(\n      new Rect(new Vec2(0, 0), this.configSpaceSize()),\n      new Rect(minimapOrigin, this.physicalViewSize().minus(minimapOrigin)),\n    )\n  }\n\n  private logicalToPhysicalViewSpace() {\n    return AffineTransform.withScale(new Vec2(window.devicePixelRatio, window.devicePixelRatio))\n  }\n\n  private windowToLogicalViewSpace() {\n    if (!this.container) return new AffineTransform()\n    const bounds = this.container.getBoundingClientRect()\n    return AffineTransform.withTranslation(new Vec2(-bounds.left, -bounds.top))\n  }\n\n  private renderRects() {\n    if (!this.container) return\n\n    // Hasn't resized yet -- no point in rendering yet\n    if (this.physicalViewSize().x < 2) return\n\n    this.props.canvasContext.renderBehind(this.container, () => {\n      this.props.flamechartRenderer.render({\n        configSpaceSrcRect: new Rect(new Vec2(0, 0), this.configSpaceSize()),\n        physicalSpaceDstRect: new Rect(\n          this.minimapOrigin(),\n          this.physicalViewSize().minus(this.minimapOrigin()),\n        ),\n        renderOutlines: false,\n      })\n\n      this.props.canvasContext.viewportRectangleRenderer.render({\n        configSpaceViewportRect: this.props.configSpaceViewportRect,\n        configSpaceToPhysicalViewSpace: this.configSpaceToPhysicalViewSpace(),\n      })\n    })\n  }\n\n  private renderOverlays() {\n    const ctx = this.overlayCtx\n    if (!ctx) return\n    const physicalViewSize = this.physicalViewSize()\n    ctx.clearRect(0, 0, physicalViewSize.x, physicalViewSize.y)\n\n    const configToPhysical = this.configSpaceToPhysicalViewSpace()\n\n    const left = 0\n    const right = this.configSpaceSize().x\n\n    // TODO(jlfwong): There's a huge amount of code duplication here between\n    // this and the FlamechartView.renderOverlays(). Consolidate.\n\n    // We want about 10 gridlines to be visible, and want the unit to be\n    // 1eN, 2eN, or 5eN for some N\n\n    // Ideally, we want an interval every 100 logical screen pixels\n    const logicalToConfig = (\n      this.configSpaceToPhysicalViewSpace().inverted() || new AffineTransform()\n    ).times(this.logicalToPhysicalViewSpace())\n    const targetInterval = logicalToConfig.transformVector(new Vec2(200, 1)).x\n\n    const physicalViewSpaceFrameHeight = Sizes.FRAME_HEIGHT * window.devicePixelRatio\n    const physicalViewSpaceFontSize = FontSize.LABEL * window.devicePixelRatio\n    const labelPaddingPx = (physicalViewSpaceFrameHeight - physicalViewSpaceFontSize) / 2\n\n    ctx.font = `${physicalViewSpaceFontSize}px/${physicalViewSpaceFrameHeight}px ${\n      FontFamily.MONOSPACE\n    }`\n    ctx.textBaseline = 'top'\n\n    const minInterval = Math.pow(10, Math.floor(Math.log10(targetInterval)))\n    let interval = minInterval\n\n    if (targetInterval / interval > 5) {\n      interval *= 5\n    } else if (targetInterval / interval > 2) {\n      interval *= 2\n    }\n\n    {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)'\n      ctx.fillRect(0, 0, physicalViewSize.x, physicalViewSpaceFrameHeight)\n      ctx.textBaseline = 'top'\n\n      ctx.fillStyle = Colors.DARK_GRAY\n      for (let x = Math.ceil(left / interval) * interval; x < right; x += interval) {\n        // TODO(jlfwong): Ensure that labels do not overlap\n        const pos = Math.round(configToPhysical.transformPosition(new Vec2(x, 0)).x)\n        const labelText = this.props.flamechart.formatValue(x)\n        const textWidth = Math.ceil(cachedMeasureTextWidth(ctx, labelText))\n\n        ctx.fillText(labelText, pos - textWidth - labelPaddingPx, labelPaddingPx)\n        ctx.fillRect(pos, 0, 1, physicalViewSize.y)\n      }\n    }\n  }\n\n  onWindowResize = () => {\n    this.onBeforeFrame()\n  }\n\n  componentWillReceiveProps(nextProps: FlamechartMinimapViewProps) {\n    if (this.props.flamechart !== nextProps.flamechart) {\n      this.renderCanvas()\n    } else if (this.props.configSpaceViewportRect != nextProps.configSpaceViewportRect) {\n      this.renderCanvas()\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.onWindowResize)\n    this.props.canvasContext.addBeforeFrameHandler(this.onBeforeFrame)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onWindowResize)\n    this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame)\n  }\n\n  private resizeOverlayCanvasIfNeeded() {\n    if (!this.overlayCanvas) return\n    let {width, height} = this.overlayCanvas.getBoundingClientRect()\n    {\n      /*\n      We render text at a higher resolution then scale down to\n      ensure we're rendering at 1:1 device pixel ratio.\n      This ensures our text is rendered crisply.\n    */\n    }\n    width = Math.floor(width)\n    height = Math.floor(height)\n\n    // Still initializing: don't resize yet\n    if (width === 0 || height === 0) return\n\n    const scaledWidth = width * window.devicePixelRatio\n    const scaledHeight = height * window.devicePixelRatio\n\n    if (scaledWidth === this.overlayCanvas.width && scaledHeight === this.overlayCanvas.height)\n      return\n\n    this.overlayCanvas.width = scaledWidth\n    this.overlayCanvas.height = scaledHeight\n  }\n\n  private onBeforeFrame = () => {\n    this.maybeClearInteractionLock()\n    this.resizeOverlayCanvasIfNeeded()\n    this.renderRects()\n    this.renderOverlays()\n  }\n\n  private renderCanvas = () => {\n    this.props.canvasContext.requestFrame()\n  }\n\n  // Inertial scrolling introduces tricky interaction problems.\n  // Namely, if you start panning, and hit the edge of the scrollable\n  // area, the browser continues to receive WheelEvents from inertial\n  // scrolling. If we start zooming by holding Cmd + scrolling, then\n  // release the Cmd key, this can cause us to interpret the incoming\n  // inertial scrolling events as panning. To prevent this, we introduce\n  // a concept of an \"Interaction Lock\". Once a certain interaction has\n  // begun, we don't allow the other type of interaction to begin until\n  // we've received two frames with no inertial wheel events. This\n  // prevents us from accidentally switching between panning & zooming.\n  private frameHadWheelEvent = false\n  private framesWithoutWheelEvents = 0\n  private interactionLock: 'pan' | 'zoom' | null = null\n  private maybeClearInteractionLock = () => {\n    if (this.interactionLock) {\n      if (!this.frameHadWheelEvent) {\n        this.framesWithoutWheelEvents++\n        if (this.framesWithoutWheelEvents >= 2) {\n          this.interactionLock = null\n          this.framesWithoutWheelEvents = 0\n        }\n      }\n      this.props.canvasContext.requestFrame()\n    }\n    this.frameHadWheelEvent = false\n  }\n\n  private pan(logicalViewSpaceDelta: Vec2) {\n    this.interactionLock = 'pan'\n    const physicalDelta = this.logicalToPhysicalViewSpace().transformVector(logicalViewSpaceDelta)\n    const configDelta = this.configSpaceToPhysicalViewSpace().inverseTransformVector(physicalDelta)\n\n    if (!configDelta) return\n    this.props.transformViewport(AffineTransform.withTranslation(configDelta))\n  }\n\n  private zoom(multiplier: number) {\n    this.interactionLock = 'zoom'\n    const configSpaceViewport = this.props.configSpaceViewportRect\n    const configSpaceCenter = configSpaceViewport.origin.plus(configSpaceViewport.size.times(1 / 2))\n    if (!configSpaceCenter) return\n\n    const zoomTransform = AffineTransform.withTranslation(configSpaceCenter.times(-1))\n      .scaledBy(new Vec2(multiplier, 1))\n      .translatedBy(configSpaceCenter)\n\n    this.props.transformViewport(zoomTransform)\n  }\n\n  private onWheel = (ev: WheelEvent) => {\n    ev.preventDefault()\n\n    this.frameHadWheelEvent = true\n\n    const isZoom = ev.metaKey || ev.ctrlKey\n\n    if (isZoom && this.interactionLock !== 'pan') {\n      let multiplier = 1 + ev.deltaY / 100\n\n      // On Chrome & Firefox, pinch-to-zoom maps to\n      // WheelEvent + Ctrl Key. We'll accelerate it in\n      // this case, since it feels a bit sluggish otherwise.\n      if (ev.ctrlKey) {\n        multiplier = 1 + ev.deltaY / 40\n      }\n\n      multiplier = clamp(multiplier, 0.1, 10.0)\n\n      this.zoom(multiplier)\n    } else if (this.interactionLock !== 'zoom') {\n      this.pan(new Vec2(ev.deltaX, ev.deltaY))\n    }\n\n    this.renderCanvas()\n  }\n\n  private configSpaceMouse(ev: MouseEvent): Vec2 | null {\n    const logicalSpaceMouse = this.windowToLogicalViewSpace().transformPosition(\n      new Vec2(ev.clientX, ev.clientY),\n    )\n    const physicalSpaceMouse = this.logicalToPhysicalViewSpace().transformPosition(\n      logicalSpaceMouse,\n    )\n    return this.configSpaceToPhysicalViewSpace().inverseTransformPosition(physicalSpaceMouse)\n  }\n\n  private dragStartConfigSpaceMouse: Vec2 | null = null\n  private dragConfigSpaceViewportOffset: Vec2 | null = null\n  private draggingMode: DraggingMode | null = null\n  private onMouseDown = (ev: MouseEvent) => {\n    const configSpaceMouse = this.configSpaceMouse(ev)\n\n    if (configSpaceMouse) {\n      if (this.props.configSpaceViewportRect.contains(configSpaceMouse)) {\n        // If dragging starting inside the viewport rectangle,\n        // we'll move the existing viewport\n        this.draggingMode = DraggingMode.TRANSLATE_VIEWPORT\n        this.dragConfigSpaceViewportOffset = configSpaceMouse.minus(\n          this.props.configSpaceViewportRect.origin,\n        )\n      } else {\n        // If dragging starts outside the the viewport rectangle,\n        // we'll start drawing a new viewport\n        this.draggingMode = DraggingMode.DRAW_NEW_VIEWPORT\n      }\n\n      this.dragStartConfigSpaceMouse = configSpaceMouse\n      window.addEventListener('mousemove', this.onWindowMouseMove)\n      window.addEventListener('mouseup', this.onWindowMouseUp)\n      this.updateCursor(configSpaceMouse)\n    }\n  }\n\n  private onWindowMouseMove = (ev: MouseEvent) => {\n    if (!this.dragStartConfigSpaceMouse) return\n    let configSpaceMouse = this.configSpaceMouse(ev)\n\n    if (!configSpaceMouse) return\n    this.updateCursor(configSpaceMouse)\n\n    // Clamp the mouse position to avoid weird behavior when outside the canvas bounds\n    configSpaceMouse = new Rect(new Vec2(0, 0), this.configSpaceSize()).closestPointTo(\n      configSpaceMouse,\n    )\n\n    if (this.draggingMode === DraggingMode.DRAW_NEW_VIEWPORT) {\n      const configStart = this.dragStartConfigSpaceMouse\n      let configEnd = configSpaceMouse\n\n      if (!configStart || !configEnd) return\n      const left = Math.min(configStart.x, configEnd.x)\n      const right = Math.max(configStart.x, configEnd.x)\n\n      const width = right - left\n      const height = this.props.configSpaceViewportRect.height()\n\n      this.props.setConfigSpaceViewportRect(\n        new Rect(new Vec2(left, configEnd.y - height / 2), new Vec2(width, height)),\n      )\n    } else if (this.draggingMode === DraggingMode.TRANSLATE_VIEWPORT) {\n      if (!this.dragConfigSpaceViewportOffset) return\n\n      const newOrigin = configSpaceMouse.minus(this.dragConfigSpaceViewportOffset)\n      this.props.setConfigSpaceViewportRect(\n        this.props.configSpaceViewportRect.withOrigin(newOrigin),\n      )\n    }\n  }\n\n  private updateCursor = (configSpaceMouse: Vec2) => {\n    if (this.draggingMode === DraggingMode.TRANSLATE_VIEWPORT) {\n      document.body.style.cursor = 'grabbing'\n      document.body.style.cursor = '-webkit-grabbing'\n    } else if (this.draggingMode === DraggingMode.DRAW_NEW_VIEWPORT) {\n      document.body.style.cursor = 'col-resize'\n    } else if (this.props.configSpaceViewportRect.contains(configSpaceMouse)) {\n      document.body.style.cursor = 'grab'\n      document.body.style.cursor = '-webkit-grab'\n    } else {\n      document.body.style.cursor = 'col-resize'\n    }\n  }\n\n  private onMouseLeave = () => {\n    if (this.draggingMode == null) {\n      document.body.style.cursor = 'default'\n    }\n  }\n\n  private onMouseMove = (ev: MouseEvent) => {\n    const configSpaceMouse = this.configSpaceMouse(ev)\n    if (!configSpaceMouse) return\n    this.updateCursor(configSpaceMouse)\n  }\n\n  private onWindowMouseUp = (ev: MouseEvent) => {\n    this.draggingMode = null\n    window.removeEventListener('mousemove', this.onWindowMouseMove)\n    window.removeEventListener('mouseup', this.onWindowMouseUp)\n\n    const configSpaceMouse = this.configSpaceMouse(ev)\n    if (!configSpaceMouse) return\n    this.updateCursor(configSpaceMouse)\n  }\n\n  private overlayCanvasRef = (element?: Element) => {\n    if (element) {\n      this.overlayCanvas = element as HTMLCanvasElement\n      this.overlayCtx = this.overlayCanvas.getContext('2d')\n      this.renderCanvas()\n    } else {\n      this.overlayCanvas = null\n      this.overlayCtx = null\n    }\n  }\n\n  render() {\n    return (\n      <div\n        ref={this.containerRef}\n        onWheel={this.onWheel}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n        onMouseLeave={this.onMouseLeave}\n        className={css(style.minimap, commonStyle.vbox)}\n      >\n        <canvas width={1} height={1} ref={this.overlayCanvasRef} className={css(style.fill)} />\n      </div>\n    )\n  }\n}\n","import {StyleDeclarationValue, css} from 'aphrodite'\nimport {h, Component} from 'preact'\nimport {style} from './flamechart-style'\nimport {formatPercent} from '../lib/utils'\nimport {Frame, CallTreeNode} from '../lib/profile'\nimport {ColorChit} from './color-chit'\nimport {Flamechart} from '../lib/flamechart'\n\ninterface StatisticsTableProps {\n  title: string\n  grandTotal: number\n  selectedTotal: number\n  selectedSelf: number\n  cellStyle: StyleDeclarationValue\n  formatter: (v: number) => string\n}\n\nclass StatisticsTable extends Component<StatisticsTableProps, {}> {\n  render() {\n    const total = this.props.formatter(this.props.selectedTotal)\n    const self = this.props.formatter(this.props.selectedSelf)\n    const totalPerc = 100.0 * this.props.selectedTotal / this.props.grandTotal\n    const selfPerc = 100.0 * this.props.selectedSelf / this.props.grandTotal\n\n    return (\n      <div className={css(style.statsTable)}>\n        <div className={css(this.props.cellStyle, style.statsTableCell, style.statsTableHeader)}>\n          {this.props.title}\n        </div>\n\n        <div className={css(this.props.cellStyle, style.statsTableCell)}>Total</div>\n        <div className={css(this.props.cellStyle, style.statsTableCell)}>Self</div>\n\n        <div className={css(this.props.cellStyle, style.statsTableCell)}>{total}</div>\n        <div className={css(this.props.cellStyle, style.statsTableCell)}>{self}</div>\n\n        <div className={css(this.props.cellStyle, style.statsTableCell)}>\n          {formatPercent(totalPerc)}\n          <div className={css(style.barDisplay)} style={{height: `${totalPerc}%`}} />\n        </div>\n        <div className={css(this.props.cellStyle, style.statsTableCell)}>\n          {formatPercent(selfPerc)}\n          <div className={css(style.barDisplay)} style={{height: `${selfPerc}%`}} />\n        </div>\n      </div>\n    )\n  }\n}\n\ninterface StackTraceViewProps {\n  getFrameColor: (frame: Frame) => string\n  node: CallTreeNode\n}\nclass StackTraceView extends Component<StackTraceViewProps, {}> {\n  render() {\n    const rows: JSX.Element[] = []\n    let node: CallTreeNode | null = this.props.node\n    for (; node && !node.isRoot(); node = node.parent) {\n      const row: (JSX.Element | string)[] = []\n      const {frame} = node\n\n      row.push(<ColorChit color={this.props.getFrameColor(frame)} />)\n\n      if (rows.length) {\n        row.push(<span className={css(style.stackFileLine)}>> </span>)\n      }\n      row.push(frame.name)\n\n      if (frame.file) {\n        let pos = frame.file\n        if (frame.line) {\n          pos += `:${frame.line}`\n          if (frame.col) {\n            pos += `:${frame.col}`\n          }\n        }\n        row.push(<span className={css(style.stackFileLine)}> ({pos})</span>)\n      }\n      rows.push(<div className={css(style.stackLine)}>{row}</div>)\n    }\n    return (\n      <div className={css(style.stackTraceView)}>\n        <div className={css(style.stackTraceViewPadding)}>{rows}</div>\n      </div>\n    )\n  }\n}\n\ninterface FlamechartDetailViewProps {\n  flamechart: Flamechart\n  getCSSColorForFrame: (frame: Frame) => string\n  selectedNode: CallTreeNode\n}\n\nexport class FlamechartDetailView extends Component<FlamechartDetailViewProps, {}> {\n  render() {\n    const {flamechart, selectedNode} = this.props\n    const {frame} = selectedNode\n\n    return (\n      <div className={css(style.detailView)}>\n        <StatisticsTable\n          title={'This Instance'}\n          cellStyle={style.thisInstanceCell}\n          grandTotal={flamechart.getTotalWeight()}\n          selectedTotal={selectedNode.getTotalWeight()}\n          selectedSelf={selectedNode.getSelfWeight()}\n          formatter={flamechart.formatValue.bind(flamechart)}\n        />\n        <StatisticsTable\n          title={'All Instances'}\n          cellStyle={style.allInstancesCell}\n          grandTotal={flamechart.getTotalWeight()}\n          selectedTotal={frame.getTotalWeight()}\n          selectedSelf={frame.getSelfWeight()}\n          formatter={flamechart.formatValue.bind(flamechart)}\n        />\n        <StackTraceView node={selectedNode} getFrameColor={this.props.getCSSColorForFrame} />\n      </div>\n    )\n  }\n}\n","import {Rect, AffineTransform, Vec2, clamp} from '../lib/math'\nimport {CallTreeNode} from '../lib/profile'\nimport {Flamechart, FlamechartFrame} from '../lib/flamechart'\nimport {CanvasContext} from '../gl/canvas-context'\nimport {FlamechartRenderer} from '../gl/flamechart-renderer'\nimport {Sizes, FontSize, Colors, FontFamily, commonStyle} from './style'\nimport {cachedMeasureTextWidth, ELLIPSIS, trimTextMid} from '../lib/text-utils'\nimport {style} from './flamechart-style'\nimport {h, Component} from 'preact'\nimport {css} from 'aphrodite'\n\ninterface FlamechartFrameLabel {\n  configSpaceBounds: Rect\n  node: CallTreeNode\n}\n\n/**\n * Component to visualize a Flamechart and interact with it via hovering,\n * zooming, and panning.\n *\n * There are 3 vector spaces involved:\n * - Configuration Space: In this space, the horizontal unit is ms, and the\n *   vertical unit is stack depth. Each stack frame is one unit high.\n * - Logical view space: Origin is top-left, with +y downwards. This represents\n *   the coordinate space of the view as specified in CSS: horizontal and vertical\n *   units are both \"logical\" pixels.\n * - Physical view space: Origin is top-left, with +y downwards. This represents\n *   the coordinate space of the view as specified in hardware pixels: horizontal\n *   and vertical units are both \"physical\" pixels.\n *\n * We use two canvases to draw the flamechart itself: one for the rectangles,\n * which we render via WebGL, and one for the labels, which we render via 2D\n * canvas primitives.\n */\nexport interface FlamechartPanZoomViewProps {\n  flamechart: Flamechart\n  canvasContext: CanvasContext\n  flamechartRenderer: FlamechartRenderer\n  renderInverted: boolean\n  selectedNode: CallTreeNode | null\n\n  onNodeHover: (hover: {node: CallTreeNode; event: MouseEvent} | null) => void\n  onNodeSelect: (node: CallTreeNode | null) => void\n\n  configSpaceViewportRect: Rect\n  transformViewport: (transform: AffineTransform) => void\n  setConfigSpaceViewportRect: (rect: Rect) => void\n\n  logicalSpaceViewportSize: Vec2\n  setLogicalSpaceViewportBounds: (size: Vec2) => void\n}\n\nexport class FlamechartPanZoomView extends Component<FlamechartPanZoomViewProps, {}> {\n  private container: Element | null = null\n  private containerRef = (element?: Element) => {\n    this.container = element || null\n  }\n\n  private overlayCanvas: HTMLCanvasElement | null = null\n  private overlayCtx: CanvasRenderingContext2D | null = null\n\n  private hoveredLabel: FlamechartFrameLabel | null = null\n\n  private setConfigSpaceViewportRect(r: Rect) {\n    this.props.setConfigSpaceViewportRect(r)\n  }\n\n  private overlayCanvasRef = (element?: Element) => {\n    if (element) {\n      this.overlayCanvas = element as HTMLCanvasElement\n      this.overlayCtx = this.overlayCanvas.getContext('2d')\n      this.renderCanvas()\n    } else {\n      this.overlayCanvas = null\n      this.overlayCtx = null\n    }\n  }\n\n  private configSpaceSize() {\n    return new Vec2(\n      this.props.flamechart.getTotalWeight(),\n      this.props.flamechart.getLayers().length,\n    )\n  }\n\n  private physicalViewSize() {\n    return new Vec2(\n      this.overlayCanvas ? this.overlayCanvas.width : 0,\n      this.overlayCanvas ? this.overlayCanvas.height : 0,\n    )\n  }\n\n  private physicalBounds(): Rect {\n    if (this.props.renderInverted) {\n      // If we're rendering inverted and the flamegraph won't fill the viewport,\n      // we want to stick the flamegraph to the bottom of the viewport, not the top.\n\n      const physicalViewportHeight = this.physicalViewSize().y\n      const physicalFlamegraphHeight =\n        (this.configSpaceSize().y + 1) *\n        this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT *\n        window.devicePixelRatio\n\n      if (physicalFlamegraphHeight < physicalViewportHeight) {\n        return new Rect(\n          new Vec2(0, physicalViewportHeight - physicalFlamegraphHeight),\n          this.physicalViewSize(),\n        )\n      }\n    }\n\n    return new Rect(new Vec2(0, 0), this.physicalViewSize())\n  }\n\n  private LOGICAL_VIEW_SPACE_FRAME_HEIGHT = Sizes.FRAME_HEIGHT\n\n  private configSpaceToPhysicalViewSpace() {\n    return AffineTransform.betweenRects(this.props.configSpaceViewportRect, this.physicalBounds())\n  }\n\n  private logicalToPhysicalViewSpace() {\n    return AffineTransform.withScale(new Vec2(window.devicePixelRatio, window.devicePixelRatio))\n  }\n\n  private resizeOverlayCanvasIfNeeded() {\n    if (!this.overlayCanvas) return\n    let {width, height} = this.overlayCanvas.getBoundingClientRect()\n    {\n      /*\n      We render text at a higher resolution then scale down to\n      ensure we're rendering at 1:1 device pixel ratio.\n      This ensures our text is rendered crisply.\n    */\n    }\n    width = Math.floor(width)\n    height = Math.floor(height)\n\n    // Still initializing: don't resize yet\n    if (width === 0 || height === 0) return\n\n    const scaledWidth = width * window.devicePixelRatio\n    const scaledHeight = height * window.devicePixelRatio\n\n    if (scaledWidth === this.overlayCanvas.width && scaledHeight === this.overlayCanvas.height)\n      return\n\n    this.overlayCanvas.width = scaledWidth\n    this.overlayCanvas.height = scaledHeight\n  }\n\n  private renderOverlays() {\n    const ctx = this.overlayCtx\n    if (!ctx) return\n    if (this.props.configSpaceViewportRect.isEmpty()) return\n\n    const configToPhysical = this.configSpaceToPhysicalViewSpace()\n\n    const physicalViewSpaceFontSize = FontSize.LABEL * window.devicePixelRatio\n    const physicalViewSpaceFrameHeight =\n      this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT * window.devicePixelRatio\n\n    const physicalViewSize = this.physicalViewSize()\n\n    ctx.clearRect(0, 0, physicalViewSize.x, physicalViewSize.y)\n\n    if (this.hoveredLabel) {\n      let color = Colors.DARK_GRAY\n      if (this.props.selectedNode === this.hoveredLabel.node) {\n        color = Colors.DARK_BLUE\n      }\n\n      ctx.lineWidth = 2 * devicePixelRatio\n      ctx.strokeStyle = color\n\n      const physicalViewBounds = configToPhysical.transformRect(this.hoveredLabel.configSpaceBounds)\n      ctx.strokeRect(\n        Math.round(physicalViewBounds.left()),\n        Math.round(physicalViewBounds.top()),\n        Math.round(Math.max(0, physicalViewBounds.width())),\n        Math.round(Math.max(0, physicalViewBounds.height())),\n      )\n    }\n\n    ctx.font = `${physicalViewSpaceFontSize}px/${physicalViewSpaceFrameHeight}px ${\n      FontFamily.MONOSPACE\n    }`\n    ctx.textBaseline = 'alphabetic'\n    ctx.fillStyle = Colors.DARK_GRAY\n\n    const minWidthToRender = cachedMeasureTextWidth(ctx, 'M' + ELLIPSIS + 'M')\n    const minConfigSpaceWidthToRender = (\n      configToPhysical.inverseTransformVector(new Vec2(minWidthToRender, 0)) || new Vec2(0, 0)\n    ).x\n\n    const LABEL_PADDING_PX = 5 * window.devicePixelRatio\n\n    const renderFrameLabelAndChildren = (frame: FlamechartFrame, depth = 0) => {\n      const width = frame.end - frame.start\n      const y = this.props.renderInverted ? this.configSpaceSize().y - 1 - depth : depth\n      const configSpaceBounds = new Rect(new Vec2(frame.start, y), new Vec2(width, 1))\n\n      if (width < minConfigSpaceWidthToRender) return\n      if (configSpaceBounds.left() > this.props.configSpaceViewportRect.right()) return\n      if (configSpaceBounds.right() < this.props.configSpaceViewportRect.left()) return\n\n      if (this.props.renderInverted) {\n        if (configSpaceBounds.bottom() < this.props.configSpaceViewportRect.top()) return\n      } else {\n        if (configSpaceBounds.top() > this.props.configSpaceViewportRect.bottom()) return\n      }\n\n      if (configSpaceBounds.hasIntersectionWith(this.props.configSpaceViewportRect)) {\n        let physicalLabelBounds = configToPhysical.transformRect(configSpaceBounds)\n\n        if (physicalLabelBounds.left() < 0) {\n          physicalLabelBounds = physicalLabelBounds\n            .withOrigin(physicalLabelBounds.origin.withX(0))\n            .withSize(\n              physicalLabelBounds.size.withX(\n                physicalLabelBounds.size.x + physicalLabelBounds.left(),\n              ),\n            )\n        }\n        if (physicalLabelBounds.right() > physicalViewSize.x) {\n          physicalLabelBounds = physicalLabelBounds.withSize(\n            physicalLabelBounds.size.withX(physicalViewSize.x - physicalLabelBounds.left()),\n          )\n        }\n\n        if (physicalLabelBounds.width() > minWidthToRender) {\n          const trimmedText = trimTextMid(\n            ctx,\n            frame.node.frame.name,\n            physicalLabelBounds.width() - 2 * LABEL_PADDING_PX,\n          )\n\n          // Note that this is specifying the position of the starting text\n          // baseline.\n          ctx.fillText(\n            trimmedText,\n            physicalLabelBounds.left() + LABEL_PADDING_PX,\n            Math.round(\n              physicalLabelBounds.bottom() -\n                (physicalViewSpaceFrameHeight - physicalViewSpaceFontSize) / 2,\n            ),\n          )\n        }\n      }\n      for (let child of frame.children) {\n        renderFrameLabelAndChildren(child, depth + 1)\n      }\n    }\n\n    for (let frame of this.props.flamechart.getLayers()[0] || []) {\n      renderFrameLabelAndChildren(frame)\n    }\n\n    const frameOutlineWidth = 2 * window.devicePixelRatio\n    ctx.strokeStyle = Colors.PALE_DARK_BLUE\n    ctx.lineWidth = frameOutlineWidth\n    const minConfigSpaceWidthToRenderOutline = (\n      configToPhysical.inverseTransformVector(new Vec2(1, 0)) || new Vec2(0, 0)\n    ).x\n    const renderIndirectlySelectedFrameOutlines = (frame: FlamechartFrame, depth = 0) => {\n      if (!this.props.selectedNode) return\n      const width = frame.end - frame.start\n      const y = this.props.renderInverted ? this.configSpaceSize().y - 1 - depth : depth\n      const configSpaceBounds = new Rect(new Vec2(frame.start, y), new Vec2(width, 1))\n\n      if (width < minConfigSpaceWidthToRenderOutline) return\n      if (configSpaceBounds.left() > this.props.configSpaceViewportRect.right()) return\n      if (configSpaceBounds.right() < this.props.configSpaceViewportRect.left()) return\n      if (configSpaceBounds.top() > this.props.configSpaceViewportRect.bottom()) return\n\n      if (configSpaceBounds.hasIntersectionWith(this.props.configSpaceViewportRect)) {\n        const physicalRectBounds = configToPhysical.transformRect(configSpaceBounds)\n\n        if (frame.node.frame === this.props.selectedNode.frame) {\n          if (frame.node === this.props.selectedNode) {\n            if (ctx.strokeStyle !== Colors.DARK_BLUE) {\n              ctx.stroke()\n              ctx.beginPath()\n              ctx.strokeStyle = Colors.DARK_BLUE\n            }\n          } else {\n            if (ctx.strokeStyle !== Colors.PALE_DARK_BLUE) {\n              ctx.stroke()\n              ctx.beginPath()\n              ctx.strokeStyle = Colors.PALE_DARK_BLUE\n            }\n          }\n\n          // Identify the flamechart frames with a function that matches the\n          // selected flamechart frame.\n          ctx.rect(\n            Math.round(physicalRectBounds.left() + 1 + frameOutlineWidth / 2),\n            Math.round(physicalRectBounds.top() + 1 + frameOutlineWidth / 2),\n            Math.round(Math.max(0, physicalRectBounds.width() - 2 - frameOutlineWidth)),\n            Math.round(Math.max(0, physicalRectBounds.height() - 2 - frameOutlineWidth)),\n          )\n        }\n      }\n\n      for (let child of frame.children) {\n        renderIndirectlySelectedFrameOutlines(child, depth + 1)\n      }\n    }\n\n    ctx.beginPath()\n    for (let frame of this.props.flamechart.getLayers()[0] || []) {\n      renderIndirectlySelectedFrameOutlines(frame)\n    }\n    ctx.stroke()\n\n    this.renderTimeIndicators()\n  }\n\n  private renderTimeIndicators() {\n    const ctx = this.overlayCtx\n    if (!ctx) return\n\n    const physicalViewSpaceFrameHeight =\n      this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT * window.devicePixelRatio\n    const physicalViewSize = this.physicalViewSize()\n    const configToPhysical = this.configSpaceToPhysicalViewSpace()\n    const physicalViewSpaceFontSize = FontSize.LABEL * window.devicePixelRatio\n    const labelPaddingPx = (physicalViewSpaceFrameHeight - physicalViewSpaceFontSize) / 2\n\n    const left = this.props.configSpaceViewportRect.left()\n    const right = this.props.configSpaceViewportRect.right()\n    // We want about 10 gridlines to be visible, and want the unit to be\n    // 1eN, 2eN, or 5eN for some N\n    // Ideally, we want an interval every 100 logical screen pixels\n    const logicalToConfig = (\n      this.configSpaceToPhysicalViewSpace().inverted() || new AffineTransform()\n    ).times(this.logicalToPhysicalViewSpace())\n    const targetInterval = logicalToConfig.transformVector(new Vec2(200, 1)).x\n    const minInterval = Math.pow(10, Math.floor(Math.log10(targetInterval)))\n    let interval = minInterval\n    if (targetInterval / interval > 5) {\n      interval *= 5\n    } else if (targetInterval / interval > 2) {\n      interval *= 2\n    }\n\n    {\n      const y = this.props.renderInverted ? physicalViewSize.y - physicalViewSpaceFrameHeight : 0\n\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)'\n      ctx.fillRect(0, y, physicalViewSize.x, physicalViewSpaceFrameHeight)\n      ctx.fillStyle = Colors.DARK_GRAY\n      ctx.textBaseline = 'top'\n      for (let x = Math.ceil(left / interval) * interval; x < right; x += interval) {\n        // TODO(jlfwong): Ensure that labels do not overlap\n        const pos = Math.round(configToPhysical.transformPosition(new Vec2(x, 0)).x)\n        const labelText = this.props.flamechart.formatValue(x)\n        const textWidth = cachedMeasureTextWidth(ctx, labelText)\n        ctx.fillText(labelText, pos - textWidth - labelPaddingPx, y + labelPaddingPx)\n        ctx.fillRect(pos, 0, 1, physicalViewSize.y)\n      }\n    }\n  }\n\n  private updateConfigSpaceViewport() {\n    if (!this.container) return\n    const {logicalSpaceViewportSize} = this.props\n    const bounds = this.container.getBoundingClientRect()\n    const {width, height} = bounds\n\n    // Still initializing: don't resize yet\n    if (width < 2 || height < 2) return\n\n    if (this.props.configSpaceViewportRect.isEmpty()) {\n      const configSpaceViewportHeight = height / this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT\n      if (this.props.renderInverted) {\n        this.setConfigSpaceViewportRect(\n          new Rect(\n            new Vec2(0, this.configSpaceSize().y - configSpaceViewportHeight + 1),\n            new Vec2(this.configSpaceSize().x, configSpaceViewportHeight),\n          ),\n        )\n      } else {\n        this.setConfigSpaceViewportRect(\n          new Rect(new Vec2(0, -1), new Vec2(this.configSpaceSize().x, configSpaceViewportHeight)),\n        )\n      }\n    } else if (\n      !logicalSpaceViewportSize.equals(Vec2.zero) &&\n      (logicalSpaceViewportSize.x !== width || logicalSpaceViewportSize.y !== height)\n    ) {\n      // Resize the viewport rectangle to match the window size aspect\n      // ratio.\n      this.setConfigSpaceViewportRect(\n        this.props.configSpaceViewportRect.withSize(\n          this.props.configSpaceViewportRect.size.timesPointwise(\n            new Vec2(width / logicalSpaceViewportSize.x, height / logicalSpaceViewportSize.y),\n          ),\n        ),\n      )\n    }\n    this.props.setLogicalSpaceViewportBounds(new Vec2(width, height))\n  }\n\n  onWindowResize = () => {\n    this.updateConfigSpaceViewport()\n    this.onBeforeFrame()\n  }\n\n  private renderRects() {\n    if (!this.container) return\n    this.updateConfigSpaceViewport()\n\n    if (this.props.configSpaceViewportRect.isEmpty()) return\n\n    this.props.canvasContext.renderBehind(this.container, () => {\n      this.props.flamechartRenderer.render({\n        physicalSpaceDstRect: this.physicalBounds(),\n        configSpaceSrcRect: this.props.configSpaceViewportRect,\n        renderOutlines: true,\n      })\n    })\n  }\n\n  // Inertial scrolling introduces tricky interaction problems.\n  // Namely, if you start panning, and hit the edge of the scrollable\n  // area, the browser continues to receive WheelEvents from inertial\n  // scrolling. If we start zooming by holding Cmd + scrolling, then\n  // release the Cmd key, this can cause us to interpret the incoming\n  // inertial scrolling events as panning. To prevent this, we introduce\n  // a concept of an \"Interaction Lock\". Once a certain interaction has\n  // begun, we don't allow the other type of interaction to begin until\n  // we've received two frames with no inertial wheel events. This\n  // prevents us from accidentally switching between panning & zooming.\n  private frameHadWheelEvent = false\n  private framesWithoutWheelEvents = 0\n  private interactionLock: 'pan' | 'zoom' | null = null\n  private maybeClearInteractionLock = () => {\n    if (this.interactionLock) {\n      if (!this.frameHadWheelEvent) {\n        this.framesWithoutWheelEvents++\n        if (this.framesWithoutWheelEvents >= 2) {\n          this.interactionLock = null\n          this.framesWithoutWheelEvents = 0\n        }\n      }\n      this.props.canvasContext.requestFrame()\n    }\n    this.frameHadWheelEvent = false\n  }\n\n  private onBeforeFrame = () => {\n    this.resizeOverlayCanvasIfNeeded()\n    this.renderRects()\n    this.renderOverlays()\n    this.maybeClearInteractionLock()\n  }\n\n  private renderCanvas = () => {\n    this.props.canvasContext.requestFrame()\n  }\n\n  private pan(logicalViewSpaceDelta: Vec2) {\n    this.interactionLock = 'pan'\n\n    const physicalDelta = this.logicalToPhysicalViewSpace().transformVector(logicalViewSpaceDelta)\n    const configDelta = this.configSpaceToPhysicalViewSpace().inverseTransformVector(physicalDelta)\n\n    if (this.hoveredLabel) {\n      this.props.onNodeHover(null)\n    }\n\n    if (!configDelta) return\n    this.props.transformViewport(AffineTransform.withTranslation(configDelta))\n  }\n\n  private zoom(logicalViewSpaceCenter: Vec2, multiplier: number) {\n    this.interactionLock = 'zoom'\n\n    const physicalCenter = this.logicalToPhysicalViewSpace().transformPosition(\n      logicalViewSpaceCenter,\n    )\n    const configSpaceCenter = this.configSpaceToPhysicalViewSpace().inverseTransformPosition(\n      physicalCenter,\n    )\n    if (!configSpaceCenter) return\n\n    const zoomTransform = AffineTransform.withTranslation(configSpaceCenter.times(-1))\n      .scaledBy(new Vec2(multiplier, 1))\n      .translatedBy(configSpaceCenter)\n\n    this.props.transformViewport(zoomTransform)\n  }\n\n  private lastDragPos: Vec2 | null = null\n  private mouseDownPos: Vec2 | null = null\n  private onMouseDown = (ev: MouseEvent) => {\n    this.mouseDownPos = this.lastDragPos = new Vec2(ev.offsetX, ev.offsetY)\n    this.updateCursor()\n    window.addEventListener('mouseup', this.onWindowMouseUp)\n  }\n\n  private onMouseDrag = (ev: MouseEvent) => {\n    if (!this.lastDragPos) return\n    const logicalMousePos = new Vec2(ev.offsetX, ev.offsetY)\n    this.pan(this.lastDragPos.minus(logicalMousePos))\n    this.lastDragPos = logicalMousePos\n\n    // When panning by scrolling, the element under\n    // the cursor will change, so clear the hovered label.\n    if (this.hoveredLabel) {\n      this.props.onNodeHover(null)\n    }\n  }\n\n  private onDblClick = (ev: MouseEvent) => {\n    if (this.hoveredLabel) {\n      const hoveredBounds = this.hoveredLabel.configSpaceBounds\n      const viewportRect = new Rect(\n        hoveredBounds.origin.minus(new Vec2(0, 1)),\n        hoveredBounds.size.withY(this.props.configSpaceViewportRect.height()),\n      )\n      this.props.setConfigSpaceViewportRect(viewportRect)\n    }\n  }\n\n  private onClick = (ev: MouseEvent) => {\n    const logicalMousePos = new Vec2(ev.offsetX, ev.offsetY)\n    const mouseDownPos = this.mouseDownPos\n    this.mouseDownPos = null\n\n    if (mouseDownPos && logicalMousePos.minus(mouseDownPos).length() > 5) {\n      // If the cursor is more than 5 logical space pixels away from the mouse\n      // down location, then don't interpret this event as a click.\n      return\n    }\n\n    if (this.hoveredLabel) {\n      this.props.onNodeSelect(this.hoveredLabel.node)\n      this.renderCanvas()\n    } else {\n      this.props.onNodeSelect(null)\n    }\n  }\n\n  private updateCursor() {\n    if (this.lastDragPos) {\n      document.body.style.cursor = 'grabbing'\n      document.body.style.cursor = '-webkit-grabbing'\n    } else {\n      document.body.style.cursor = 'default'\n    }\n  }\n\n  private onWindowMouseUp = (ev: MouseEvent) => {\n    this.lastDragPos = null\n    this.updateCursor()\n    window.removeEventListener('mouseup', this.onWindowMouseUp)\n  }\n\n  private onMouseMove = (ev: MouseEvent) => {\n    this.updateCursor()\n    if (this.lastDragPos) {\n      ev.preventDefault()\n      this.onMouseDrag(ev)\n      return\n    }\n    this.hoveredLabel = null\n    const logicalViewSpaceMouse = new Vec2(ev.offsetX, ev.offsetY)\n    const physicalViewSpaceMouse = this.logicalToPhysicalViewSpace().transformPosition(\n      logicalViewSpaceMouse,\n    )\n    const configSpaceMouse = this.configSpaceToPhysicalViewSpace().inverseTransformPosition(\n      physicalViewSpaceMouse,\n    )\n\n    if (!configSpaceMouse) return\n\n    const setHoveredLabel = (frame: FlamechartFrame, depth = 0) => {\n      const width = frame.end - frame.start\n      const y = this.props.renderInverted ? this.configSpaceSize().y - 1 - depth : depth\n      const configSpaceBounds = new Rect(new Vec2(frame.start, y), new Vec2(width, 1))\n      if (configSpaceMouse.x < configSpaceBounds.left()) return null\n      if (configSpaceMouse.x > configSpaceBounds.right()) return null\n\n      if (configSpaceBounds.contains(configSpaceMouse)) {\n        this.hoveredLabel = {\n          configSpaceBounds,\n          node: frame.node,\n        }\n      }\n\n      for (let child of frame.children) {\n        setHoveredLabel(child, depth + 1)\n      }\n    }\n\n    for (let frame of this.props.flamechart.getLayers()[0] || []) {\n      setHoveredLabel(frame)\n    }\n\n    if (this.hoveredLabel) {\n      this.props.onNodeHover({node: this.hoveredLabel!.node, event: ev})\n    } else {\n      this.props.onNodeHover(null)\n    }\n\n    this.renderCanvas()\n  }\n\n  private onMouseLeave = (ev: MouseEvent) => {\n    this.hoveredLabel = null\n    this.props.onNodeHover(null)\n    this.renderCanvas()\n  }\n\n  private onWheel = (ev: WheelEvent) => {\n    ev.preventDefault()\n    this.frameHadWheelEvent = true\n\n    const isZoom = ev.metaKey || ev.ctrlKey\n\n    let deltaY = ev.deltaY\n    let deltaX = ev.deltaX\n    if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n      deltaY *= this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT\n      deltaX *= this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT\n    }\n\n    if (isZoom && this.interactionLock !== 'pan') {\n      let multiplier = 1 + deltaY / 100\n\n      // On Chrome & Firefox, pinch-to-zoom maps to\n      // WheelEvent + Ctrl Key. We'll accelerate it in\n      // this case, since it feels a bit sluggish otherwise.\n      if (ev.ctrlKey) {\n        multiplier = 1 + deltaY / 40\n      }\n\n      multiplier = clamp(multiplier, 0.1, 10.0)\n\n      this.zoom(new Vec2(ev.offsetX, ev.offsetY), multiplier)\n    } else if (this.interactionLock !== 'zoom') {\n      this.pan(new Vec2(deltaX, deltaY))\n    }\n\n    this.renderCanvas()\n  }\n\n  onWindowKeyPress = (ev: KeyboardEvent) => {\n    if (!this.container) return\n    const {width, height} = this.container.getBoundingClientRect()\n\n    if (ev.key === '=' || ev.key === '+') {\n      this.zoom(new Vec2(width / 2, height / 2), 0.5)\n      ev.preventDefault()\n    } else if (ev.key === '-' || ev.key === '_') {\n      this.zoom(new Vec2(width / 2, height / 2), 2)\n      ev.preventDefault()\n    }\n\n    if (ev.ctrlKey || ev.shiftKey || ev.metaKey) return\n\n    if (ev.key === '0') {\n      this.zoom(new Vec2(width / 2, height / 2), 1e9)\n    } else if (ev.key === 'ArrowRight' || ev.key === 'd') {\n      this.pan(new Vec2(100, 0))\n    } else if (ev.key === 'ArrowLeft' || ev.key === 'a') {\n      this.pan(new Vec2(-100, 0))\n    } else if (ev.key === 'ArrowUp' || ev.key === 'w') {\n      this.pan(new Vec2(0, -100))\n    } else if (ev.key === 'ArrowDown' || ev.key === 's') {\n      this.pan(new Vec2(0, 100))\n    } else if (ev.key === 'Escape') {\n      this.props.onNodeSelect(null)\n      this.renderCanvas()\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false\n  }\n  componentWillReceiveProps(nextProps: FlamechartPanZoomViewProps) {\n    if (this.props.flamechart !== nextProps.flamechart) {\n      this.hoveredLabel = null\n      this.renderCanvas()\n    } else if (this.props.selectedNode !== nextProps.selectedNode) {\n      this.renderCanvas()\n    } else if (this.props.configSpaceViewportRect !== nextProps.configSpaceViewportRect) {\n      this.renderCanvas()\n    }\n  }\n  componentDidMount() {\n    this.props.canvasContext.addBeforeFrameHandler(this.onBeforeFrame)\n    window.addEventListener('resize', this.onWindowResize)\n    window.addEventListener('keydown', this.onWindowKeyPress)\n  }\n  componentWillUnmount() {\n    this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame)\n    window.removeEventListener('resize', this.onWindowResize)\n    window.removeEventListener('keydown', this.onWindowKeyPress)\n  }\n\n  render() {\n    return (\n      <div\n        className={css(style.panZoomView, commonStyle.vbox)}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onClick}\n        onDblClick={this.onDblClick}\n        onWheel={this.onWheel}\n        ref={this.containerRef}\n      >\n        <canvas width={1} height={1} ref={this.overlayCanvasRef} className={css(style.fill)} />\n      </div>\n    )\n  }\n}\n","import {Vec2} from '../lib/math'\nimport {Sizes, Colors, FontSize, FontFamily, ZIndex} from './style'\nimport {css, StyleSheet} from 'aphrodite'\nimport {h, Component} from 'preact'\n\ninterface HovertipProps {\n  containerSize: Vec2\n  offset: Vec2\n}\n\nexport class Hovertip extends Component<HovertipProps, {}> {\n  render() {\n    const {containerSize, offset} = this.props\n    const width = containerSize.x\n    const height = containerSize.y\n\n    const positionStyle: {\n      left?: number\n      right?: number\n      top?: number\n      bottom?: number\n    } = {}\n\n    const OFFSET_FROM_MOUSE = 7\n    if (offset.x + OFFSET_FROM_MOUSE + Sizes.TOOLTIP_WIDTH_MAX < width) {\n      positionStyle.left = offset.x + OFFSET_FROM_MOUSE\n    } else {\n      positionStyle.right = width - offset.x + 1\n    }\n\n    if (offset.y + OFFSET_FROM_MOUSE + Sizes.TOOLTIP_HEIGHT_MAX < height) {\n      positionStyle.top = offset.y + OFFSET_FROM_MOUSE\n    } else {\n      positionStyle.bottom = height - offset.y + 1\n    }\n\n    return (\n      <div className={css(style.hoverTip)} style={positionStyle}>\n        <div className={css(style.hoverTipRow)}>{this.props.children}</div>\n      </div>\n    )\n  }\n}\n\nconst HOVERTIP_PADDING = 2\n\nconst style = StyleSheet.create({\n  hoverTip: {\n    position: 'absolute',\n    background: Colors.WHITE,\n    border: '1px solid black',\n    maxWidth: Sizes.TOOLTIP_WIDTH_MAX,\n    paddingTop: HOVERTIP_PADDING,\n    paddingBottom: HOVERTIP_PADDING,\n    pointerEvents: 'none',\n    userSelect: 'none',\n    fontSize: FontSize.LABEL,\n    fontFamily: FontFamily.MONOSPACE,\n    zIndex: ZIndex.HOVERTIP,\n  },\n  hoverTipRow: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflowX: 'hidden',\n    paddingLeft: HOVERTIP_PADDING,\n    paddingRight: HOVERTIP_PADDING,\n    maxWidth: Sizes.TOOLTIP_WIDTH_MAX,\n  },\n})\n","import {h} from 'preact'\nimport {css} from 'aphrodite'\n\nimport {CallTreeNode} from '../lib/profile'\n\nimport {Rect, Vec2, AffineTransform} from '../lib/math'\nimport {formatPercent} from '../lib/utils'\nimport {FlamechartMinimapView} from './flamechart-minimap-view'\n\nimport {style} from './flamechart-style'\nimport {Sizes, commonStyle} from './style'\nimport {FlamechartDetailView} from './flamechart-detail-view'\nimport {FlamechartPanZoomView} from './flamechart-pan-zoom-view'\nimport {Hovertip} from './hovertip'\nimport {FlamechartViewProps} from './flamechart-view-container'\nimport {StatelessComponent} from '../lib/typed-redux'\n\nexport class FlamechartView extends StatelessComponent<FlamechartViewProps> {\n  private configSpaceSize() {\n    return new Vec2(\n      this.props.flamechart.getTotalWeight(),\n      this.props.flamechart.getLayers().length,\n    )\n  }\n\n  private setConfigSpaceViewportRect = (viewportRect: Rect): void => {\n    const configSpaceDetailViewHeight = Sizes.DETAIL_VIEW_HEIGHT / Sizes.FRAME_HEIGHT\n\n    const configSpaceSize = this.configSpaceSize()\n\n    const width = this.props.flamechart.getClampedViewportWidth(viewportRect.size.x)\n    const size = viewportRect.size.withX(width)\n\n    const origin = Vec2.clamp(\n      viewportRect.origin,\n      new Vec2(0, -1),\n      Vec2.max(\n        Vec2.zero,\n        configSpaceSize.minus(size).plus(new Vec2(0, configSpaceDetailViewHeight + 1)),\n      ),\n    )\n\n    this.props.setConfigSpaceViewportRect(new Rect(origin, viewportRect.size.withX(width)))\n  }\n\n  private setLogicalSpaceViewportSize = (logicalSpaceViewportSize: Vec2): void => {\n    this.props.setLogicalSpaceViewportSize(logicalSpaceViewportSize)\n  }\n\n  private transformViewport = (transform: AffineTransform): void => {\n    const viewportRect = transform.transformRect(this.props.configSpaceViewportRect)\n    this.setConfigSpaceViewportRect(viewportRect)\n  }\n\n  private onNodeHover = (hover: {node: CallTreeNode; event: MouseEvent} | null) => {\n    this.props.setNodeHover(hover)\n  }\n\n  onNodeClick = (node: CallTreeNode | null) => {\n    this.props.setSelectedNode(node)\n  }\n\n  formatValue(weight: number) {\n    const totalWeight = this.props.flamechart.getTotalWeight()\n    const percent = 100 * weight / totalWeight\n    const formattedPercent = formatPercent(percent)\n    return `${this.props.flamechart.formatValue(weight)} (${formattedPercent})`\n  }\n\n  renderTooltip() {\n    if (!this.container) return null\n\n    const {hover} = this.props\n    if (!hover) return null\n    const {width, height, left, top} = this.container.getBoundingClientRect()\n    const offset = new Vec2(hover.event.clientX - left, hover.event.clientY - top)\n\n    return (\n      <Hovertip containerSize={new Vec2(width, height)} offset={offset}>\n        <span className={css(style.hoverCount)}>\n          {this.formatValue(hover.node.getTotalWeight())}\n        </span>{' '}\n        {hover.node.frame.name}\n      </Hovertip>\n    )\n  }\n\n  container: HTMLDivElement | null = null\n  containerRef = (container?: Element) => {\n    this.container = (container as HTMLDivElement) || null\n  }\n\n  render() {\n    return (\n      <div className={css(style.fill, commonStyle.vbox)} ref={this.containerRef}>\n        <FlamechartMinimapView\n          configSpaceViewportRect={this.props.configSpaceViewportRect}\n          transformViewport={this.transformViewport}\n          flamechart={this.props.flamechart}\n          flamechartRenderer={this.props.flamechartRenderer}\n          canvasContext={this.props.canvasContext}\n          setConfigSpaceViewportRect={this.setConfigSpaceViewportRect}\n        />\n        <FlamechartPanZoomView\n          canvasContext={this.props.canvasContext}\n          flamechart={this.props.flamechart}\n          flamechartRenderer={this.props.flamechartRenderer}\n          renderInverted={false}\n          onNodeHover={this.onNodeHover}\n          onNodeSelect={this.onNodeClick}\n          selectedNode={this.props.selectedNode}\n          transformViewport={this.transformViewport}\n          configSpaceViewportRect={this.props.configSpaceViewportRect}\n          setConfigSpaceViewportRect={this.setConfigSpaceViewportRect}\n          logicalSpaceViewportSize={this.props.logicalSpaceViewportSize}\n          setLogicalSpaceViewportBounds={this.setLogicalSpaceViewportSize}\n        />\n        {this.renderTooltip()}\n        {this.props.selectedNode && (\n          <FlamechartDetailView\n            flamechart={this.props.flamechart}\n            getCSSColorForFrame={this.props.getCSSColorForFrame}\n            selectedNode={this.props.selectedNode}\n          />\n        )}\n      </div>\n    )\n  }\n}\n","import {FlamechartID, FlamechartViewState} from '../store/flamechart-view-state'\nimport {CanvasContext} from '../gl/canvas-context'\nimport {Flamechart} from '../lib/flamechart'\nimport {FlamechartRenderer, FlamechartRendererOptions} from '../gl/flamechart-renderer'\nimport {Dispatch, createContainer, ActionCreator} from '../lib/typed-redux'\nimport {Frame, Profile, CallTreeNode} from '../lib/profile'\nimport {memoizeByShallowEquality} from '../lib/utils'\nimport {ApplicationState} from '../store'\nimport {FlamechartView} from './flamechart-view'\nimport {\n  getRowAtlas,\n  createGetColorBucketForFrame,\n  getCanvasContext,\n  createGetCSSColorForFrame,\n  getFrameToColorBucket,\n} from '../store/getters'\nimport {ActiveProfileState} from './application'\nimport {Vec2, Rect} from '../lib/math'\nimport {actions} from '../store/actions'\n\ninterface FlamechartSetters {\n  setLogicalSpaceViewportSize: (logicalSpaceViewportSize: Vec2) => void\n  setConfigSpaceViewportRect: (configSpaceViewportRect: Rect) => void\n  setNodeHover: (hover: {node: CallTreeNode; event: MouseEvent} | null) => void\n  setSelectedNode: (node: CallTreeNode | null) => void\n}\n\ninterface WithFlamechartContext<T> {\n  profileIndex: number\n  args: {\n    id: FlamechartID\n  } & T\n}\n\nexport function createFlamechartSetters(\n  dispatch: Dispatch,\n  id: FlamechartID,\n  profileIndex: number,\n): FlamechartSetters {\n  function wrapActionCreator<T, U>(\n    actionCreator: ActionCreator<WithFlamechartContext<U>>,\n    map: (t: T) => U,\n  ): (t: T) => void {\n    return (t: T) => {\n      const args = Object.assign({}, map(t), {id})\n      dispatch(actionCreator({profileIndex, args}))\n    }\n  }\n\n  const {\n    setHoveredNode,\n    setLogicalSpaceViewportSize,\n    setConfigSpaceViewportRect,\n    setSelectedNode,\n  } = actions.flamechart\n\n  return {\n    setNodeHover: wrapActionCreator(setHoveredNode, hover => ({hover})),\n    setLogicalSpaceViewportSize: wrapActionCreator(\n      setLogicalSpaceViewportSize,\n      logicalSpaceViewportSize => ({logicalSpaceViewportSize}),\n    ),\n    setConfigSpaceViewportRect: wrapActionCreator(\n      setConfigSpaceViewportRect,\n      configSpaceViewportRect => ({configSpaceViewportRect}),\n    ),\n    setSelectedNode: wrapActionCreator(setSelectedNode, selectedNode => ({selectedNode})),\n  }\n}\n\nexport type FlamechartViewProps = {\n  canvasContext: CanvasContext\n  flamechart: Flamechart\n  flamechartRenderer: FlamechartRenderer\n  renderInverted: boolean\n  getCSSColorForFrame: (frame: Frame) => string\n} & FlamechartSetters &\n  FlamechartViewState\n\nexport const getChronoViewFlamechart = memoizeByShallowEquality(\n  ({\n    profile,\n    getColorBucketForFrame,\n  }: {\n    profile: Profile\n    getColorBucketForFrame: (frame: Frame) => number\n  }): Flamechart => {\n    return new Flamechart({\n      getTotalWeight: profile.getTotalWeight.bind(profile),\n      forEachCall: profile.forEachCall.bind(profile),\n      formatValue: profile.formatValue.bind(profile),\n      getColorBucketForFrame,\n    })\n  },\n)\n\nexport const createMemoizedFlamechartRenderer = (options?: FlamechartRendererOptions) =>\n  memoizeByShallowEquality(\n    ({\n      canvasContext,\n      flamechart,\n    }: {\n      canvasContext: CanvasContext\n      flamechart: Flamechart\n    }): FlamechartRenderer => {\n      return new FlamechartRenderer(\n        canvasContext.gl,\n        getRowAtlas(canvasContext),\n        flamechart,\n        canvasContext.rectangleBatchRenderer,\n        canvasContext.flamechartColorPassRenderer,\n        options,\n      )\n    },\n  )\n\nconst getChronoViewFlamechartRenderer = createMemoizedFlamechartRenderer()\n\nexport interface FlamechartViewContainerProps {\n  activeProfileState: ActiveProfileState\n  glCanvas: HTMLCanvasElement\n}\n\nexport const ChronoFlamechartView = createContainer(\n  FlamechartView,\n  (state: ApplicationState, dispatch: Dispatch, ownProps: FlamechartViewContainerProps) => {\n    const {activeProfileState, glCanvas} = ownProps\n    const {index, profile, chronoViewState} = activeProfileState\n\n    const canvasContext = getCanvasContext(glCanvas)\n    const frameToColorBucket = getFrameToColorBucket(profile)\n    const getColorBucketForFrame = createGetColorBucketForFrame(frameToColorBucket)\n    const getCSSColorForFrame = createGetCSSColorForFrame(frameToColorBucket)\n\n    const flamechart = getChronoViewFlamechart({profile, getColorBucketForFrame})\n    const flamechartRenderer = getChronoViewFlamechartRenderer({\n      canvasContext,\n      flamechart,\n    })\n\n    return {\n      renderInverted: false,\n      flamechart,\n      flamechartRenderer,\n      canvasContext,\n      getCSSColorForFrame,\n      ...createFlamechartSetters(dispatch, FlamechartID.CHRONO, index),\n      ...chronoViewState,\n    }\n  },\n)\n\nexport const getLeftHeavyFlamechart = memoizeByShallowEquality(\n  ({\n    profile,\n    getColorBucketForFrame,\n  }: {\n    profile: Profile\n    getColorBucketForFrame: (frame: Frame) => number\n  }): Flamechart => {\n    return new Flamechart({\n      getTotalWeight: profile.getTotalNonIdleWeight.bind(profile),\n      forEachCall: profile.forEachCallGrouped.bind(profile),\n      formatValue: profile.formatValue.bind(profile),\n      getColorBucketForFrame,\n    })\n  },\n)\n\nconst getLeftHeavyFlamechartRenderer = createMemoizedFlamechartRenderer()\n\nexport const LeftHeavyFlamechartView = createContainer(\n  FlamechartView,\n  (state: ApplicationState, dispatch: Dispatch, ownProps: FlamechartViewContainerProps) => {\n    const {activeProfileState, glCanvas} = ownProps\n\n    const {index, profile, leftHeavyViewState} = activeProfileState\n\n    const canvasContext = getCanvasContext(glCanvas)\n    const frameToColorBucket = getFrameToColorBucket(profile)\n    const getColorBucketForFrame = createGetColorBucketForFrame(frameToColorBucket)\n    const getCSSColorForFrame = createGetCSSColorForFrame(frameToColorBucket)\n\n    const flamechart = getLeftHeavyFlamechart({\n      profile,\n      getColorBucketForFrame,\n    })\n    const flamechartRenderer = getLeftHeavyFlamechartRenderer({\n      canvasContext,\n      flamechart,\n    })\n\n    return {\n      renderInverted: false,\n      flamechart,\n      flamechartRenderer,\n      canvasContext,\n      getCSSColorForFrame,\n      ...createFlamechartSetters(dispatch, FlamechartID.LEFT_HEAVY, index),\n      ...leftHeavyViewState,\n    }\n  },\n)\n","import {CallTreeNode} from '../lib/profile'\nimport {StyleSheet, css} from 'aphrodite'\nimport {h} from 'preact'\nimport {commonStyle, Colors} from './style'\nimport {Rect, AffineTransform, Vec2} from '../lib/math'\nimport {FlamechartPanZoomView} from './flamechart-pan-zoom-view'\nimport {noop, formatPercent} from '../lib/utils'\nimport {Hovertip} from './hovertip'\nimport {FlamechartViewProps} from './flamechart-view-container'\nimport {StatelessComponent} from '../lib/typed-redux'\n\nexport class FlamechartWrapper extends StatelessComponent<FlamechartViewProps> {\n  private clampViewportToFlamegraph(viewportRect: Rect) {\n    const {flamechart, renderInverted} = this.props\n    const configSpaceSize = new Vec2(flamechart.getTotalWeight(), flamechart.getLayers().length)\n    const width = this.props.flamechart.getClampedViewportWidth(viewportRect.size.x)\n    const size = viewportRect.size.withX(width)\n    const origin = Vec2.clamp(\n      viewportRect.origin,\n      new Vec2(0, renderInverted ? 0 : -1),\n      Vec2.max(Vec2.zero, configSpaceSize.minus(size).plus(new Vec2(0, 1))),\n    )\n    return new Rect(origin, viewportRect.size.withX(width))\n  }\n  private setConfigSpaceViewportRect = (configSpaceViewportRect: Rect) => {\n    this.props.setConfigSpaceViewportRect(this.clampViewportToFlamegraph(configSpaceViewportRect))\n  }\n  private setLogicalSpaceViewportSize = (logicalSpaceViewportSize: Vec2): void => {\n    this.props.setLogicalSpaceViewportSize(logicalSpaceViewportSize)\n  }\n\n  private transformViewport = (transform: AffineTransform) => {\n    this.setConfigSpaceViewportRect(transform.transformRect(this.props.configSpaceViewportRect))\n  }\n  private formatValue(weight: number) {\n    const totalWeight = this.props.flamechart.getTotalWeight()\n    const percent = 100 * weight / totalWeight\n    const formattedPercent = formatPercent(percent)\n    return `${this.props.flamechart.formatValue(weight)} (${formattedPercent})`\n  }\n  private renderTooltip() {\n    if (!this.container) return null\n    const {hover} = this.props\n    if (!hover) return null\n    const {width, height, left, top} = this.container.getBoundingClientRect()\n    const offset = new Vec2(hover.event.clientX - left, hover.event.clientY - top)\n    return (\n      <Hovertip containerSize={new Vec2(width, height)} offset={offset}>\n        <span className={css(style.hoverCount)}>\n          {this.formatValue(hover.node.getTotalWeight())}\n        </span>{' '}\n        {hover.node.frame.name}\n      </Hovertip>\n    )\n  }\n  container: HTMLDivElement | null = null\n  containerRef = (container?: Element) => {\n    this.container = (container as HTMLDivElement) || null\n  }\n  private setNodeHover = (\n    hover: {\n      node: CallTreeNode\n      event: MouseEvent\n    } | null,\n  ) => {\n    this.props.setNodeHover(hover)\n  }\n  render() {\n    return (\n      <div\n        className={css(commonStyle.fillY, commonStyle.fillX, commonStyle.vbox)}\n        ref={this.containerRef}\n      >\n        <FlamechartPanZoomView\n          selectedNode={null}\n          onNodeHover={this.setNodeHover}\n          onNodeSelect={noop}\n          configSpaceViewportRect={this.props.configSpaceViewportRect}\n          setConfigSpaceViewportRect={this.setConfigSpaceViewportRect}\n          transformViewport={this.transformViewport}\n          flamechart={this.props.flamechart}\n          flamechartRenderer={this.props.flamechartRenderer}\n          canvasContext={this.props.canvasContext}\n          renderInverted={this.props.renderInverted}\n          logicalSpaceViewportSize={this.props.logicalSpaceViewportSize}\n          setLogicalSpaceViewportBounds={this.setLogicalSpaceViewportSize}\n        />\n        {this.renderTooltip()}\n      </div>\n    )\n  }\n}\n\nexport const style = StyleSheet.create({\n  hoverCount: {\n    color: Colors.GREEN,\n  },\n})\n","import {memoizeByShallowEquality} from '../lib/utils'\nimport {Profile, Frame} from '../lib/profile'\nimport {Flamechart} from '../lib/flamechart'\nimport {\n  createMemoizedFlamechartRenderer,\n  FlamechartViewContainerProps,\n  createFlamechartSetters,\n} from './flamechart-view-container'\nimport {createContainer, Dispatch} from '../lib/typed-redux'\nimport {ApplicationState} from '../store'\nimport {\n  getCanvasContext,\n  createGetColorBucketForFrame,\n  createGetCSSColorForFrame,\n  getProfileWithRecursionFlattened,\n  getFrameToColorBucket,\n} from '../store/getters'\nimport {FlamechartID} from '../store/flamechart-view-state'\nimport {FlamechartWrapper} from './flamechart-wrapper'\n\nconst getInvertedCallerProfile = memoizeByShallowEquality(\n  ({\n    profile,\n    frame,\n    flattenRecursion,\n  }: {\n    profile: Profile\n    frame: Frame\n    flattenRecursion: boolean\n  }): Profile => {\n    let p = profile.getInvertedProfileForCallersOf(frame)\n    return flattenRecursion ? p.getProfileWithRecursionFlattened() : p\n  },\n)\n\nconst getInvertedCallerFlamegraph = memoizeByShallowEquality(\n  ({\n    invertedCallerProfile,\n    getColorBucketForFrame,\n  }: {\n    invertedCallerProfile: Profile\n    getColorBucketForFrame: (frame: Frame) => number\n  }): Flamechart => {\n    return new Flamechart({\n      getTotalWeight: invertedCallerProfile.getTotalNonIdleWeight.bind(invertedCallerProfile),\n      forEachCall: invertedCallerProfile.forEachCallGrouped.bind(invertedCallerProfile),\n      formatValue: invertedCallerProfile.formatValue.bind(invertedCallerProfile),\n      getColorBucketForFrame,\n    })\n  },\n)\n\nconst getInvertedCallerFlamegraphRenderer = createMemoizedFlamechartRenderer({inverted: true})\n\nexport const InvertedCallerFlamegraphView = createContainer(\n  FlamechartWrapper,\n  (state: ApplicationState, dispatch: Dispatch, ownProps: FlamechartViewContainerProps) => {\n    const {activeProfileState} = ownProps\n    let {profile, sandwichViewState, index} = activeProfileState\n    let {flattenRecursion, glCanvas} = state\n    if (!profile) throw new Error('profile missing')\n    if (!glCanvas) throw new Error('glCanvas missing')\n    const {callerCallee} = sandwichViewState\n    if (!callerCallee) throw new Error('callerCallee missing')\n    const {selectedFrame} = callerCallee\n\n    profile = flattenRecursion ? getProfileWithRecursionFlattened(profile) : profile\n\n    const frameToColorBucket = getFrameToColorBucket(profile)\n    const getColorBucketForFrame = createGetColorBucketForFrame(frameToColorBucket)\n    const getCSSColorForFrame = createGetCSSColorForFrame(frameToColorBucket)\n    const canvasContext = getCanvasContext(glCanvas)\n\n    const flamechart = getInvertedCallerFlamegraph({\n      invertedCallerProfile: getInvertedCallerProfile({\n        profile,\n        frame: selectedFrame,\n        flattenRecursion,\n      }),\n      getColorBucketForFrame,\n    })\n    const flamechartRenderer = getInvertedCallerFlamegraphRenderer({canvasContext, flamechart})\n\n    return {\n      renderInverted: true,\n      flamechart,\n      flamechartRenderer,\n      canvasContext,\n      getCSSColorForFrame,\n      ...createFlamechartSetters(dispatch, FlamechartID.SANDWICH_INVERTED_CALLERS, index),\n      // This overrides the setSelectedNode specified in createFlamechartSettesr\n      setSelectedNode: () => {},\n      ...callerCallee.invertedCallerFlamegraph,\n    }\n  },\n)\n","import {memoizeByShallowEquality} from '../lib/utils'\nimport {Profile, Frame} from '../lib/profile'\nimport {Flamechart} from '../lib/flamechart'\nimport {\n  createMemoizedFlamechartRenderer,\n  FlamechartViewContainerProps,\n  createFlamechartSetters,\n} from './flamechart-view-container'\nimport {createContainer, Dispatch} from '../lib/typed-redux'\nimport {ApplicationState} from '../store'\nimport {\n  getCanvasContext,\n  createGetColorBucketForFrame,\n  createGetCSSColorForFrame,\n  getFrameToColorBucket,\n} from '../store/getters'\nimport {FlamechartID} from '../store/flamechart-view-state'\nimport {FlamechartWrapper} from './flamechart-wrapper'\n\nconst getCalleeProfile = memoizeByShallowEquality<\n  {\n    profile: Profile\n    frame: Frame\n    flattenRecursion: boolean\n  },\n  Profile\n>(({profile, frame, flattenRecursion}) => {\n  let p = profile.getProfileForCalleesOf(frame)\n  return flattenRecursion ? p.getProfileWithRecursionFlattened() : p\n})\n\nconst getCalleeFlamegraph = memoizeByShallowEquality<\n  {\n    calleeProfile: Profile\n    getColorBucketForFrame: (frame: Frame) => number\n  },\n  Flamechart\n>(({calleeProfile, getColorBucketForFrame}) => {\n  return new Flamechart({\n    getTotalWeight: calleeProfile.getTotalNonIdleWeight.bind(calleeProfile),\n    forEachCall: calleeProfile.forEachCallGrouped.bind(calleeProfile),\n    formatValue: calleeProfile.formatValue.bind(calleeProfile),\n    getColorBucketForFrame,\n  })\n})\n\nconst getCalleeFlamegraphRenderer = createMemoizedFlamechartRenderer()\n\nexport const CalleeFlamegraphView = createContainer(\n  FlamechartWrapper,\n  (state: ApplicationState, dispatch: Dispatch, ownProps: FlamechartViewContainerProps) => {\n    const {activeProfileState} = ownProps\n    const {index, profile, sandwichViewState} = activeProfileState\n    const {flattenRecursion, glCanvas} = state\n    if (!profile) throw new Error('profile missing')\n    if (!glCanvas) throw new Error('glCanvas missing')\n    const {callerCallee} = sandwichViewState\n    if (!callerCallee) throw new Error('callerCallee missing')\n    const {selectedFrame} = callerCallee\n\n    const frameToColorBucket = getFrameToColorBucket(profile)\n    const getColorBucketForFrame = createGetColorBucketForFrame(frameToColorBucket)\n    const getCSSColorForFrame = createGetCSSColorForFrame(frameToColorBucket)\n    const canvasContext = getCanvasContext(glCanvas)\n\n    const flamechart = getCalleeFlamegraph({\n      calleeProfile: getCalleeProfile({profile, frame: selectedFrame, flattenRecursion}),\n      getColorBucketForFrame,\n    })\n    const flamechartRenderer = getCalleeFlamegraphRenderer({canvasContext, flamechart})\n\n    return {\n      renderInverted: false,\n      flamechart,\n      flamechartRenderer,\n      canvasContext,\n      getCSSColorForFrame,\n      ...createFlamechartSetters(dispatch, FlamechartID.SANDWICH_CALLEES, index),\n      // This overrides the setSelectedNode specified in createFlamechartSettesr\n      setSelectedNode: () => {},\n      ...callerCallee.calleeFlamegraph,\n    }\n  },\n)\n","import {Frame} from '../lib/profile'\nimport {StyleSheet, css} from 'aphrodite'\nimport {ProfileTableViewContainer} from './profile-table-view'\nimport {h} from 'preact'\nimport {commonStyle, Sizes, Colors, FontSize} from './style'\nimport {actions} from '../store/actions'\nimport {createContainer, Dispatch, StatelessComponent} from '../lib/typed-redux'\nimport {ApplicationState} from '../store'\nimport {InvertedCallerFlamegraphView} from './inverted-caller-flamegraph-view'\nimport {CalleeFlamegraphView} from './callee-flamegraph-view'\nimport {ActiveProfileState} from './application'\n\ninterface SandwichViewProps {\n  selectedFrame: Frame | null\n  profileIndex: number\n  activeProfileState: ActiveProfileState\n  setSelectedFrame: (selectedFrame: Frame | null) => void\n  glCanvas: HTMLCanvasElement\n}\n\nclass SandwichView extends StatelessComponent<SandwichViewProps> {\n  private setSelectedFrame = (selectedFrame: Frame | null) => {\n    this.props.setSelectedFrame(selectedFrame)\n  }\n\n  onWindowKeyPress = (ev: KeyboardEvent) => {\n    if (ev.key === 'Escape') {\n      this.setSelectedFrame(null)\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onWindowKeyPress)\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onWindowKeyPress)\n  }\n\n  render() {\n    const {selectedFrame} = this.props\n    let flamegraphViews: JSX.Element | null = null\n\n    if (selectedFrame) {\n      flamegraphViews = (\n        <div className={css(commonStyle.fillY, style.callersAndCallees, commonStyle.vbox)}>\n          <div className={css(commonStyle.hbox, style.panZoomViewWraper)}>\n            <div className={css(style.flamechartLabelParent)}>\n              <div className={css(style.flamechartLabel)}>Callers</div>\n            </div>\n            <InvertedCallerFlamegraphView\n              glCanvas={this.props.glCanvas}\n              activeProfileState={this.props.activeProfileState}\n            />\n          </div>\n          <div className={css(style.divider)} />\n          <div className={css(commonStyle.hbox, style.panZoomViewWraper)}>\n            <div className={css(style.flamechartLabelParent, style.flamechartLabelParentBottom)}>\n              <div className={css(style.flamechartLabel, style.flamechartLabelBottom)}>Callees</div>\n            </div>\n            <CalleeFlamegraphView\n              glCanvas={this.props.glCanvas}\n              activeProfileState={this.props.activeProfileState}\n            />\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div className={css(commonStyle.hbox, commonStyle.fillY)}>\n        <div className={css(style.tableView)}>\n          <ProfileTableViewContainer activeProfileState={this.props.activeProfileState} />\n        </div>\n        {flamegraphViews}\n      </div>\n    )\n  }\n}\n\nconst style = StyleSheet.create({\n  tableView: {\n    flex: 1,\n  },\n  panZoomViewWraper: {\n    flex: 1,\n  },\n  flamechartLabelParent: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    alignItems: 'flex-start',\n    fontSize: FontSize.TITLE,\n    width: FontSize.TITLE * 1.2,\n    borderRight: `1px solid ${Colors.LIGHT_GRAY}`,\n  },\n  flamechartLabelParentBottom: {\n    justifyContent: 'flex-start',\n  },\n  flamechartLabel: {\n    transform: 'rotate(-90deg)',\n    transformOrigin: '50% 50% 0',\n    width: FontSize.TITLE * 1.2,\n    flexShrink: 1,\n  },\n  flamechartLabelBottom: {\n    transform: 'rotate(-90deg)',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  callersAndCallees: {\n    flex: 1,\n    borderLeft: `${Sizes.SEPARATOR_HEIGHT}px solid ${Colors.LIGHT_GRAY}`,\n  },\n  divider: {\n    height: 2,\n    background: Colors.LIGHT_GRAY,\n  },\n})\n\ninterface SandwichViewContainerProps {\n  activeProfileState: ActiveProfileState\n  glCanvas: HTMLCanvasElement\n}\n\nexport const SandwichViewContainer = createContainer(\n  SandwichView,\n  (state: ApplicationState, dispatch: Dispatch, ownProps: SandwichViewContainerProps) => {\n    const {activeProfileState, glCanvas} = ownProps\n    const {sandwichViewState, index} = activeProfileState\n    const {callerCallee} = sandwichViewState\n\n    const setSelectedFrame = (selectedFrame: Frame | null) => {\n      dispatch(\n        actions.sandwichView.setSelectedFrame({\n          profileIndex: index,\n          args: selectedFrame,\n        }),\n      )\n    }\n\n    return {\n      activeProfileState: activeProfileState,\n      glCanvas,\n      setSelectedFrame,\n      selectedFrame: callerCallee ? callerCallee.selectedFrame : null,\n      profileIndex: index,\n    }\n  },\n)\n","import {FileFormat} from './file-format-spec'\n\nexport interface ValueFormatter {\n  unit: FileFormat.ValueUnit\n  format(v: number): string\n}\n\nexport class RawValueFormatter implements ValueFormatter {\n  unit: FileFormat.ValueUnit = 'none'\n  format(v: number) {\n    return v.toLocaleString()\n  }\n}\n\nexport class TimeFormatter implements ValueFormatter {\n  private multiplier: number\n\n  constructor(public unit: 'nanoseconds' | 'microseconds' | 'milliseconds' | 'seconds') {\n    if (unit === 'nanoseconds') this.multiplier = 1e-9\n    else if (unit === 'microseconds') this.multiplier = 1e-6\n    else if (unit === 'milliseconds') this.multiplier = 1e-3\n    else this.multiplier = 1\n  }\n\n  formatUnsigned(v: number) {\n    const s = v * this.multiplier\n\n    if (s / 60 >= 1) return `${(s / 60).toFixed(2)}min`\n    if (s / 1 >= 1) return `${s.toFixed(2)}s`\n    if (s / 1e-3 >= 1) return `${(s / 1e-3).toFixed(2)}ms`\n    if (s / 1e-6 >= 1) return `${(s / 1e-6).toFixed(2)}s`\n    else return `${(s / 1e-9).toFixed(2)}ns`\n  }\n\n  format(v: number) {\n    return `${v < 0 ? '-' : ''}${this.formatUnsigned(Math.abs(v))}`\n  }\n}\n\nexport class ByteFormatter implements ValueFormatter {\n  unit: FileFormat.ValueUnit = 'bytes'\n\n  format(v: number) {\n    if (v < 1024) return `${v.toFixed(0)} B`\n    v /= 1024\n    if (v < 1024) return `${v.toFixed(2)} KB`\n    v /= 1024\n    if (v < 1024) return `${v.toFixed(2)} MB`\n    v /= 1024\n    return `${v.toFixed(2)} GB`\n  }\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","import {lastOf, KeyedSet} from './utils'\nimport {ValueFormatter, RawValueFormatter} from './value-formatters'\nimport {FileFormat} from './file-format-spec'\nconst demangleCppModule = import('./demangle-cpp')\n\n// Force eager loading of the module\ndemangleCppModule.then(() => {})\n\nexport interface FrameInfo {\n  key: string | number\n\n  // Name of the frame. May be a method name, e.g.\n  // \"ActiveRecord##to_hash\"\n  name: string\n\n  // File path of the code corresponding to this\n  // call stack frame.\n  file?: string\n\n  // Line in the given file where this frame occurs\n  line?: number\n\n  // Column in the file\n  col?: number\n}\n\nexport class HasWeights {\n  private selfWeight = 0\n  private totalWeight = 0\n  getSelfWeight() {\n    return this.selfWeight\n  }\n  getTotalWeight() {\n    return this.totalWeight\n  }\n  addToTotalWeight(delta: number) {\n    this.totalWeight += delta\n  }\n  addToSelfWeight(delta: number) {\n    this.selfWeight += delta\n  }\n\n  overwriteWeightWith(other: HasWeights) {\n    this.selfWeight = other.selfWeight\n    this.totalWeight = other.totalWeight\n  }\n}\n\nexport class Frame extends HasWeights {\n  key: string | number\n\n  // Name of the frame. May be a method name, e.g.\n  // \"ActiveRecord##to_hash\"\n  name: string\n\n  // File path of the code corresponding to this\n  // call stack frame.\n  file?: string\n\n  // Line in the given file where this frame occurs\n  line?: number\n\n  // Column in the file\n  col?: number\n\n  private constructor(info: FrameInfo) {\n    super()\n    this.key = info.key\n    this.name = info.name\n    this.file = info.file\n    this.line = info.line\n    this.col = info.col\n  }\n\n  static root = new Frame({\n    key: '(speedscope root)',\n    name: '(speedscope root)',\n  })\n\n  static getOrInsert(set: KeyedSet<Frame>, info: FrameInfo) {\n    return set.getOrInsert(new Frame(info))\n  }\n}\n\nexport class CallTreeNode extends HasWeights {\n  children: CallTreeNode[] = []\n\n  isRoot() {\n    return this.frame === Frame.root\n  }\n\n  // If a node is \"frozen\", it means it should no longer be mutated.\n  private frozen = false\n  isFrozen() {\n    return this.frozen\n  }\n  freeze() {\n    this.frozen = true\n  }\n\n  constructor(readonly frame: Frame, readonly parent: CallTreeNode | null) {\n    super()\n  }\n}\n\nexport interface ProfileGroup {\n  name: string\n  indexToView: number\n  profiles: Profile[]\n}\n\nexport class Profile {\n  protected name: string = ''\n\n  protected totalWeight: number\n\n  protected frames = new KeyedSet<Frame>()\n\n  protected appendOrderCalltreeRoot = new CallTreeNode(Frame.root, null)\n  protected groupedCalltreeRoot = new CallTreeNode(Frame.root, null)\n\n  public getAppendOrderCalltreeRoot() {\n    return this.appendOrderCalltreeRoot\n  }\n  public getGroupedCalltreeRoot() {\n    return this.groupedCalltreeRoot\n  }\n\n  // List of references to CallTreeNodes at the top of the\n  // stack at the time of the sample.\n  protected samples: CallTreeNode[] = []\n  protected weights: number[] = []\n\n  protected valueFormatter: ValueFormatter = new RawValueFormatter()\n\n  constructor(totalWeight: number = 0) {\n    this.totalWeight = totalWeight\n  }\n\n  formatValue(v: number) {\n    return this.valueFormatter.format(v)\n  }\n  setValueFormatter(f: ValueFormatter) {\n    this.valueFormatter = f\n  }\n  getWeightUnit(): FileFormat.ValueUnit {\n    return this.valueFormatter.unit\n  }\n\n  getName() {\n    return this.name\n  }\n  setName(name: string) {\n    this.name = name\n  }\n\n  getTotalWeight() {\n    return this.totalWeight\n  }\n\n  private totalNonIdleWeight: number | null = null\n  getTotalNonIdleWeight() {\n    if (this.totalNonIdleWeight === null) {\n      this.totalNonIdleWeight = this.groupedCalltreeRoot.children.reduce(\n        (n, c) => n + c.getTotalWeight(),\n        0,\n      )\n    }\n    return this.totalNonIdleWeight\n  }\n\n  forEachCallGrouped(\n    openFrame: (node: CallTreeNode, value: number) => void,\n    closeFrame: (node: CallTreeNode, value: number) => void,\n  ) {\n    function visit(node: CallTreeNode, start: number) {\n      if (node.frame !== Frame.root) {\n        openFrame(node, start)\n      }\n\n      let childTime = 0\n\n      const children = [...node.children]\n      children.sort((a, b) => (a.getTotalWeight() > b.getTotalWeight() ? -1 : 1))\n\n      children.forEach(function(child) {\n        visit(child, start + childTime)\n        childTime += child.getTotalWeight()\n      })\n\n      if (node.frame !== Frame.root) {\n        closeFrame(node, start + node.getTotalWeight())\n      }\n    }\n    visit(this.groupedCalltreeRoot, 0)\n  }\n\n  forEachCall(\n    openFrame: (node: CallTreeNode, value: number) => void,\n    closeFrame: (node: CallTreeNode, value: number) => void,\n  ) {\n    let prevStack: CallTreeNode[] = []\n    let value = 0\n\n    let sampleIndex = 0\n    for (let stackTop of this.samples) {\n      // Find lowest common ancestor of the current stack and the previous one\n      let lca: CallTreeNode | null = null\n\n      // This is O(n^2), but n should be relatively small here (stack height),\n      // so hopefully this isn't much of a problem\n      for (\n        lca = stackTop;\n        lca && lca.frame != Frame.root && prevStack.indexOf(lca) === -1;\n        lca = lca.parent\n      ) {}\n\n      // Close frames that are no longer open\n      while (prevStack.length > 0 && lastOf(prevStack) != lca) {\n        const node = prevStack.pop()!\n        closeFrame(node, value)\n      }\n\n      // Open frames that are now becoming open\n      const toOpen: CallTreeNode[] = []\n      for (\n        let node: CallTreeNode | null = stackTop;\n        node && node.frame != Frame.root && node != lca;\n        node = node.parent\n      ) {\n        toOpen.push(node)\n      }\n      toOpen.reverse()\n\n      for (let node of toOpen) {\n        openFrame(node, value)\n      }\n\n      prevStack = prevStack.concat(toOpen)\n      value += this.weights[sampleIndex++]\n    }\n\n    // Close frames that are open at the end of the trace\n    for (let i = prevStack.length - 1; i >= 0; i--) {\n      closeFrame(prevStack[i], value)\n    }\n  }\n\n  forEachFrame(fn: (frame: Frame) => void) {\n    this.frames.forEach(fn)\n  }\n\n  forEachSample(fn: (sample: CallTreeNode, weight: number) => void) {\n    for (let i = 0; i < this.samples.length; i++) {\n      fn(this.samples[i], this.weights[i])\n    }\n  }\n\n  getProfileWithRecursionFlattened(): Profile {\n    const builder = new CallTreeProfileBuilder()\n\n    const stack: (CallTreeNode | null)[] = []\n    const framesInStack = new Set<Frame>()\n\n    function openFrame(node: CallTreeNode, value: number) {\n      if (framesInStack.has(node.frame)) {\n        stack.push(null)\n      } else {\n        framesInStack.add(node.frame)\n        stack.push(node)\n        builder.enterFrame(node.frame, value)\n      }\n    }\n    function closeFrame(node: CallTreeNode, value: number) {\n      const stackTop = stack.pop()\n      if (stackTop) {\n        framesInStack.delete(stackTop.frame)\n        builder.leaveFrame(stackTop.frame, value)\n      }\n    }\n\n    this.forEachCall(openFrame, closeFrame)\n\n    const flattenedProfile = builder.build()\n    flattenedProfile.name = this.name\n    flattenedProfile.valueFormatter = this.valueFormatter\n\n    // When constructing a profile with recursion flattened,\n    // counter-intuitive things can happen to \"self time\" measurements\n    // for functions.\n    // For example, given the following list of stacks w/ weights:\n    //\n    // a 1\n    // a;b;a 1\n    // a;b;a;b;a 1\n    // a;b;a 1\n    //\n    // The resulting profile with recursion flattened out will look like this:\n    //\n    // a 1\n    // a;b 3\n    //\n    // Which is useful to view, but it's counter-intuitive to move self-time\n    // for frames around, since analyzing the self-time of functions is an important\n    // thing to be able to do accurately, and we don't want this to change when recursion\n    // is flattened. To work around that, we'll just copy the weights directly from the\n    // un-flattened profile.\n    this.forEachFrame(f => {\n      flattenedProfile.frames.getOrInsert(f).overwriteWeightWith(f)\n    })\n\n    return flattenedProfile\n  }\n\n  getInvertedProfileForCallersOf(focalFrameInfo: FrameInfo): Profile {\n    const focalFrame = Frame.getOrInsert(this.frames, focalFrameInfo)\n    const builder = new StackListProfileBuilder()\n\n    // TODO(jlfwong): Could construct this at profile\n    // construction time rather than on demand.\n    const nodes: CallTreeNode[] = []\n\n    function visit(node: CallTreeNode) {\n      if (node.frame === focalFrame) {\n        nodes.push(node)\n      } else {\n        for (let child of node.children) {\n          visit(child)\n        }\n      }\n    }\n\n    visit(this.appendOrderCalltreeRoot)\n\n    for (let node of nodes) {\n      const stack: FrameInfo[] = []\n      for (let n: CallTreeNode | null = node; n != null && n.frame !== Frame.root; n = n.parent) {\n        stack.push(n.frame)\n      }\n      builder.appendSampleWithWeight(stack, node.getTotalWeight())\n    }\n\n    const ret = builder.build()\n    ret.name = this.name\n    ret.valueFormatter = this.valueFormatter\n    return ret\n  }\n\n  getProfileForCalleesOf(focalFrameInfo: FrameInfo): Profile {\n    const focalFrame = Frame.getOrInsert(this.frames, focalFrameInfo)\n    const builder = new StackListProfileBuilder()\n\n    function recordSubtree(focalFrameNode: CallTreeNode) {\n      const stack: FrameInfo[] = []\n\n      function visit(node: CallTreeNode) {\n        stack.push(node.frame)\n        builder.appendSampleWithWeight(stack, node.getSelfWeight())\n        for (let child of node.children) {\n          visit(child)\n        }\n        stack.pop()\n      }\n\n      visit(focalFrameNode)\n    }\n\n    function findCalls(node: CallTreeNode) {\n      if (node.frame === focalFrame) {\n        recordSubtree(node)\n      } else {\n        for (let child of node.children) {\n          findCalls(child)\n        }\n      }\n    }\n\n    findCalls(this.appendOrderCalltreeRoot)\n\n    const ret = builder.build()\n    ret.name = this.name\n    ret.valueFormatter = this.valueFormatter\n    return ret\n  }\n\n  // Demangle symbols for readability\n  async demangle() {\n    let demangleCpp: ((name: string) => string) | null = null\n\n    for (let frame of this.frames) {\n      // This function converts a mangled C++ name such as \"__ZNK7Support6ColorFeqERKS0_\"\n      // into a human-readable symbol (in this case \"Support::ColorF::==(Support::ColorF&)\")\n      if (frame.name.startsWith('__Z')) {\n        if (!demangleCpp) {\n          demangleCpp = (await demangleCppModule).demangleCpp\n        }\n        frame.name = demangleCpp(frame.name)\n      }\n    }\n  }\n\n  remapNames(callback: (name: string) => string) {\n    for (let frame of this.frames) {\n      frame.name = callback(frame.name)\n    }\n  }\n}\n\nexport class StackListProfileBuilder extends Profile {\n  _appendSample(stack: FrameInfo[], weight: number, useAppendOrder: boolean) {\n    if (isNaN(weight)) throw new Error('invalid weight')\n    let node = useAppendOrder ? this.appendOrderCalltreeRoot : this.groupedCalltreeRoot\n\n    let framesInStack = new Set<Frame>()\n\n    for (let frameInfo of stack) {\n      const frame = Frame.getOrInsert(this.frames, frameInfo)\n      const last = useAppendOrder\n        ? lastOf(node.children)\n        : node.children.find(c => c.frame === frame)\n      if (last && !last.isFrozen() && last.frame == frame) {\n        node = last\n      } else {\n        const parent = node\n        node = new CallTreeNode(frame, node)\n        parent.children.push(node)\n      }\n      node.addToTotalWeight(weight)\n\n      // It's possible for the same frame to occur multiple\n      // times in the same call stack due to either direct\n      // or indirect recursion. We want to avoid counting that\n      // frame multiple times for a single sample, we so just\n      // track all of the unique frames that participated in\n      // this call stack, then add to their weight at the end.\n      framesInStack.add(node.frame)\n    }\n    node.addToSelfWeight(weight)\n\n    if (useAppendOrder) {\n      for (let child of node.children) {\n        child.freeze()\n      }\n    }\n\n    if (useAppendOrder) {\n      node.frame.addToSelfWeight(weight)\n\n      for (let frame of framesInStack) {\n        frame.addToTotalWeight(weight)\n      }\n\n      if (node === lastOf(this.samples)) {\n        this.weights[this.weights.length - 1] += weight\n      } else {\n        this.samples.push(node)\n        this.weights.push(weight)\n      }\n    }\n  }\n\n  appendSampleWithWeight(stack: FrameInfo[], weight: number) {\n    if (weight === 0) {\n      // Samples with zero weight have no effect, so let's ignore them\n      return\n    }\n    if (weight < 0) {\n      throw new Error('Samples must have positive weights')\n    }\n\n    this._appendSample(stack, weight, true)\n    this._appendSample(stack, weight, false)\n  }\n\n  private pendingSample: {\n    stack: FrameInfo[]\n    startTimestamp: number\n    centralTimestamp: number\n  } | null = null\n  appendSampleWithTimestamp(stack: FrameInfo[], timestamp: number) {\n    if (this.pendingSample) {\n      if (timestamp < this.pendingSample.centralTimestamp) {\n        throw new Error('Timestamps received out of order')\n      }\n      const endTimestamp = (timestamp + this.pendingSample.centralTimestamp) / 2\n      this.appendSampleWithWeight(\n        this.pendingSample.stack,\n        endTimestamp - this.pendingSample.startTimestamp,\n      )\n      this.pendingSample = {stack, startTimestamp: endTimestamp, centralTimestamp: timestamp}\n    } else {\n      this.pendingSample = {stack, startTimestamp: timestamp, centralTimestamp: timestamp}\n    }\n  }\n\n  build(): Profile {\n    if (this.pendingSample) {\n      if (this.samples.length > 0) {\n        this.appendSampleWithWeight(\n          this.pendingSample.stack,\n          this.pendingSample.centralTimestamp - this.pendingSample.startTimestamp,\n        )\n      } else {\n        // There is only a single sample. In this case, units will be meaningless,\n        // so we'll append with a weight of 1 and also clear any value formatter\n        this.appendSampleWithWeight(this.pendingSample.stack, 1)\n        this.setValueFormatter(new RawValueFormatter())\n      }\n    }\n    this.totalWeight = Math.max(this.totalWeight, this.weights.reduce((a, b) => a + b, 0))\n    return this\n  }\n}\n\n// As an alternative API for importing profiles more efficiently, provide a\n// way to open & close frames directly without needing to construct tons of\n// arrays as intermediaries.\nexport class CallTreeProfileBuilder extends Profile {\n  private appendOrderStack: CallTreeNode[] = [this.appendOrderCalltreeRoot]\n  private groupedOrderStack: CallTreeNode[] = [this.groupedCalltreeRoot]\n  private framesInStack = new Map<Frame, number>()\n  private stack: Frame[] = []\n\n  private lastValue: number | null = null\n  private addWeightsToFrames(value: number) {\n    if (this.lastValue == null) this.lastValue = value\n    const delta = value - this.lastValue!\n    for (let frame of this.framesInStack.keys()) {\n      frame.addToTotalWeight(delta)\n    }\n    const stackTop = lastOf(this.stack)\n    if (stackTop) {\n      stackTop.addToSelfWeight(delta)\n    }\n  }\n  private addWeightsToNodes(value: number, stack: CallTreeNode[]) {\n    const delta = value - this.lastValue!\n    for (let node of stack) {\n      node.addToTotalWeight(delta)\n    }\n    const stackTop = lastOf(stack)\n    if (stackTop) {\n      stackTop.addToSelfWeight(delta)\n    }\n  }\n\n  private _enterFrame(frame: Frame, value: number, useAppendOrder: boolean) {\n    let stack = useAppendOrder ? this.appendOrderStack : this.groupedOrderStack\n    this.addWeightsToNodes(value, stack)\n\n    let prevTop = lastOf(stack)\n\n    if (prevTop) {\n      if (useAppendOrder) {\n        const delta = value - this.lastValue!\n        if (delta > 0) {\n          this.samples.push(prevTop)\n          this.weights.push(value - this.lastValue!)\n        } else if (delta < 0) {\n          throw new Error(\n            `Samples must be provided in increasing order of cumulative value. Last sample was ${this\n              .lastValue!}, this sample was ${value}`,\n          )\n        }\n      }\n\n      const last = useAppendOrder\n        ? lastOf(prevTop.children)\n        : prevTop.children.find(c => c.frame === frame)\n      let node: CallTreeNode\n      if (last && !last.isFrozen() && last.frame == frame) {\n        node = last\n      } else {\n        node = new CallTreeNode(frame, prevTop)\n        prevTop.children.push(node)\n      }\n      stack.push(node)\n    }\n  }\n  enterFrame(frameInfo: FrameInfo, value: number) {\n    const frame = Frame.getOrInsert(this.frames, frameInfo)\n    this.addWeightsToFrames(value)\n    this._enterFrame(frame, value, true)\n    this._enterFrame(frame, value, false)\n\n    this.stack.push(frame)\n    const frameCount = this.framesInStack.get(frame) || 0\n    this.framesInStack.set(frame, frameCount + 1)\n    this.lastValue = value\n  }\n\n  private _leaveFrame(frame: Frame, value: number, useAppendOrder: boolean) {\n    let stack = useAppendOrder ? this.appendOrderStack : this.groupedOrderStack\n    this.addWeightsToNodes(value, stack)\n\n    if (useAppendOrder) {\n      const leavingStackTop = this.appendOrderStack.pop()\n      if (leavingStackTop == null) {\n        throw new Error(`Trying to leave ${frame.key} when stack is empty`)\n      }\n      if (this.lastValue == null) {\n        throw new Error(`Trying to leave a ${frame.key} before any have been entered`)\n      }\n      leavingStackTop.freeze()\n      const delta = value - this.lastValue\n      if (delta > 0) {\n        this.samples.push(leavingStackTop)\n        this.weights.push(value - this.lastValue)\n      } else if (delta < 0) {\n        throw new Error(\n          `Samples must be provided in increasing order of cumulative value. Last sample was ${this\n            .lastValue!}, this sample was ${value}`,\n        )\n      }\n    } else {\n      this.groupedOrderStack.pop()\n    }\n  }\n\n  leaveFrame(frameInfo: FrameInfo, value: number) {\n    const frame = Frame.getOrInsert(this.frames, frameInfo)\n    this.addWeightsToFrames(value)\n\n    this._leaveFrame(frame, value, true)\n    this._leaveFrame(frame, value, false)\n\n    this.stack.pop()\n    const frameCount = this.framesInStack.get(frame)\n    if (frameCount == null) return\n    if (frameCount === 1) {\n      this.framesInStack.delete(frame)\n    } else {\n      this.framesInStack.set(frame, frameCount - 1)\n    }\n    this.lastValue = value\n\n    this.totalWeight = Math.max(this.totalWeight, this.lastValue)\n  }\n\n  build(): Profile {\n    // Each stack is expected to contain a single node which we initialize to be\n    // the root node.\n    if (this.appendOrderStack.length > 1 || this.groupedOrderStack.length > 1) {\n      throw new Error('Tried to complete profile construction with a non-empty stack')\n    }\n    return this\n  }\n}\n","// This file contains types which specify the speedscope file format.\n\nexport namespace FileFormat {\n  export type Profile = EventedProfile | SampledProfile\n\n  export interface File {\n    $schema: 'https://www.speedscope.app/file-format-schema.json'\n\n    // Data shared between profiles\n    shared: {\n      frames: Frame[]\n    }\n\n    // List of profile definitions\n    profiles: Profile[]\n\n    // The name of the contained profile group. If omitted, will use the name of\n    // the file itself.\n    // Added in 0.6.0\n    name?: string\n\n    // The index into the `profiles` array that should be displayed upon file\n    // load. If omitted, will default to displaying the first profile in the\n    // file.\n    //\n    // Added in 0.6.0\n    activeProfileIndex?: number\n\n    // The name of the the program which exported this profile. This isn't\n    // consumed but can be helpful for debugging generated data by seeing what\n    // was generating it! Recommended format is \"name@version\". e.g. when the\n    // file was exported by speedscope v0.6.0 itself, it will be\n    // \"speedscope@0.6.0\"\n    //\n    // Added in 0.6.0\n    exporter?: string\n  }\n\n  export interface Frame {\n    name: string\n    file?: string\n    line?: number\n    col?: number\n  }\n\n  export enum ProfileType {\n    EVENTED = 'evented',\n    SAMPLED = 'sampled',\n  }\n\n  export interface IProfile {\n    // Type of profile. This will future proof the file format to allow many\n    // different kinds of profiles to be contained and each type to be part of\n    // a discriminated union.\n    type: ProfileType\n  }\n\n  export interface EventedProfile extends IProfile {\n    type: ProfileType.EVENTED\n\n    // Name of the profile. Typically a filename for the source of the profile.\n    name: string\n\n    // Unit which all value are specified using in the profile.\n    unit: ValueUnit\n\n    // The starting value of the profile. This will typically be a timestamp.\n    // All event values will be relative to this startValue.\n    startValue: number\n\n    // The final value of the profile. This will typically be a timestamp. This\n    // must be greater than or equal to the startValue. This is useful in\n    // situations where the recorded profile extends past the end of the recorded\n    // events, which may happen if nothing was happening at the end of the\n    // profile.\n    endValue: number\n\n    // List of events that occured as part of this profile.\n    // The \"at\" field of every event must be in non-decreasing order.\n    events: (OpenFrameEvent | CloseFrameEvent)[]\n  }\n\n  // List of indices into the frame array\n  type SampledStack = number[]\n\n  export interface SampledProfile extends IProfile {\n    type: ProfileType.SAMPLED\n\n    // Name of the profile. Typically a filename for the source of the profile.\n    name: string\n\n    // Unit which all value are specified using in the profile.\n    unit: ValueUnit\n\n    // The starting value of the profile. This will typically be a timestamp.\n    // All event values will be relative to this startValue.\n    startValue: number\n\n    // The final value of the profile. This will typically be a timestamp. This\n    // must be greater than or equal to the startValue. This is useful in\n    // situations where the recorded profile extends past the end of the recorded\n    // events, which may happen if nothing was happening at the end of the\n    // profile.\n    endValue: number\n\n    // List of stacks\n    samples: SampledStack[]\n\n    // The weight of the sample at the given index. Should have\n    // the same length as the samples array.\n    weights: number[]\n  }\n\n  export type ValueUnit =\n    | 'none'\n    | 'nanoseconds'\n    | 'microseconds'\n    | 'milliseconds'\n    | 'seconds'\n    | 'bytes'\n\n  export enum EventType {\n    OPEN_FRAME = 'O',\n    CLOSE_FRAME = 'C',\n  }\n\n  interface IEvent {\n    type: EventType\n    at: number\n  }\n\n  // Indicates a stack frame opened. Every opened stack frame must have a\n  // corresponding close frame event, and the ordering must be balanced.\n  interface OpenFrameEvent extends IEvent {\n    type: EventType.OPEN_FRAME\n    // An index into the frames array in the shared data within the profile\n    frame: number\n  }\n\n  interface CloseFrameEvent extends IEvent {\n    type: EventType.CLOSE_FRAME\n    // An index into the frames array in the shared data within the profile\n    frame: number\n  }\n}\n",null,"import {\n  Profile,\n  CallTreeNode,\n  Frame,\n  CallTreeProfileBuilder,\n  FrameInfo,\n  StackListProfileBuilder,\n  ProfileGroup,\n} from './profile'\nimport {TimeFormatter, ByteFormatter, RawValueFormatter} from './value-formatters'\nimport {FileFormat} from './file-format-spec'\n\nexport function exportProfileGroup(profileGroup: ProfileGroup): FileFormat.File {\n  const frames: FileFormat.Frame[] = []\n\n  const indexForFrame = new Map<Frame, number>()\n  function getIndexForFrame(frame: Frame): number {\n    let index = indexForFrame.get(frame)\n    if (index == null) {\n      const serializedFrame: FileFormat.Frame = {\n        name: frame.name,\n      }\n      if (frame.file != null) serializedFrame.file = frame.file\n      if (frame.line != null) serializedFrame.line = frame.line\n      if (frame.col != null) serializedFrame.col = frame.col\n      index = frames.length\n      indexForFrame.set(frame, index)\n      frames.push(serializedFrame)\n    }\n    return index\n  }\n\n  const file: FileFormat.File = {\n    exporter: `speedscope@${require('../../package.json').version}`,\n    name: profileGroup.name,\n    activeProfileIndex: profileGroup.indexToView,\n    $schema: 'https://www.speedscope.app/file-format-schema.json',\n    shared: {frames},\n    profiles: [],\n  }\n\n  for (let profile of profileGroup.profiles) {\n    file.profiles.push(exportProfile(profile, getIndexForFrame))\n  }\n\n  return file\n}\n\nfunction exportProfile(profile: Profile, getIndexForFrame: (frame: Frame) => number) {\n  const eventedProfile: FileFormat.EventedProfile = {\n    type: FileFormat.ProfileType.EVENTED,\n    name: profile.getName(),\n    unit: profile.getWeightUnit(),\n    startValue: 0,\n    endValue: profile.getTotalWeight(),\n    events: [],\n  }\n  const openFrame = (node: CallTreeNode, value: number) => {\n    eventedProfile.events.push({\n      type: FileFormat.EventType.OPEN_FRAME,\n      frame: getIndexForFrame(node.frame),\n      at: value,\n    })\n  }\n  const closeFrame = (node: CallTreeNode, value: number) => {\n    eventedProfile.events.push({\n      type: FileFormat.EventType.CLOSE_FRAME,\n      frame: getIndexForFrame(node.frame),\n      at: value,\n    })\n  }\n  profile.forEachCall(openFrame, closeFrame)\n  return eventedProfile\n}\n\nfunction importSpeedscopeProfile(\n  serialized: FileFormat.Profile,\n  frames: FileFormat.Frame[],\n): Profile {\n  function setCommonProperties(p: Profile) {\n    const {name, unit} = serialized\n\n    switch (unit) {\n      case 'nanoseconds':\n      case 'microseconds':\n      case 'milliseconds':\n      case 'seconds':\n        p.setValueFormatter(new TimeFormatter(unit))\n        break\n\n      case 'bytes':\n        p.setValueFormatter(new ByteFormatter())\n        break\n\n      case 'none':\n        p.setValueFormatter(new RawValueFormatter())\n        break\n    }\n    p.setName(name)\n  }\n\n  function importEventedProfile(evented: FileFormat.EventedProfile) {\n    const {startValue, endValue, events} = evented\n\n    const profile = new CallTreeProfileBuilder(endValue - startValue)\n    setCommonProperties(profile)\n\n    const frameInfos: FrameInfo[] = frames.map((frame, i) => ({key: i, ...frame}))\n\n    for (let ev of events) {\n      switch (ev.type) {\n        case FileFormat.EventType.OPEN_FRAME: {\n          profile.enterFrame(frameInfos[ev.frame], ev.at - startValue)\n          break\n        }\n        case FileFormat.EventType.CLOSE_FRAME: {\n          profile.leaveFrame(frameInfos[ev.frame], ev.at - startValue)\n          break\n        }\n      }\n    }\n    return profile.build()\n  }\n\n  function importSampledProfile(sampled: FileFormat.SampledProfile) {\n    const {startValue, endValue, samples, weights} = sampled\n    const profile = new StackListProfileBuilder(endValue - startValue)\n    setCommonProperties(profile)\n\n    const frameInfos: FrameInfo[] = frames.map((frame, i) => ({key: i, ...frame}))\n\n    if (samples.length !== weights.length) {\n      throw new Error(\n        `Expected samples.length (${samples.length}) to equal weights.length (${weights.length})`,\n      )\n    }\n\n    for (let i = 0; i < samples.length; i++) {\n      const stack = samples[i]\n      const weight = weights[i]\n      profile.appendSampleWithWeight(stack.map(n => frameInfos[n]), weight)\n    }\n\n    return profile.build()\n  }\n\n  switch (serialized.type) {\n    case FileFormat.ProfileType.EVENTED:\n      return importEventedProfile(serialized)\n    case FileFormat.ProfileType.SAMPLED:\n      return importSampledProfile(serialized)\n  }\n}\n\nexport function importSpeedscopeProfiles(serialized: FileFormat.File): ProfileGroup {\n  return {\n    name: serialized.name || serialized.profiles[0].name || 'profile',\n    indexToView: serialized.activeProfileIndex || 0,\n    profiles: serialized.profiles.map(p => importSpeedscopeProfile(p, serialized.shared.frames)),\n  }\n}\n\nexport function saveToFile(profileGroup: ProfileGroup): void {\n  const file = exportProfileGroup(profileGroup)\n  const blob = new Blob([JSON.stringify(file)], {type: 'text/json'})\n\n  const nameWithoutExt = file.name ? file.name.split('.')[0]! : 'profile'\n  const filename = `${nameWithoutExt.replace(/\\W+/g, '_')}.speedscope.json`\n\n  console.log('Saving', filename)\n\n  const a = document.createElement('a')\n  a.download = filename\n  a.href = window.URL.createObjectURL(blob)\n  a.dataset.downloadurl = ['text/json', a.download, a.href].join(':')\n\n  // For this to work in Firefox, the <a> must be in the DOM\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n}\n","import {h, Component} from 'preact'\nimport {StyleSheet, css} from 'aphrodite'\nimport {FileSystemDirectoryEntry} from '../import/file-system-entry'\n\nimport {Profile, ProfileGroup} from '../lib/profile'\nimport {FontFamily, FontSize, Colors, Sizes, Duration} from './style'\nimport {importEmscriptenSymbolMap} from '../lib/emscripten'\nimport {SandwichViewContainer} from './sandwich-view'\nimport {saveToFile} from '../lib/file-format'\nimport {ApplicationState, ViewMode, canUseXHR} from '../store'\nimport {StatelessComponent} from '../lib/typed-redux'\nimport {LeftHeavyFlamechartView, ChronoFlamechartView} from './flamechart-view-container'\nimport {SandwichViewState} from '../store/sandwich-view-state'\nimport {FlamechartViewState} from '../store/flamechart-view-state'\nimport {CanvasContext} from '../gl/canvas-context'\nimport {Graphics} from '../gl/graphics'\n\nconst importModule = import('../import')\n// Force eager loading of the module\nimportModule.then(() => {})\nasync function importProfiles(fileName: string, contents: string): Promise<ProfileGroup | null> {\n  return (await importModule).importProfileGroup(fileName, contents)\n}\nasync function importFromFileSystemDirectoryEntry(entry: FileSystemDirectoryEntry) {\n  return (await importModule).importFromFileSystemDirectoryEntry(entry)\n}\n\ndeclare function require(x: string): any\nconst exampleProfileURL = require('../../sample/profiles/stackcollapse/perf-vertx-stacks-01-collapsed-all.txt')\n\ninterface ToolbarProps extends ApplicationProps {\n  browseForFile(): void\n  saveFile(): void\n}\n\nexport class Toolbar extends StatelessComponent<ToolbarProps> {\n  setTimeOrder = () => {\n    this.props.setViewMode(ViewMode.CHRONO_FLAME_CHART)\n  }\n\n  setLeftHeavyOrder = () => {\n    this.props.setViewMode(ViewMode.LEFT_HEAVY_FLAME_GRAPH)\n  }\n\n  setSandwichView = () => {\n    this.props.setViewMode(ViewMode.SANDWICH_VIEW)\n  }\n\n  renderLeftContent() {\n    if (!this.props.activeProfileState) return null\n\n    return (\n      <div className={css(style.toolbarLeft)}>\n        <div\n          className={css(\n            style.toolbarTab,\n            this.props.viewMode === ViewMode.CHRONO_FLAME_CHART && style.toolbarTabActive,\n          )}\n          onClick={this.setTimeOrder}\n        >\n          <span className={css(style.emoji)}></span>Time Order\n        </div>\n        <div\n          className={css(\n            style.toolbarTab,\n            this.props.viewMode === ViewMode.LEFT_HEAVY_FLAME_GRAPH && style.toolbarTabActive,\n          )}\n          onClick={this.setLeftHeavyOrder}\n        >\n          <span className={css(style.emoji)}></span>Left Heavy\n        </div>\n        <div\n          className={css(\n            style.toolbarTab,\n            this.props.viewMode === ViewMode.SANDWICH_VIEW && style.toolbarTabActive,\n          )}\n          onClick={this.setSandwichView}\n        >\n          <span className={css(style.emoji)}></span>Sandwich\n        </div>\n      </div>\n    )\n  }\n\n  renderCenterContent() {\n    const {activeProfileState, profileGroup} = this.props\n    if (activeProfileState && profileGroup) {\n      const {index} = activeProfileState\n      if (profileGroup.profiles.length === 1) {\n        return activeProfileState.profile.getName()\n      } else {\n        function makeNavButton(content: string, disabled: boolean, onClick: () => void) {\n          return (\n            <button\n              disabled={disabled}\n              onClick={onClick}\n              className={css(\n                style.emoji,\n                style.toolbarProfileNavButton,\n                disabled && style.toolbarProfileNavButtonDisabled,\n              )}\n            >\n              {content}\n            </button>\n          )\n        }\n\n        const prevButton = makeNavButton('', index === 0, () =>\n          this.props.setProfileIndexToView(index - 1),\n        )\n        const nextButton = makeNavButton('', index >= profileGroup.profiles.length - 1, () =>\n          this.props.setProfileIndexToView(index + 1),\n        )\n\n        return (\n          <div className={css(style.toolbarCenter)}>\n            {prevButton}\n            {activeProfileState.profile.getName()}{' '}\n            <span className={css(style.toolbarProfileIndex)}>\n              ({activeProfileState.index + 1}/{profileGroup.profiles.length})\n            </span>\n            {nextButton}\n          </div>\n        )\n      }\n    }\n    return 'speedscope'\n  }\n\n  renderRightContent() {\n    const importFile = (\n      <div className={css(style.toolbarTab)} onClick={this.props.browseForFile}>\n        <span className={css(style.emoji)}></span>Import\n      </div>\n    )\n    const help = (\n      <div className={css(style.toolbarTab)}>\n        <a\n          href=\"https://github.com/jlfwong/speedscope#usage\"\n          className={css(style.noLinkStyle)}\n          target=\"_blank\"\n        >\n          <span className={css(style.emoji)}></span>Help\n        </a>\n      </div>\n    )\n\n    return (\n      <div className={css(style.toolbarRight)}>\n        {this.props.activeProfileState && (\n          <div className={css(style.toolbarTab)} onClick={this.props.saveFile}>\n            <span className={css(style.emoji)}></span>Export\n          </div>\n        )}\n        {importFile}\n        {help}\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className={css(style.toolbar)}>\n        {this.renderLeftContent()}\n        {this.renderCenterContent()}\n        {this.renderRightContent()}\n      </div>\n    )\n  }\n}\n\ninterface GLCanvasProps {\n  canvasContext: CanvasContext | null\n  setGLCanvas: (canvas: HTMLCanvasElement | null) => void\n}\nexport class GLCanvas extends Component<GLCanvasProps, void> {\n  private canvas: HTMLCanvasElement | null = null\n\n  private ref = (canvas?: Element) => {\n    if (canvas instanceof HTMLCanvasElement) {\n      this.canvas = canvas\n    } else {\n      this.canvas = null\n    }\n\n    this.props.setGLCanvas(this.canvas)\n  }\n\n  private container: HTMLElement | null = null\n  private containerRef = (container?: Element) => {\n    if (container instanceof HTMLElement) {\n      this.container = container\n    } else {\n      this.container = null\n    }\n  }\n\n  private maybeResize = () => {\n    if (!this.container) return\n    if (!this.props.canvasContext) return\n\n    let {width, height} = this.container.getBoundingClientRect()\n\n    const widthInAppUnits = width\n    const heightInAppUnits = height\n    const widthInPixels = width * window.devicePixelRatio\n    const heightInPixels = height * window.devicePixelRatio\n\n    this.props.canvasContext.gl.resize(\n      widthInPixels,\n      heightInPixels,\n      widthInAppUnits,\n      heightInAppUnits,\n    )\n    this.props.canvasContext.gl.clear(new Graphics.Color(1, 1, 1, 1))\n  }\n\n  onWindowResize = () => {\n    if (this.props.canvasContext) {\n      this.props.canvasContext.requestFrame()\n    }\n  }\n  componentWillReceiveProps(nextProps: GLCanvasProps) {\n    if (this.props.canvasContext !== nextProps.canvasContext) {\n      if (this.props.canvasContext) {\n        this.props.canvasContext.removeBeforeFrameHandler(this.maybeResize)\n      }\n      if (nextProps.canvasContext) {\n        nextProps.canvasContext.addBeforeFrameHandler(this.maybeResize)\n        nextProps.canvasContext.requestFrame()\n      }\n    }\n  }\n  componentDidMount() {\n    window.addEventListener('resize', this.onWindowResize)\n  }\n  componentWillUnmount() {\n    if (this.props.canvasContext) {\n      this.props.canvasContext.removeBeforeFrameHandler(this.maybeResize)\n    }\n    window.removeEventListener('resize', this.onWindowResize)\n  }\n  render() {\n    return (\n      <div ref={this.containerRef} className={css(style.glCanvasView)}>\n        <canvas ref={this.ref} width={1} height={1} />\n      </div>\n    )\n  }\n}\n\nexport interface ActiveProfileState {\n  profile: Profile\n  index: number\n  chronoViewState: FlamechartViewState\n  leftHeavyViewState: FlamechartViewState\n  sandwichViewState: SandwichViewState\n}\n\nexport type ApplicationProps = ApplicationState & {\n  setGLCanvas: (canvas: HTMLCanvasElement | null) => void\n  setLoading: (loading: boolean) => void\n  setError: (error: boolean) => void\n  setProfileGroup: (profileGroup: ProfileGroup) => void\n  setDragActive: (dragActive: boolean) => void\n  setViewMode: (viewMode: ViewMode) => void\n  setFlattenRecursion: (flattenRecursion: boolean) => void\n  setProfileIndexToView: (profileIndex: number) => void\n  activeProfileState: ActiveProfileState | null\n  canvasContext: CanvasContext | null\n}\n\nexport class Application extends StatelessComponent<ApplicationProps> {\n  private async loadProfile(loader: () => Promise<ProfileGroup | null>) {\n    this.props.setLoading(true)\n    await new Promise(resolve => setTimeout(resolve, 0))\n\n    if (!this.props.glCanvas) return\n\n    console.time('import')\n\n    let profileGroup: ProfileGroup | null = null\n    try {\n      profileGroup = await loader()\n    } catch (e) {\n      console.log('Failed to load format', e)\n      this.props.setError(true)\n      return\n    }\n\n    if (profileGroup == null) {\n      // TODO(jlfwong): Make this a nicer overlay\n      alert('Unrecognized format! See documentation about supported formats.')\n      this.props.setLoading(false)\n      return\n    }\n\n    if (this.props.hashParams.title) {\n      profileGroup = {\n        name: this.props.hashParams.title,\n        ...profileGroup,\n      }\n    }\n    document.title = `${profileGroup.name} - speedscope`\n\n    for (let profile of profileGroup.profiles) {\n      await profile.demangle()\n    }\n\n    for (let profile of profileGroup.profiles) {\n      const title = this.props.hashParams.title || profile.getName()\n      profile.setName(title)\n    }\n\n    console.timeEnd('import')\n\n    this.props.setProfileGroup(profileGroup)\n    this.props.setLoading(false)\n  }\n\n  loadFromFile(file: File) {\n    this.loadProfile(async () => {\n      const reader = new FileReader()\n      const loadPromise = new Promise(resolve => reader.addEventListener('loadend', resolve))\n      reader.readAsText(file)\n      await loadPromise\n\n      if (typeof reader.result !== 'string') {\n        throw new Error('Expected ArrayBuffer')\n      }\n\n      const profiles = await importProfiles(file.name, reader.result)\n      if (profiles) {\n        for (let profile of profiles.profiles) {\n          if (!profile.getName()) {\n            profile.setName(file.name)\n          }\n        }\n        return profiles\n      }\n\n      if (this.props.profileGroup && this.props.activeProfileState) {\n        // If a profile is already loaded, it's possible the file being imported is\n        // a symbol map. If that's the case, we want to parse it, and apply the symbol\n        // mapping to the already loaded profile. This can be use to take an opaque\n        // profile and make it readable.\n        const map = importEmscriptenSymbolMap(reader.result)\n        if (map) {\n          const {profile, index} = this.props.activeProfileState\n          console.log('Importing as emscripten symbol map')\n          profile.remapNames(name => map.get(name) || name)\n          return {\n            name: this.props.profileGroup.name || 'profile',\n            indexToView: index,\n            profiles: [profile],\n          }\n        }\n      }\n\n      return null\n    })\n  }\n\n  loadExample = () => {\n    this.loadProfile(async () => {\n      const filename = 'perf-vertx-stacks-01-collapsed-all.txt'\n      const data = await fetch(exampleProfileURL).then(resp => resp.text())\n      return await importProfiles(filename, data)\n    })\n  }\n\n  onDrop = (ev: DragEvent) => {\n    this.props.setDragActive(false)\n    ev.preventDefault()\n\n    const firstItem = ev.dataTransfer.items[0]\n    if ('webkitGetAsEntry' in firstItem) {\n      const webkitEntry: FileSystemDirectoryEntry = firstItem.webkitGetAsEntry()\n\n      // Instrument.app file format is actually a directory.\n      if (webkitEntry.isDirectory && webkitEntry.name.endsWith('.trace')) {\n        console.log('Importing as Instruments.app .trace file')\n        this.loadProfile(async () => {\n          return await importFromFileSystemDirectoryEntry(webkitEntry)\n        })\n        return\n      }\n    }\n\n    let file: File | null = ev.dataTransfer.files.item(0)\n    if (file) {\n      this.loadFromFile(file)\n    }\n  }\n\n  onDragOver = (ev: DragEvent) => {\n    this.props.setDragActive(true)\n    ev.preventDefault()\n  }\n\n  onDragLeave = (ev: DragEvent) => {\n    this.props.setDragActive(false)\n    ev.preventDefault()\n  }\n\n  onWindowKeyPress = async (ev: KeyboardEvent) => {\n    if (ev.key === '1') {\n      this.props.setViewMode(ViewMode.CHRONO_FLAME_CHART)\n    } else if (ev.key === '2') {\n      this.props.setViewMode(ViewMode.LEFT_HEAVY_FLAME_GRAPH)\n    } else if (ev.key === '3') {\n      this.props.setViewMode(ViewMode.SANDWICH_VIEW)\n    } else if (ev.key === 'r') {\n      const {flattenRecursion} = this.props\n      this.props.setFlattenRecursion(!flattenRecursion)\n    } else if (ev.key === 'n') {\n      const {activeProfileState} = this.props\n      if (activeProfileState) {\n        this.props.setProfileIndexToView(activeProfileState.index + 1)\n      }\n    } else if (ev.key === 'p') {\n      const {activeProfileState} = this.props\n      if (activeProfileState) {\n        this.props.setProfileIndexToView(activeProfileState.index - 1)\n      }\n    }\n  }\n\n  private saveFile = () => {\n    if (this.props.profileGroup) {\n      const {name, indexToView, profiles} = this.props.profileGroup\n      const profileGroup: ProfileGroup = {\n        name,\n        indexToView,\n        profiles: profiles.map(p => p.profile),\n      }\n      saveToFile(profileGroup)\n    }\n  }\n\n  private browseForFile = () => {\n    const input = document.createElement('input')\n    input.type = 'file'\n    input.addEventListener('change', this.onFileSelect)\n    input.click()\n  }\n\n  private onWindowKeyDown = async (ev: KeyboardEvent) => {\n    // This has to be handled on key down in order to prevent the default\n    // page save action.\n    if (ev.key === 's' && (ev.ctrlKey || ev.metaKey)) {\n      ev.preventDefault()\n      this.saveFile()\n    } else if (ev.key === 'o' && (ev.ctrlKey || ev.metaKey)) {\n      ev.preventDefault()\n      this.browseForFile()\n    }\n  }\n\n  onDocumentPaste = (ev: Event) => {\n    ev.preventDefault()\n    ev.stopPropagation()\n\n    const pasted = (ev as ClipboardEvent).clipboardData.getData('text')\n    this.loadProfile(async () => {\n      return await importProfiles('From Clipboard', pasted)\n    })\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onWindowKeyDown)\n    window.addEventListener('keypress', this.onWindowKeyPress)\n    document.addEventListener('paste', this.onDocumentPaste)\n    this.maybeLoadHashParamProfile()\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onWindowKeyDown)\n    window.removeEventListener('keypress', this.onWindowKeyPress)\n    document.removeEventListener('paste', this.onDocumentPaste)\n  }\n\n  async maybeLoadHashParamProfile() {\n    if (this.props.hashParams.profileURL) {\n      if (!canUseXHR) {\n        alert(\n          `Cannot load a profile URL when loading from \"${window.location.protocol}\" URL protocol`,\n        )\n        return\n      }\n      this.loadProfile(async () => {\n        const response = await fetch(this.props.hashParams.profileURL!)\n        let filename = new URL(this.props.hashParams.profileURL!).pathname\n        if (filename.includes('/')) {\n          filename = filename.slice(filename.lastIndexOf('/') + 1)\n        }\n        return await importProfiles(filename, await response.text())\n      })\n    } else if (this.props.hashParams.localProfilePath) {\n      // There isn't good cross-browser support for XHR of local files, even from\n      // other local files. To work around this restriction, we load the local profile\n      // as a JavaScript file which will invoke a global function.\n      ;(window as any)['speedscope'] = {\n        loadFileFromBase64: (filename: string, base64source: string) => {\n          const source = atob(base64source)\n          this.loadProfile(() => importProfiles(filename, source))\n        },\n      }\n\n      const script = document.createElement('script')\n      script.src = `file:///${this.props.hashParams.localProfilePath}`\n      document.head.appendChild(script)\n    }\n  }\n\n  onFileSelect = (ev: Event) => {\n    const file = (ev.target as HTMLInputElement).files!.item(0)\n    if (file) {\n      this.loadFromFile(file)\n    }\n  }\n\n  renderLanding() {\n    return (\n      <div className={css(style.landingContainer)}>\n        <div className={css(style.landingMessage)}>\n          <p className={css(style.landingP)}>\n             Hi there! Welcome to speedscope, an interactive{' '}\n            <a\n              className={css(style.link)}\n              href=\"http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html\"\n            >\n              flamegraph\n            </a>{' '}\n            visualizer. Use it to help you make your software faster.\n          </p>\n          {canUseXHR ? (\n            <p className={css(style.landingP)}>\n              Drag and drop a profile file onto this window to get started, click the big blue\n              button below to browse for a profile to explore, or{' '}\n              <a tabIndex={0} className={css(style.link)} onClick={this.loadExample}>\n                click here\n              </a>{' '}\n              to load an example profile.\n            </p>\n          ) : (\n            <p className={css(style.landingP)}>\n              Drag and drop a profile file onto this window to get started, or click the big blue\n              button below to browse for a profile to explore.\n            </p>\n          )}\n          <div className={css(style.browseButtonContainer)}>\n            <input\n              type=\"file\"\n              name=\"file\"\n              id=\"file\"\n              onChange={this.onFileSelect}\n              className={css(style.hide)}\n            />\n            <label for=\"file\" className={css(style.browseButton)} tabIndex={0}>\n              Browse\n            </label>\n          </div>\n\n          <p className={css(style.landingP)}>\n            See the{' '}\n            <a\n              className={css(style.link)}\n              href=\"https://github.com/jlfwong/speedscope#usage\"\n              target=\"_blank\"\n            >\n              documentation\n            </a>{' '}\n            for information about supported file formats, keyboard shortcuts, and how to navigate\n            around the profile.\n          </p>\n\n          <p className={css(style.landingP)}>\n            speedscope is open source. Please{' '}\n            <a\n              className={css(style.link)}\n              target=\"_blank\"\n              href=\"https://github.com/jlfwong/speedscope/issues\"\n            >\n              report any issues on GitHub\n            </a>.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  renderError() {\n    return (\n      <div className={css(style.error)}>\n        <div> Something went wrong.</div>\n        <div>Check the JS console for more details.</div>\n      </div>\n    )\n  }\n\n  renderLoadingBar() {\n    return <div className={css(style.loading)} />\n  }\n\n  renderContent() {\n    const {viewMode, activeProfileState, error, loading, glCanvas} = this.props\n\n    if (error) {\n      return this.renderError()\n    }\n\n    if (loading) {\n      return this.renderLoadingBar()\n    }\n\n    if (!activeProfileState || !glCanvas) {\n      return this.renderLanding()\n    }\n\n    switch (viewMode) {\n      case ViewMode.CHRONO_FLAME_CHART: {\n        return <ChronoFlamechartView activeProfileState={activeProfileState} glCanvas={glCanvas} />\n      }\n      case ViewMode.LEFT_HEAVY_FLAME_GRAPH: {\n        return (\n          <LeftHeavyFlamechartView activeProfileState={activeProfileState} glCanvas={glCanvas} />\n        )\n      }\n      case ViewMode.SANDWICH_VIEW: {\n        return <SandwichViewContainer activeProfileState={activeProfileState} glCanvas={glCanvas} />\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div\n        onDrop={this.onDrop}\n        onDragOver={this.onDragOver}\n        onDragLeave={this.onDragLeave}\n        className={css(style.root, this.props.dragActive && style.dragTargetRoot)}\n      >\n        <GLCanvas setGLCanvas={this.props.setGLCanvas} canvasContext={this.props.canvasContext} />\n        <Toolbar\n          saveFile={this.saveFile}\n          browseForFile={this.browseForFile}\n          {...this.props as ApplicationProps}\n        />\n        <div className={css(style.contentContainer)}>{this.renderContent()}</div>\n        {this.props.dragActive && <div className={css(style.dragTarget)} />}\n      </div>\n    )\n  }\n}\n\nconst style = StyleSheet.create({\n  glCanvasView: {\n    position: 'absolute',\n    width: '100vw',\n    height: '100vh',\n    zIndex: -1,\n    pointerEvents: 'none',\n  },\n  error: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n  },\n  loading: {\n    height: 3,\n    marginBottom: -3,\n    background: Colors.DARK_BLUE,\n    transformOrigin: '0% 50%',\n    animationName: [\n      {\n        from: {\n          transform: `scaleX(0)`,\n        },\n        to: {\n          transform: `scaleX(1)`,\n        },\n      },\n    ],\n    animationTimingFunction: 'cubic-bezier(0, 1, 0, 1)',\n    animationDuration: '30s',\n  },\n  root: {\n    width: '100vw',\n    height: '100vh',\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'relative',\n    fontFamily: FontFamily.MONOSPACE,\n    lineHeight: '20px',\n  },\n  dragTargetRoot: {\n    cursor: 'copy',\n  },\n  dragTarget: {\n    boxSizing: 'border-box',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    border: `5px dashed ${Colors.DARK_BLUE}`,\n    pointerEvents: 'none',\n  },\n  contentContainer: {\n    position: 'relative',\n    display: 'flex',\n    overflow: 'hidden',\n    flexDirection: 'column',\n    flex: 1,\n  },\n  landingContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n  },\n  landingMessage: {\n    maxWidth: 600,\n  },\n  landingP: {\n    marginBottom: 16,\n  },\n  hide: {\n    display: 'none',\n  },\n  browseButtonContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  browseButton: {\n    marginBottom: 16,\n    height: 72,\n    flex: 1,\n    maxWidth: 256,\n    textAlign: 'center',\n    fontSize: FontSize.BIG_BUTTON,\n    lineHeight: '72px',\n    background: Colors.DARK_BLUE,\n    color: Colors.WHITE,\n    transition: `all ${Duration.HOVER_CHANGE} ease-in`,\n    ':hover': {\n      background: Colors.BRIGHT_BLUE,\n    },\n  },\n  link: {\n    color: Colors.BRIGHT_BLUE,\n    cursor: 'pointer',\n    textDecoration: 'none',\n  },\n  toolbar: {\n    height: Sizes.TOOLBAR_HEIGHT,\n    flexShrink: 0,\n    background: Colors.BLACK,\n    color: Colors.WHITE,\n    textAlign: 'center',\n    fontFamily: FontFamily.MONOSPACE,\n    fontSize: FontSize.TITLE,\n    lineHeight: `${Sizes.TOOLBAR_TAB_HEIGHT}px`,\n    userSelect: 'none',\n  },\n  toolbarLeft: {\n    position: 'absolute',\n    height: Sizes.TOOLBAR_HEIGHT,\n    overflow: 'hidden',\n    top: 0,\n    left: 0,\n    marginRight: 2,\n    textAlign: 'left',\n  },\n  toolbarCenter: {\n    paddingTop: 1,\n    height: Sizes.TOOLBAR_HEIGHT,\n  },\n  toolbarRight: {\n    height: Sizes.TOOLBAR_HEIGHT,\n    overflow: 'hidden',\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    marginRight: 2,\n    textAlign: 'right',\n  },\n  toolbarProfileIndex: {\n    color: Colors.LIGHT_GRAY,\n  },\n  toolbarProfileNavButton: {\n    opacity: 0.8,\n    fontSize: FontSize.TITLE,\n    lineHeight: `${Sizes.TOOLBAR_TAB_HEIGHT}px`,\n    ':hover': {\n      opacity: 1.0,\n    },\n    background: 'none',\n    border: 'none',\n    padding: 0,\n    marginLeft: '0.3em',\n    marginRight: '0.3em',\n    transition: `all ${Duration.HOVER_CHANGE} ease-in`,\n  },\n  toolbarProfileNavButtonDisabled: {\n    opacity: 0.5,\n    ':hover': {\n      opacity: 0.5,\n    },\n  },\n  toolbarTab: {\n    background: Colors.DARK_GRAY,\n    marginTop: Sizes.SEPARATOR_HEIGHT,\n    height: Sizes.TOOLBAR_TAB_HEIGHT,\n    lineHeight: `${Sizes.TOOLBAR_TAB_HEIGHT}px`,\n    paddingLeft: 2,\n    paddingRight: 8,\n    display: 'inline-block',\n    marginLeft: 2,\n    transition: `all ${Duration.HOVER_CHANGE} ease-in`,\n    ':hover': {\n      background: Colors.GRAY,\n    },\n  },\n  toolbarTabActive: {\n    background: Colors.BRIGHT_BLUE,\n    ':hover': {\n      background: Colors.BRIGHT_BLUE,\n    },\n  },\n  noLinkStyle: {\n    textDecoration: 'none',\n    color: 'inherit',\n  },\n  emoji: {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n    paddingTop: '0px',\n    marginRight: '0.3em',\n  },\n})\n","import {createContainer, Dispatch, bindActionCreator, ActionCreator} from '../lib/typed-redux'\nimport {Application, ActiveProfileState} from './application'\nimport {ApplicationState} from '../store'\nimport {getProfileToView, getCanvasContext} from '../store/getters'\nimport {actions} from '../store/actions'\nimport {Graphics} from '../gl/graphics'\n\nexport const ApplicationContainer = createContainer(\n  Application,\n  (state: ApplicationState, dispatch: Dispatch) => {\n    const {flattenRecursion, profileGroup} = state\n\n    let activeProfileState: ActiveProfileState | null = null\n    if (profileGroup) {\n      if (profileGroup.profiles.length > profileGroup.indexToView) {\n        const index = profileGroup.indexToView\n        const profileState = profileGroup.profiles[index]\n        activeProfileState = {\n          ...profileGroup.profiles[profileGroup.indexToView],\n          profile: getProfileToView({profile: profileState.profile, flattenRecursion}),\n          index: profileGroup.indexToView,\n        }\n      }\n    }\n\n    function wrapActionCreator<T>(actionCreator: ActionCreator<T>): (t: T) => void {\n      return bindActionCreator(dispatch, actionCreator)\n    }\n\n    // TODO(jlfwong): Cache this and resizeCanvas below to prevent re-renders\n    // due to changing props.\n    const setters = {\n      setGLCanvas: wrapActionCreator(actions.setGLCanvas),\n      setLoading: wrapActionCreator(actions.setLoading),\n      setError: wrapActionCreator(actions.setError),\n      setProfileGroup: wrapActionCreator(actions.setProfileGroup),\n      setDragActive: wrapActionCreator(actions.setDragActive),\n      setViewMode: wrapActionCreator(actions.setViewMode),\n      setFlattenRecursion: wrapActionCreator(actions.setFlattenRecursion),\n      setProfileIndexToView: wrapActionCreator(actions.setProfileIndexToView),\n    }\n\n    return {\n      activeProfileState,\n      dispatch,\n      canvasContext: state.glCanvas ? getCanvasContext(state.glCanvas) : null,\n      resizeCanvas: (\n        widthInPixels: number,\n        heightInPixels: number,\n        widthInAppUnits: number,\n        heightInAppUnits: number,\n      ) => {\n        if (state.glCanvas) {\n          const gl = getCanvasContext(state.glCanvas).gl\n          gl.resize(widthInPixels, heightInPixels, widthInAppUnits, heightInAppUnits)\n          gl.clear(new Graphics.Color(1, 1, 1, 1))\n        }\n      },\n      ...setters,\n      ...state,\n    }\n  },\n)\n","import {h, render} from 'preact'\nimport {createApplicationStore} from './store'\nimport {Provider} from 'preact-redux'\nimport {ApplicationContainer} from './views/application-container'\n\nconsole.log(`speedscope v${require('../package.json').version}`)\n\ndeclare const module: any\nif (module.hot) {\n  module.hot.dispose(() => {\n    // Force the old component go through teardown steps\n    render(<div />, document.body, document.body.lastElementChild || undefined)\n  })\n  module.hot.accept()\n}\n\nconst lastStore: any = (window as any)['store']\nconst store = createApplicationStore(lastStore ? lastStore.getState() : {})\n;(window as any)['store'] = store\n\nrender(\n  <Provider store={store}>\n    <ApplicationContainer />\n  </Provider>,\n  document.body,\n  document.body.lastElementChild || undefined,\n)\n"]}